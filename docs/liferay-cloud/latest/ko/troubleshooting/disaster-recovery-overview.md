# 재해 복구 개요

Liferay Cloud는 재해 복구를 위한 두 가지 전략인 자동 및 지역 간을 제공합니다.

## 자동 재해 복구 전략

Liferay Cloud는 동일한 지역 내 서로 다른 지리적 사이트에 있는 3개의 영역 간에 서비스 인스턴스를 배포하고 한 영역이 다운되면 다른 영역에서 서비스를 다시 시작하여 자동 재해 복구 프로토콜을 수행합니다. 영역 중 하나라도 사용할 수 없게 되면 Load Balancer는 고객 측에서 DNS를 변경할 필요 없이 나머지 영역으로 자동 라우팅합니다. 이 상황에서 **사고** 동안 고객의 조치가 필요하지 않습니다.

## 교차 지역 재해 복구 전략

IT 업계에는 "콜드", "웜" 또는 "핫"으로 분류된 여러 교차 지역 DR 전략이 있습니다. 이러한 전략은 문제가 발생했을 때 시스템이 복구할 준비가 되어 있는지 나타냅니다. 한 가지 비유는 운전 중 타이어 펑크가 났을 때의 반응입니다. 이 상황에 대처하는 방법은 다음과 같은 준비 상태에 따라 다릅니다.

| 유형  | 솔루션                                                                                                |
|:--- |:-------------------------------------------------------------------------------------------------- |
| 춥다  | 스페어 타이어가 없으므로 새 타이어를 가져오려면 다른 사람을 불러야 합니다. 누군가 와서 타이어를 교체할 때까지 여행이 중단됩니다.                          |
| 따뜻한 | 스페어 타이어와 교체 키트가 있으므로 차에 가지고 있는 것을 사용하여 도로로 돌아갈 수 있습니다. 그러나 문제를 해결하려면 중지해야 합니다.                     |
| 더운  | 특별한 런플랫 타이어가 있습니다. 약간 속도를 줄여야 할 수도 있지만 여정에 즉각적인 영향은 없습니다. 계속할 수 있을 만큼 타이어가 잘 작동합니다(결국 문제를 해결해야 함). |

Liferay Cloud의 DR 전략은 **Warm** 입니다. Liferay Cloud 사용자는 재해 시나리오에 대응하기 위해 지원팀에 문의할 필요는 없지만 지역 간 재해가 발생한 경우 제공된 도구를 사용하기 위해 조치를 취해야 합니다.

## 재해 복구 예제 시나리오

다음은 가상 재해 시나리오의 경우 Liferay 클라우드 재해 복구 도구 및 접근 방식이 어떻게 작동하는지에 대한 예입니다.

### 사고 중

| 시간         | 사건                                                                                                                                     |
|:---------- |:-------------------------------------------------------------------------------------------------------------------------------------- |
| 오후 12시 30분 | 프로덕션 환경(**europe-west2** 지역에 사이트)에서는 모든 것이 정상입니다. 사용자는 문제 없이 시스템에 액세스할 수 있습니다.                                                           |
| 오후 1시      | 시간별 자동 백업이 트리거됩니다. 이렇게 하면 데이터베이스 및 문서 라이브러리의 복사본이 생성됩니다.                                                                               |
| 오후 2시      | 자동 백업이 다시 시작됩니다.                                                                                                                       |
| 오후 2시 34분  | 전체 **europe-west2** 지역이 손상되었다는 알림을 받습니다. 가동 중지 시간을 최소화하려면 DR 환경(**us-west1** 지역에 있음)을 활성화하도록 이동해야 합니다. 오후 2시부터 오후 2시 34분까지 백업이 생성되지 않습니다. |
| 오후 2시 39분  | 프로덕션 데이터베이스 및 문서 라이브러리의 오후 2시 백업을 DR 환경으로 복원합니다.                                                                                       |
| 오후 2시 41분  | 프로덕션에서 최신 빌드 번호를 검색하여 DR 환경에 배포합니다.                                                                                                    |
| 오후 2시 45분  | 귀하의 팀은 DR 환경에서 VPN이 올바르게 구성되었는지 확인합니다.                                                                                                 |
| 오후 2시 50분  | 사용자 트래픽을 DR 환경으로 라우팅하도록 사용자 정의 도메인이 구성됩니다.                                                                                             |
| 오후 3시      | 모든 것이 정상으로 돌아왔고 이제 트래픽이 DR 환경을 통해 라우팅됩니다.                                                                                              |

위의 단계에 걸리는 시간은 애플리케이션의 크기와 팀이 응답할 수 있는 속도에 따라 다릅니다.

### 사후 복구

| 시간        | 사건                                                                                      |
|:--------- |:--------------------------------------------------------------------------------------- |
| 오후 4시     | **europe-west2** 지역이 복구되었고 인시던트가 종료되었다는 알림이 팀에 전달됩니다. 팀은 원래 프로덕션 환경으로 다시 마이그레이션할 준비를 합니다. |
| 오후 4시 16분 | 재해 발생 시 새로운 사용자 데이터가 생성되어 DR 환경의 수동 백업을 수행합니다.                                          |
| 오후 4시 21분 | 수동 백업은 프로덕션 환경에서 복원되고 사용자 지정 도메인 구성은 원래 상태로 돌아갑니다.                                      |
| 오후 4시 25분 | 트래픽은 원래 프로덕션 환경으로 다시 라우팅됩니다.                                                            |

## 추가 정보

* [지역 간 재해 복구 구성](./configuring-cross-region-disaster-recovery.md)
