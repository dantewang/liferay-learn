# 商品オプションの使用

商品 **オプション** では、商品をカスタマイズするための便利で柔軟な方法を提供しています。 オプションを使用すると、チャネルで販売されている商品にフィールドを追加して、顧客が商品のバリエーションやバンドルなどを選択できるようになります。

オプションを使い始めるには、まずオプションテンプレートの [作成と構成](#creating-an-option-template) をします。 そして、テンプレートの構成に応じて、 [値を追加](#adding-values-to-option-templates) します。 作成したら、商品に [テンプレートを適用](#applying-an-option-template-to-a-product) し、グローバルテンプレートに影響を与えずに商品レベルごとに [設定と値を構成](#configuring-options-and-values-applied-to-products) します。

## オプションテンプレートの作成

次の手順に従って、オプションテンプレートを作成します。

1. **グローバルメニュー**(![Global Menu](../../../images/icon-applications-menu.png))を開き、 ［**commerce**］ タブをクリックし、 ［**商品管理**］ &rarr; ［**Options**］ に移動します。

1. **追加** ボタン（![Add icon](../../../images/icon-add.png)）をクリックします。

   ![追加ボタンをクリックして、新しいオプションテンプレートを作成します](./using-product-options/images/01.png)

1. テンプレートの ［**Name**］ と ［**Description**］ を入力します（オプション）。 **キー** は名前フィールドに合わせて自動的に生成されますが、必要に応じて手動でキーを変更することができます。

1. テンプレートの **項目タイプ** を選択します。 これにより、商品に使用されるフィールドのタイプが決まります。

   * **テキスト** ：顧客がテキストを入力するための空白のフィールドを追加します
   * **リストから選択** ：オプションの値のドロップダウンリストを追加します
   * **１つだけ選択** ：オプションの値のラジオボタンリストを追加します
   * **複数選択** : オプションの値にチェックボックスリストを追加し、顧客が複数の値を選択できるようにします
   * **日付** ：顧客が日付を入力するためのフィールドを追加します
   * **数値** ：顧客が整数を入力するための空白のフィールドを追加します
   * **二者択一（ブーリアン）の質問** ：オプションにブーリアンチェックボックスを追加します

1. オプションが **ファセット・ナビゲーションで利用** できるかどうかを判断します。 有効にすると、オプションを商品の検索フィルターとして使用できます。

1. オプションが ［**Required**］ であるかどうかを判断します。 有効にすると、顧客は商品をカートに追加する前にフィールドを使用する必要があります。

1. オプションが ［**SKU Contributor**］ であるかどうかを判断します。

   有効にすると、オプションの値を使用して、商品バリアントの[SKU](./creating-skus-for-product-variants.md)を作成します。 顧客は、利用可能なオプション値から選択する必要があります。

   ```{note}
   SKUコントリビューターは、*1つだけ選択*および*リストから選択*項目タイプでのみ有効にできます。
   ```

1. 完了したら、 ［**Save**］ をクリックします。

   ![新しいオプションテンプレートを作成する](./using-product-options/images/02.png)

作成したら、 [汎用値](#adding-values-to-option-templates) をオプションテンプレートに追加するか、この手順をスキップして個々の商品に [オプションを適用](#applying-an-option-template-to-a-product) することができます。

```{note}
または、*商品*ページから基本的なオプションテンプレートを作成することもできます。 *グローバルメニュー* →［*Commerce タブ*］ →［ *商品管理*］ → ［*商品*］ に移動します。 次に、目的の［*商品*］を選択して、［*オプション*］タブをクリックします。 ［*オプションを追加*］フィールドに新しいオプションの名前を入力し、［*新規作成*］をクリックします。 オプションテンプレートが直ちに作成され、本商品に適用されます。 
```

## オプションテンプレートへの値の追加

オプションが ［**リストから選択**］ 、 ［**1つだけ選択**］ 、または ［**複数選択**］ のフィールドタイプを使用している場合は、値を追加する必要があります。

以下の手順に従って、オプションテンプレートに一般的な値を追加します。

1. **グローバルメニュー**(![Global Menu](../../../images/icon-applications-menu.png))を開き、 ［**commerce**］ タブをクリックし、 ［**商品管理**］ &rarr; ［**オプション**］ に移動します。

1. 目的のテンプレートの **値** をクリックします。

1. **追加** ボタン（![Add icon](../../../images/icon-add.png)）をクリックします。

1. 値に ［**Name**］ を入力します。 入力された名前に合わせて ［**Key**］ が自動的に生成されますが、必要に応じて個別に設定することもできます。

1. 値の ［**Priority**］ を設定して、リストされる順番を決定します。

1. ［**Save**］ をクリックすると、オプションテンプレートに値が追加されます。

   ![商品オプションに値を追加します。](./using-product-options/images/03.png)

この作業を繰り返すことで、好きなだけ一般的な値をオプションに追加することができます。 テンプレートが商品に適用されると、すべての値が含まれますが、テンプレート値に影響を与えることなく、各商品の値を追加、削除、または編集することができます。

## オプションを商品に適用する

オプションを商品に適用するには、以下の手順に従ってください：

1. **グローバルメニュー**(![Global Menu](../../../images/icon-applications-menu.png))を開き、 ［**commerce**］ タブをクリックして、 ［**商品管理**］ &rarr; ［**Products**］ に移動します。

1. ［**Options**］ タブをクリックします。

1. ［**オプションの追加**］ フィールドにオプションのテンプレート名を入力し、 ［**選択**］ をクリックします。

   ![目的のオプションテンプレートを選択します。](./using-product-options/images/04.png)

オプションはすぐに商品に適用され、顧客は［商品詳細］ウィジェットからオプションフィールドにアクセスできます。

必要に応じて、同じ商品に複数のオプションを追加することができます。 詳しくは、 [商品バリアントのSKU作成](./creating-skus-for-product-variants.md) を参照してください。

```{important}
SKUコントリビューターが有効になっている場合は、オプションの値を作成した後に手動でSKUを生成する必要があります。 これを行うには、商品の［*SKUs*］タブに移動し、［*追加*］ボタンをクリックして、［*SKU のすべての組み合わせを生成*］を選択します。 それぞれの値に対して一意なSKUがすぐに生成されます。 SKUが生成されていない場合、オプションのフィールドには値が表示されません。
```

![顧客は、商品の表示ページでオプションフィールドを表示・使用することができます。](./using-product-options/images/05.png)

## 商品に適用されるオプションと値の設定

オプションを商品に適用すると、オプションとその値に関する追加の構成設定にアクセスできます。

```{note}
商品のオプションを変更しても、オプションテンプレートには影響がありません。その逆も同様です。
```

### 追加のオプション設定

* **ポジション** ：オプションが表示される順序を決めるために、オプションの重要度を `0.0`をはじめとし、設定します。

* **価格の種類** : オプションの値に使用される価格タイプ（動的または静的）を設定します。

  * **動的** 価格設定では、値をSKUにリンクする必要があり、値自体の価格にはリンクされた商品の価格を使用します。

  * **静的** 価格設定では、オプションの値に固定価格が使用されます。 値が商品にリンクされている場合、静的価格はリスト価格に影響を与えずに商品のインスタンス価格をオーバーライドします。

```{note}
価格の種類の属性は、*1つだけ選択*および*リストから選択*の項目タイプにのみ対応しています。
```

### 追加の値の設定 

* **デフォルト** ：オプションのデフォルト値を設定します。 

* **差分価格**(静的のみ)：値の具体的な価格を設定します。 

* **商品** :  既存のSKUを値にリンクし、その数量を指定します。

```{note}
商品は、価格の種類の属性を持つオプションにのみリンクできます。
```

## Commerce 2.1以前

### オプションテンプレートの作成

オプションテンプレートを作成するには：

1. ［**コントロールパネル**］ → ［**commerce**］ → ［**商品**］ に移動します。
1. ［**オプション**］ タブをクリックします。 ページの左側に既存のテンプレートのリストが表示され、右側に ［**Option Template Detail**］ フォームが表示されます。
1. （+）をクリックして、オプションテンプレートを追加します。
1. 次のように入力します：
    * **タイトル** : 色
    * **説明** : 色の選択
    * **フィールドタイプ** : リストから選択
    * **ファセットナビゲーションの使用** : はい
    * **必須** : はい
    * **SKUコントリビューター:** いい え
    * **キー** :（自動生成）

        ![オプションテンプレート](./using-product-options/images/06.png)

1. ［**保存**］ をクリックします。

オプションテンプレートが追加され、すべての商品に適用できます。

［**Use in Faceted Navigation**］ が **有効** に切り替えられている場合、ユーザーは指定されたオプションに基づいて検索結果をフィルタリングできます。

SKUコントリビューターには、 [SKU](./creating-skus-for-product-variants.md)介して、バリアントごとに一意の価格およびその他の属性を割り当てることができます。 有効にした場合、販売するにはオプションでSKUが必要です。

```{warning}
ブールオプションをSKUコントリビューターとして使用することはできません。 ブールオプションをSKUコントリビューターとして使用しようとすると、次の警告メッセージが表示されます： `選択したフィールドタイプに対してSKUコントリビューターをtrueに設定できません。`
```

### オプション値の追加

テンプレートで使用されるフィールドタイプによっては、そのオプションの値を作成する必要があります。 この例では、 ［**Select from List**］ には、異なる商品の色などのオプション値が必要です。

複数のオプション値を追加するには：

1. **色** の隣にある **Values** リンクをクリックします。
1. (![Add icon](../../../images/icon-add.png)) をクリックして、オプションテンプレートを追加します。
1. 次のように入力します：
    * **名前:** 黒
    * **重要度:** 1.0
     **キー:**（［**Name**］ フィールドから自動生成）

        ![オプション値の追加](./using-product-options/images/07.png)

1. ［**Save**］ をクリックします。

これで、 ［**Black**］ が色オプションに追加されます。 さらに色を追加するには、手順を繰り返して［priority］を上げます。 たとえば、 **白色** を追加して［priority］を2.0に設定し、その後に **青色** を［priority］3.0で追加できます。 ［priority］フィールドによってオプションが表示される順序が決定し、最も低い値が最初に表示されることに注意してください。

### オプションテンプレートを商品に適用する

テンプレートを商品に適用すると、商品のオプションに変更を加えることができます。 これらの変更は、オプションテンプレートやその他の商品には影響しません。

オプションテンプレートを商品に適用するには：

1. ［**グローバルアプリケーション**］ → ［**commerce**］ → ［**商品**］ に移動します。
1. リストされている任意の商品をクリックします。 たとえば、Miniumアクセラレータを使用してサイトを作成した場合は、サンプル商品として ［**Torque Converters**］ があります。

    ![商品オプションを追加する商品を選択します。](./using-product-options/images/08.png)

1. ［**Torque Converters**］ をクリックします。
1. ［**Options**］ タブをクリックします。

    ![［オプション］タブをクリックします。](./using-product-options/images/09.png)

1. オプションを検索します（たとえば、 **数量**）。
1. ［**選択**］ の隣にある ［**Package Quantity**］ をクリックします。

これで、オプションテンプレートが適用されました。商品がカタログページに表示されると、購入者はさまざまな数量のトルクコンバーターを選択できるようになりました。

![トルクコンバーターに数量オプションが追加されました。](./using-product-options/images/10.png)

## 関連トピック

商品ごとに複数のオプションテンプレートを適用でき、各オプションには独自の表示優先度があることに注意してください。 ［**Package Quantity**］（Miniumアクセラレータでデフォルトで作成される）に加えて、上記のオプションテンプレートのセクションで作成した ［**色**］ オプションがあります。 テンプレート自体を変更せずに、この画面でオプション値を変更することもできます。

1. ［**Package Quantity**］ の隣にある ［**Values**］ リンクをクリックします。
2. (![Add icon](../../../images/icon-add.png))ボタンをクリックして、新しい値を追加します。
3. 次のように入力します：
    * **Name:** 60
    * **Priority:** 5.0
    * **Key** :（自動生成）
4. ［**Save**］ をクリックします。

    ![商品オプションに値を追加します。](./using-product-options/images/11.png)

新しいオプションが、購入者が選択できる数量に追加されました。
