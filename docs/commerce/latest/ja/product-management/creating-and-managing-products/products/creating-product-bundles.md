# 商品バンドルの作成

Liferayは、 [商品オプション](./using-product-options.md) を使用した **商品バンドル** の作成をサポートしています。 オプションでは、現在の商品と他のSKU（シンプル、バーチャル、グループ）をリンクする値を定義できます。 一度定義すると、顧客は製品をカートに追加する際に異なるオプション値を選択することができます。

コンピュータのハードウェアの販売会社を例に挙げてみましょう。 顧客は、標準的なケース、電源、マザーボード、OSを備えた特定のコンピュータ・モデルを選択できるが、その他のハードウェア・コンポーネント（CPU、GPU、RAM、ストレージなど）のオプションもある。 各製品のバリエーションは、選択されたコンポーネントに基づいて独自の価格を持っています。 総費用は、現在の商品の価格に選択された値の価格を加算して計算されます。

```{note}
商品バンドルに加え、Liferayは複数のSKUを組み合わせて販売するためのグループ化された商品を提供します。 この製品タイプは、顧客の利便性や特別なプロモーションのためにSKUをグループ化します。 製品バンドルとは異なり、グループ化された各製品は、独自のSKUを持ち、その最終コストは、独自の価格エントリによって決定される。 詳しくは [グループ化された商品の作成](../product-types/creating-a-grouped-product.md) をご覧ください。
```

製品バンドルを作成するには、以下の手順に従ってください：

1. **グローバルメニュー**(![グローバルメニュー](../../../images/icon-applications-menu.png))を開き、 **Commerce** &rarr; **Products** に移動します。

1. バンドルのベースとして使用する製品を選択します。

1. **オプション** タブを選択します。

1. Add Optionsフィールドで、新しいバンドル・オプションの **名前** を入力し、 **Create New** をクリックします。

   これにより新しいオプションテンプレートが作成され、デフォルトのオプション設定を使用して商品に適用されます。

   ```{tip}
   または、*Options*ページでオプションテンプレートを作成することもできます。 この方法は、よく使われるタイプのバンドルに適しています。 詳しくは、 [「製品オプションの使用」](./using-product-options.md) をご覧ください。
   ```

   ![Go to the product's options tab, and create a new option for your bundle.](./creating-product-bundles/images/01.png)

1. 新しいオプションを選択して、その詳細と値を編集する。

1. 以下のオプション設定を行う：

   * **Description**（オプション）：ローカライズされた **説明** を追加します。
   * **Position** ：オプションの優先順位を設定し、他のオプションとの相対的な表示順を決定する。
   * **ファセット・ナビゲーション** で使用する：オプションが商品検索結果のフィルタリングに使用できるかどうかを決定します。
   * **必須** :製品をカートに追加する前に、ユーザーがオプション値を選択する必要があるかどうかを決定します。
   * **SKU貢献者** ：オプションの値がユニークな製品 SKU を生成するために使用されるかどうかを判断する。
   * **フィールド・タイプ** ：オプションに使用するフィールドのタイプを選択します。
   * **価格タイプ** ：オプション値に **Static** または **Dynamic** のどちらの価格設定を使用するかを選択します。

   ```{note}
   *Dynamic*はリンクされたSKUの価格を値に使用し、*Static*は値フィールドに直接設定された固定価格を使用します。 動的価格と静的価格は、現在の商品の基本価格に加算されます。

   また、商品バンドルはPrice Type属性を使用するため、Single SelectionとSelect from Listフィールド・タイプしか使用できません。
   ```

   ![Use this form to configure the option's settings.](./creating-product-bundles/images/02.png)

1. Valuesセクションまでスクロールダウンし、 **Add**(![Add Button](../../../images/icon-add.png)) をクリックし、値の詳細を以下のように入力します：

   * **Name** ：値に使用する表示名を設定します。 SKU Contributorを有効にすると、オプション値のSKUはこの名前を使用します。
   * **Position** ：値の優先順位を設定し、オプションのフィールド内での配置を決定する。
   * **キー** ：このフィールドはnameフィールドと一致するように自動生成されますが、独立して設定することもできます。

   必要な値がすべて追加されるまでこの作業を繰り返します。

   ![Use this form to add values to the created option.](./creating-product-bundles/images/03.png)

1. 作成したら、値をクリックして以下の追加設定にアクセスします：

   * **デフォルト** ： オプションのデフォルトを選択した値にするかどうかを決定する。
   * **デルタ価格**（スタティックのみ）：値に特定の価格を設定します。
   * **製品** ：既存のSKUを値にリンクし、その数量を指定します。

   ```{important}
   オプションの値はそれぞれ一意でなければならない。 つまり、同じオプションの複数の値に対して、同じ商品＋数量の組み合わせを使用することはできません。 ただし、製品に追加された他のオプションに同じ値を使用することができます。

   また、バンドル値は、他の製品バンドル、_必須_オプションのある製品、またはサブスクリプションが有効な製品にリンクすることはできません。 バンドルがダイナミックプライシングを使用する場合、_APPROVED_商品インスタンスにのみリンクできます。
   ```

1. (オプション)オプションのSKU Contributorを有効にした場合、商品ページの **SKUs** タブに移動し、 **Add**(![Add Button](../../../images/icon-add.png)) をクリックし、 **Generate All SKU Combinations** を選択します。

   これにより、各オプション値に新しいSKUが生成され、SKUsタブで編集することができます。

   ```{important}
   有効にすると、Requiredがオプションで有効になっていなくても、顧客は必ず*値を選択しなければならない。
   ```

1. 商品詳細ページでバンドル内容をご確認ください。

![Customers can select an option from the bundle.](./creating-product-bundles/images/04.png)

## ミニカートからのバンドル編集

{bdg-secondary}`liferay DXP 2023.Q4+/Portal 7.4 GA98+`.

一度ミニカートに追加した商品バンドルは、チェックアウト前にいつでも編集することができます。

1. 製品バンドルをカートに追加します。

1. ミニカートを開ける。

   **商品オプションを表示**をクリックすると、バンドルから現在選択されているオプションが表示されます。 もう一度クリックするとオプションが非表示になります。

   ![You can view the selected option of a bundle in the mini cart.](./creating-product-bundles/images/05.png)

1. 商品の横にある **Actions**(![アクションアイコン](../../../images/icon-actions.png))をクリックし、 **Edit** を選択します。

   ![Click the Actions icon to edit or delete the bundle.](./creating-product-bundles/images/06.png)

1. 利用可能な他のオプションのいずれかを選択します。

   ![Choose one of the available options and click save.](./creating-product-bundles/images/07.png)

1. ［**保存**］をクリックします。

カートの価格は、選択したオプションによって価格が変更された場合、自動的に更新されます。

```{important}
ベース商品をカートに入れた場合、バンドルを編集するオプションは利用できません。
```

## 関連トピック

* [商品オプションの使用](./using-product-options.md) 
