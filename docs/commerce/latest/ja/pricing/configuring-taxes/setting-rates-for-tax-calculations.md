# 税の計算のためのレート設定

Liferay Commerceには、商品や送料に税率を定義して適用するためのツールが組み込まれています。 これらのレートは、設定可能な税エンジンを使用して計算され、 [税カテゴリー](./creating-tax-categories.md)に追加されます。 その後、チャネル商品や送料に税カテゴリーを割り当てることで、それらに[税率を適用](./applying-tax-rates.md)することができます。

* [税エンジンの理解](#understanding-tax-engines)
* [税計算の構成](#configuring-tax-calculations)
* [税率の設定](#setting-tax-rates)

## 税エンジンの理解

Commerceの税エンジンは、取引が行われる時に税率の計算を定義します。 Liferayは、すぐに使用できる2つのエンジン（**固定税率** と **住所別**）を提供していますが、 [カスタムエンジン](../../developer-guide/sales/implementing-a-new-tax-engine.md)を設計・実装することもできます。

```{note}
税カテゴリーには、同じまたは異なる税エンジンを使用して作成された複数の税率を含めることができます。
```

### 固定税率

**固定税率** エンジンは、カテゴリーが割り当てられているすべての商品と送料に同じ税率を適用します。 このレートは、購入者の所在地にかかわらず適用されます。

### 住所別

**住所別** エンジンは、購入者の所在地に基づいて特定のレートを適用し、購入者の請求先住所または配送先住所を使用します。 1つの税カテゴリーに複数の住所別レートが設定されている場合は、購入者の所在地に適したレートのみが適用されます。

## 税計算の構成

以下の手順で税計算タイプを設定します：

1. **グローバルメニュー**(![Global Menu](../../images/icon-applications-menu.png))を開き、 ［**Commerce**］ タブをクリックして、 ［**Channels**］ に移動します。

1. 設定したい **チャネル** をクリックします。

1. ［**General**］ タブの ［**Tax Calculations**］ にスクロールダウンし、構成したい計算のタイプ（［**By Address**］ または ［**Fixed Tax Rate**］）を選択し ［**Edit**］ をクリックします。

    ![［税の計算］で、構成したい計算のタイプの［編集］をクリックします。](./setting-rates-for-tax-calculations/images/01.png)

1. ［**Details**］ タブで、選択した税計算の以下の詳細を設定します：

   * ［**Name**］ ：選択した税計算の表示名を決定します。

   * ［**Description**］ ：選択した税計算の説明を決定します。

   * ［**Percentage**］ ：トグルスイッチを使用して、選択した税計算が税率に **パーセント** を使用するかどうかを決定します。

   * ［**Active**］ ：トグルスイッチを使用して、選択した税計算を有効にまたは無効にします。

1. 完了したら、 ［**Save**］ をクリックします。

```{note}
別のタブに移動する前に、変更を保存する必要があります。 保存しないと、変更した内容は消えてしまいます。
```

![税計算を構成し、［保存］をクリックします。](./setting-rates-for-tax-calculations/images/02.png)

有効にすると、選択したタイプの税計算の追加設定にアクセスできます。

## 税率の設定

以下の手順に従って、税カテゴリーに税率を追加します：

1. **グローバルメニュー**(![Global Menu](../../images/icon-applications-menu.png))を開き、 ［**コマース**］ タブをクリックして、 ［**チャネル**］ に移動します。

1. 目的の **チャネル** をクリックします。

1. 新しい税率に使用する税計算エンジンの ［**編集**］ をクリックします。

1. モーダルウィンドウの ［**税率**］ / ［**Tax Rate Settings**］ タブをクリックします。

   ![［税率設定］タブをクリックします。](./setting-rates-for-tax-calculations/images/03.png)

1. (**住所別**) 購入者の **請求先** または **出荷先** の住所に税率を適用するかどうかは、ドロップダウンメニューで決定します。

1. **追加** ボタン（![Add Button](../../images/icon-add.png)）をクリックして新しい税率を追加します。

1. 税率を設定するための **税カテゴリー** を選択します。

1. 税率の値を入力します。

1. （**住所別**）地理的な詳細を入力して、税率の適用範囲を決定します。

   国の税率を指定するには、 **地域** および **郵便番号** を空白のままにします。地域の税率を指定するには、 **郵便番号** を空白のままにします。

1. ［**Submit**］ をクリックします 。

   ![税率を設定し、［送信］をクリックします。](./setting-rates-for-tax-calculations/images/04.png)

## Commerce 2.1以前

1. ［**コントロールパネル**］ → ［**コマース**］ → ［**チャネル**］ に移動します。
1. 税率を設定するチャネルをクリックします。 Miniumなどのアクセラレータを使用した場合、デフォルトでチャネルが作成されます。
1. **税計算** までスクロールします。
1. ［アドレス別］の横にある ［**編集**］ をクリックします。
1. **パーセント** および **有効** トグルを **はい** にスライドします 。
1. ［**Save**］ をクリックします。

次に、カテゴリ別および住所別に税率を設定します。

1. ［**税率設定**］ をクリックします。
1. 課税住所地が請求先住所か配送先住所かを、 ［**税を適用**］ ドロップダウンメニューから選択します。
1. 追加（![Add icon](../../images/icon-add.png)）ボタンをクリックして、税カテゴリを追加します。
1. ［税カテゴリ］を選択します（たとえば、 **Holiday Special**）。
1. 次のように入力します：

    * **レート** ：税率
    * **国** ：該当する国
    * **地域** ：空白のままにして、国全体に適用します
    * **郵便番号** ：国全体に適用するには空白のままにします

1. ［**送信**］ をクリックします 。

住所固有の税率が設定されました。

## Commerce 2.0以前

住所別に税率を設定するには：

1. ［**サイト管理**］ → ［**コマース**］ → ［**設定**］ に進みます。
1. ［**税金**］ タブをクリックしてから、 ［**税の計算**］ サブタブをクリックします。
1. ［**住所別**］ をクリックします。
1. 税を購入価格の割合として定義する場合は、 ［**パーセント**］ トグルを ［**はい**］ に切り替えます。 税金を固定金額として定義するには、トグルを無効のままにします。
1. **有効** トグルを **はい** に切り替えます。
1. ［**保存**］ をクリックします。

次に、カテゴリ別および住所別に税率を設定します。

1. ［**税率設定**］ サブタブをクリックしてから、 ［**税率設定を追加**］ ボタンをクリックします。
1. ［**税カテゴリー**］ フィールドから ［**税カテゴリー**］ を選択します。
1. ［**レート**］ フィールドに税率を入力します。
1. 国、地域を選択し、郵便番号を入力します。
1. ［**保存**］ をクリックします。

住所固有の税率が設定されました。

## 追加情報

* [税カテゴリーの作成](../configuring-taxes/creating-tax-categories.md)
