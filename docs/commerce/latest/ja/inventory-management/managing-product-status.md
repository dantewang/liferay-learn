# 製品ステータスの管理

商品を編集する際、公開終了をスケジュールしたり、手動で未公開にしてストアカタログから削除することができます。

## 商品の有効期限の設定

商品または個々のSKUに有効期限を設定します。 期限が切れると、その商品SKUはストアカタログから削除され、購入できなくなり、検索結果にも表示されなくなります。

```{note}
商品レベルで有効期限を設定すると、その商品のすべてのSKUに適用されます。 
```

次の手順を実行します：

1. **グローバルメニュー**(![Global Menu](../images/icon-applications-menu.png))を開き、 ［**コマース**］ &rarr; ［**製品**］ に移動します。

1. 商品をクリックします。

1. ［Schedule］下の ［**Never Expire**］ のチェックボックスをオフにします。 この設定は、商品のすべてのSKUに影響します。

1. 有効期限の日時を入力します。

   ![商品の有効期限を設定します。](./managing-product-status/images/01.png)

   ```{tip}
   有効期限と日時はLiferayインスタンスのタイムゾーンに基づいています。タイムゾーンを表示または変更するには、*グローバルメニュー* (![グローバルメニュー](../images/icon-applications-menu.png)) を開いて *［コントロールパネル］* &rarr; *［インスタンス設定］* に移動します。 次に、*［ローカライズ］* &rarr; *［標準時］* に移動します。
   ```

1. ［**公開**］ をクリックします。

一度有効期限に達した商品は、Liferayの次のチェック間隔まで有効なままです。 デフォルトでは15分間隔ですが、システム設定で設定することができます。 **グローバルメニュー**(![Global Menu](../images/icon-applications-menu.png)) を開き、 ［**コントロールパネル**］ &rarr; ［**システム設定**］ に移動します。 ［**カタログ**］ &rarr; ［**製品**］ にアクセスします。 ［**チェック間隔**］ の値を変更し、 ［**保存**］ をクリックします。

```{warning}
この機能を無効にしたい場合は、 [blacklist](https://learn.liferay.com/web/guest/w/dxp/system-administration/installing-and-managing-apps/managing-apps/blacklisting-osgi-components.md) 。 インターバルにゼロや負の数を入力しないでください。
```

有効期限を過ぎると、その商品のSKUはストアのカタログに表示されなくなり、購入することができなくなります。 個々のSKUに代替品と一緒に有効期限を設定する方法については、 [代替製品](../pricing/promoting-products/replacement-products.md)をご覧ください。

![有効期限を過ぎると、商品のステータスが「期限切れ」になります。](./managing-product-status/images/02.png)

新しい有効期限を入力し、商品を再公開することで、商品の可視性を変更することができます。

## 商品をドラフトとして設定する

必要であれば、手動で商品を未公開にして、そのステータスを **ドラフト** に設定することができます。 ドラフト中は、その商品のSKUはストアのカタログに表示されなくなり、購入することはできません。 この機能は、変更した内容をすぐにエンドユーザーに公開せずに、商品を編集したい場合に有効です。 また、在庫数低下時のアクションを使用して、在庫レベルに基づいて商品を未公開にすることができます。 詳しくは [在庫数低下時のアクション](./low-stock-action.md) をご覧ください。

手動で商品を未公開にするには、次の手順に従います。

1. **グローバルメニュー**(![Global Menu](../images/icon-applications-menu.png))を開き、 ［**コマース**］ &rarr; ［**製品**］ に移動します。

1. 商品をクリックします。

1. ［Publish］ボタンの横にある **アクション** ボタン(![Actions Button](../images/icon-actions.png))をクリックし、 ［**Convert to Draft**］()を選択します。

   ![［下書きとして保存］を選択すると、商品が下書き状態に変換されます。](./managing-product-status/images/03.png)

1. ［**OK**］ をクリックして確認します。

これにより、ストアのカタログページから商品が削除され、お客様はその商品を表示、購入、検索することができなくなります。

![この商品は、変換後のステータスが「下書き」になっています。](./managing-product-status/images/04.png)

商品を公開するための許可ワークフローがある場合、再度商品を公開するためには、そのワークフローを経由する必要があります。 商品をストアフロントから削除し、許可ワークフローを経ずに再び公開したい場合は、 ［**Published**］ のチェックボックスをオフにして、 ［**公開**］ をクリックします。

![公開済みチェックボックスをオフにすると、ストアフロントから製品が削除されます。](./managing-product-status/images/05.png)

## Commerce 2.1以前

### 商品を期限切れに設定する

商品の有効期限を設定するには、

1. ［**コントロールパネル**］ &rarr; ［**コマース**］ &rarr; ［**製品**］ に移動します。

1. 商品をクリックします。

1. ［**Products Details**］ タブで ［**Never Expire**］ チェックボックスをオフにします。 この設定は、商品のすべてのSKUに影響します。

1. 将来の有効期限を入力します。 すべての時間はGMTタイムゾーンを使用して設定されます。

    ![商品の有効期限を設定します。](./managing-product-status/images/01.png)

1. ［**公開**］ をクリックします。

変更後、デフォルトのチェック間隔が15分であるため、カタログからの削除に時間がかかる場合があります。 **グローバルメニュー**(![Global Menu](../images/icon-applications-menu.png)) を開き、 ［**コントロールパネル**］ &rarr; ［**システム設定**］ に移動することでこれを変更できます。 そこで、 ［**カタログ**］ &rarr; ［**製品**］ にアクセスします。 ［**チェック間隔**］ の値を変更し、 ［**保存**］ をクリックします。

![有効期限を過ぎると、商品のステータスが「期限切れ」になります。](./managing-product-status/images/06.png)

新しい有効期限を入力し、商品を再公開することで、商品の可視性を変更することができます。

### 商品をドラフトとして設定する

1. ［**コントロールパネル**］ &rarr; ［**コマース**］ &rarr; ［**商品**］ に移動します。

1. 商品をクリックします。

1. ［**下書きとして保存**］ をクリックします。

ドラフト状態にした後は、商品の検索やストアフロントでの表示はできません。

![この商品は、変換後のステータスが「下書き」になっています。](./managing-product-status/images/04.png)

商品を公開するための許可ワークフローがある場合、再度商品を公開するためには、そのワークフローを経由する必要があります。 商品をストアフロントから削除し、許可ワークフローを経ずに再び公開したい場合は、 ［**Published**］ のチェックボックスをオフにして、 ［**公開**］ をクリックします。

![公開済みチェックボックスをオフにすると、ストアフロントから製品が削除されます。](./managing-product-status/images/05.png)

## 関連トピック

* [チャネルを使用した商品の可視性の構成](../store-management/channels/configuring-product-visibility-using-channels.md)
* [シンプル商品の作成](../product-management/creating-and-managing-products/product-types/creating-a-simple-product.md)
* [グループ商品の作成](../product-management/creating-and-managing-products/product-types/creating-a-grouped-product.md)
* [仮想商品の作成](../product-management/creating-and-managing-products/product-types/creating-a-virtual-product.md)
* [在庫数低下時のアクション](./low-stock-action.md)
