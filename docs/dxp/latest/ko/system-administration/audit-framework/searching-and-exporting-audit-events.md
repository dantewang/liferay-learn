# 감사 이벤트 검색 및 내보내기

감사 애플리케이션은 간단한 검색 기능과 고급 검색 기능을 제공합니다. 간편 검색을 사용하려면 검색어를 입력하고 돋보기 아이콘을 클릭하면 됩니다. 고급 검색을 사용하려면,

1. 검색 아이콘 옆의 아래쪽 화살표를 클릭합니다.

1. 검색 필드에 데이터를 입력합니다.

   | 분야                                                       | 묘사                                                                                     |
   |:-------------------------------------------------------- |:-------------------------------------------------------------------------------------- |
   | 성냥                                                       | 지정한 모든 필드 또는 단일 필드와 일치하는 항목을 검색합니다.                                                    |
   | 사용자 아이디                                                  | 검색할 사용자 ID입니다. 일반적으로 감사하려는 작업을 수행한 사용자입니다.                                             |
   | 그룹 ID {bdg-secondary}`사용 가능한 Liferay DXP 7.4 U81+/GA81+` | 사용 가능한 경우 감사 이벤트의 사이트 컨텍스트를 표시하는 그룹 ID입니다.                                             |
   | 사용자 이름                                                   | 검색할 사용자 이름입니다. 특히 사용자 아이디가 포함된 데이터베이스에 액세스할 수 없는 경우에는 사용자 아이디를 검색하는 것보다 더 쉬운 경우가 많습니다. |
   | 자원 아이디                                                   | 이 감사 기록에서 수정되거나 조회된 리소스의 ID입니다.                                                        |
   | 클래스 이름                                                   | 이 감사 기록에서 수정되거나 조회된 리소스의 이름입니다. 예를 들어 사용자 리소스를 검색하여 누군가 사용자의 계정을 수정했는지 확인할 수 있습니다.     |
   | 리소스 작업                                                   | 리소스에서 수행된 작업 중 하나: 추가, 할당, 삭제, 가장, 로그인, 로그인_실패, 로그아웃, 할당 취소 또는 업데이트.                   |
   | 개회 식별                                                    | 검색할 세션 ID입니다. 이를 사용하여 웹 서버 로그의 세션 ID를 Liferay DXP의 활동과 연관시킬 수 있습니다.                    |
   | 클라이언트 IP                                                 | 감사하려는 활동을 수행한 클라이언트의 IP 주소입니다.                                                         |
   | 클라이언트 호스트                                                | 감사하려는 활동을 수행한 클라이언트의 호스트 이름입니다.                                                        |
   | 서버 이름                                                    | 활동이 발생한 서버의 이름입니다. 클러스터를 사용하는 경우 클러스터의 각 구성원을 개별적으로 쿼리할 수 있습니다.                        |
   | 서버 항구                                                    | 활동이 발생한 서버 포트입니다. 동일한 머신에서 여러 가상 머신의 수직 클러스터를 실행하는 경우 이 기능이 필요합니다.                     |
   | 시작 날짜                                                    | 검색하려는 날짜 범위의 하단입니다.                                                                    |
   | 최후 날짜                                                    | 검색하려는 날짜 범위의 최상단입니다.                                                                   |

1. 돋보기 아이콘을 클릭합니다.

## 감사 이벤트 보기

특정 감사 이벤트를 찾은 후 해당 이벤트를 클릭하면 자세한 정보를 확인할 수 있습니다. 각 이벤트는 다음 필드를 강조 표시합니다:

* 이벤트 ID
* 날짜 생성
* 그룹 ID
* 자원 아이디
* 리소스 이름
* 리소스 작업
* 사용자 아이디
* 사용자 이름
* 클라이언트 호스트
* 클라이언트 IP
* 서버 이름
* 추가 정보

`추가 정보` 리소스 작업 중에 엔티티와 관련된 데이터를 강조 표시합니다. 예를 들어, 사용자는 생성 시 기본적으로 활성화되어 있습니다. 다음은 사용자를 비활성화할 때 발생하는 감사 이벤트의 추가 정보입니다.

```json
{"attributes":[{"newValue":"false","name":"active","oldValue":"true"}]}
```

`이름` 필드에 변경된 속성이 표시됩니다. `oldValue` 필드는 업데이트 전의 필드 값을 표시하고 `newValue` 필드는 업데이트 후의 필드 값을 표시합니다.

## 감사 이벤트 내보내기

{bdg-secondary}`사용 가능한 Liferay DXP 7.4 U81+/GA81+`

타사 시스템에서 감사 이벤트를 분석하기 위해 Liferay는 감사 이벤트를 CSV로 내보낼 수 있도록 지원합니다. 이렇게 하려면 글로벌 메뉴를 열고 **제어판** &rarr; **감사** 로 이동합니다. 페이지 상단의 **작업**(![Actions](../../images/icon-actions.png)) 아이콘을 클릭하고 **감사 이벤트 내보내기** 를 선택합니다.

이렇게 하면 Liferay 인스턴스에서 모든 감사 이벤트가 내보내집니다. 하위 집합을 내보내려면 간편 검색 또는 고급 검색을 사용하여 결과 집합을 가져온 다음 내보내기 기능을 사용하면 됩니다. 예를 들어 특정 사용자에 대한 `로그인` 이벤트만 보려는 경우입니다,

1. 검색창에 `로그인` 을 입력하고 돋보기 아이콘을 클릭합니다.

1. 페이지 상단의 **작업**(![Actions](../../images/icon-actions.png)) 아이콘을 클릭합니다.

   ![사용자 로그인에 대한 감사 이벤트를 CSV로 내보내기.](./searching-and-exporting-audits-events/images/01.png)

1. **감사 이벤트 내보내기** 를 선택합니다.

![CSV 파일에는 Liferay에서 감사한 로그인 이벤트와 관련된 모든 정보가 포함되어 있습니다.](./searching-and-exporting-audits-events/images/02.png)

`CSV 로깅 메시지 서식` 구성을 변경하여 CSV 파일로 내보낸 열을 편집할 수 있습니다. 자세한 내용은 [CSV 로깅 메시지 서식](./audit-configuration-reference.md#csv-logging-message-formatter) 을 참조하세요.

```{warning}
CSV 내보내기에는 사용자가 제공한 입력이 포함되어 있습니다. 스프레드시트 프로그램에서 열 때는 주의하세요. 
```

```{important}
CSV로 내보내기 기능은 현재 릴리즈 기능 플래그 뒤에 있습니다. 이 기능을 사용하려면 `feature.flag.LPS-177194=true`를 `portal-ext.properties` 또는 `LIFERAY_FEATURE_PERIOD_FLAG_PERIOD__UPPERCASEL__UPPERCASEP__UPPERCASES__MINUS__NUMBER1__NUMBER7__NUMBER1__NUMBER9__NUMBER4_=true`에 환경 변수로 추가해 구성에 설정합니다.
```

## 관련 주제

* [감사 구성 참조](./audit-configuration-reference.md)