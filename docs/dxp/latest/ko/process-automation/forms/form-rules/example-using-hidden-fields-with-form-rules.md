# 예: 양식 규칙과 함께 숨겨진 필드 사용

고급 구성 탭에서 양식 필드를 숨김으로 구성합니다.

![고급 설정을 사용하여 필드를 숨깁니다.](./example-using-hidden-fields-with-form-rules/images/06.png)

이 양식에는 숨겨진 필드가 있습니다. 사이트의 ID 번호를 보유하므로 데이터 공급자에게 입력 값으로 전달할 수 있습니다.

![양식에는 데이터 공급자에게 정보를 전달하는 데 사용되는 숨겨진 필드가 포함되어 있습니다.](./example-using-hidden-fields-with-form-rules/images/05.gif)

예제를 따르려면 먼저 데이터 공급자 시스템 설정 항목에서 로컬 네트워크 액세스를 활성화해야 합니다. 자세한 내용은 [로컬 네트워크의 데이터에 대한 액세스 활성화](../data-providers/using-the-rest-data-provider-to-populate-form-options.md#enabling-access-to-data-on-the-local-network) 을 참조하십시오.

이 예제에서는 두 개의 데이터 공급자와 네 개의 필드와 세 개의 양식 규칙이 있는 양식을 만들어야 합니다. 아래 표에는 요소 요약이 포함되어 있습니다.

| Liferay 양식 요소 | 요소 레이블        | 묘사                                                                                                                             |
|:------------- |:------------- |:------------------------------------------------------------------------------------------------------------------------------ |
| 데이터 공급자       | 그룹 사용자 가져오기   | 사이트/그룹의 사용자를 확인하고 이메일 주소 목록을 제공하십시오.                                                                                           |
| 데이터 공급자       | 이메일로 사용자 가져오기 | 선택한 이메일 주소로 사용자를 확인하고 이름과 성을 제공하십시오.                                                                                           |
| 양식 필드         | 숨겨진 그룹 ID     | 숨겨진 숫자 필드를 사용하여 현재 사이트의 그룹 ID를 보관하십시오.                                                                                         |
| 양식 필드         | 누구세요?         | 데이터 공급자가 반환한 이메일 주소를 표시하는 목록에서 선택 필드를 사용합니다.                                                                                   |
| 양식 필드         | 이름            | 사용자의 이름에 텍스트 필드를 사용하십시오.                                                                                                       |
| 양식 필드         | 성             | 사용자의 성에 대한 텍스트 필드를 사용하십시오.                                                                                                     |
| 양식 규칙         | **해당 없음** | 숨겨진 그룹 ID 필드가 비어 있지 않으면 사이트 사용자의 이메일 주소로 목록에서 선택 필드를 자동으로 채웁니다.                                                                |
| 양식 규칙         | **해당 없음** | **누구세요?** 필드가 비어 있지 않으면 데이터 공급자에서 검색한 이름 및 성 필드를 자동으로 채웁니다.                                                                      |
| 양식 규칙         | **해당 없음** | **누구세요?** 필드가 비어 있으면 사용자가 수동으로 데이터를 입력할 수 있도록 이름 필드를 활성화하십시오. 조건이 충족되지 않고 이름 및 성 필드가 데이터 공급자에서 자동으로 채워진 경우 이러한 필드는 양식에서 비활성화됩니다. |

이 예를 구성하려면

1. 다음 설정으로 데이터 공급자를 구성합니다.
    - 이름: **그룹 사용자 가져오기**
    - URL: **http://localhost:8080/api/jsonws/user/get-group-users/group-id/{groupId}**

        `groupId` 은 데이터 공급자에게 입력 매개변수로 전달됩니다. 이 예에서는 숨겨진 양식 필드를 사용하여 그룹 ID를 제공합니다.

    - 사용자 이름: **test@liferay.com**(또는 관리자의 이메일 주소)
    - 비밀번호: [**사용자 비밀번호 입력**]
    - 입력:
        - 레이블: **그룹 ID**
        - 매개변수: **그룹 ID**
        - 유형: **숫자**
    - 출력:
        - 레이블: **이메일 주소**
        - 경로: **$..emailAddress**
        - 유형: **목록**

    데이터 공급자를 저장합니다.

1. 다음 설정으로 다른 데이터 공급자를 구성합니다.
    - 이름: **이메일로 사용자 가져오기**
    - URL: **http://localhost:8080/api/jsonws/user/get-user-by-email-address/company-id/20099/email-address/{emailAddress}**

        Liferay 인스턴스의 ID(예: 20099)를 검색해야 합니다. 제어판 &rarr; 가상 인스턴스에 표시되는 인스턴스 ID입니다.

    - 사용자 이름: **test@liferay.com**(또는 관리자의 이메일 주소)
    - 비밀번호: [**사용자 비밀번호 입력**]
    - 입력:
        - 레이블: **이메일 주소**
        - 매개변수: **이메일 주소**
        - 유형: **텍스트**
    - 출력:
        - 레이블: **이름**
        - 경로: **$.firstName**
        - 유형: **텍스트**

    더하기 기호를 클릭하여 다른 출력을 추가합니다.
    - 출력:
        - 레이블: **성**
        - 경로: **$.lastName**
        - 유형: **텍스트**

    데이터 공급자를 저장합니다.

1. 새 양식을 만들고 다음 필드를 추가합니다.
    - 숫자 필드: **숨겨진 그룹 ID**
        - 미리 정의된 값: [**사이트 ID, 예: 20123**]

            사이트 설정 &rarr; 사이트 구성에서 사이트 ID 찾기
    - 목록 필드에서 선택: **당신은 누구입니까?**
        - 목록 만들기: **자동완성** 에서
    - 텍스트 필드: **이름**
    - 텍스트 필드: **성**

    양식에 제목을 지정하고 저장합니다.

    ![양식에는 네 개의 필드가 있습니다.](./example-using-hidden-fields-with-form-rules/images/01.png)

1. 양식의 규칙 탭으로 이동하여 **Who are You?** 필드의 옵션 목록:
    - 질환:
        - **인 경우 숨겨진 그룹 ID** `비어 있지 않음`
    - 행동:
        - 수행 `자동 채우기` 데이터 공급자로부터 **그룹 사용자 가져오기**
            - 데이터 제공자의 입력: `groupId` &rarr; **숨겨진 그룹 ID**
            - 데이터 제공자의 출력: `이메일 주소` &rarr; **당신은 누구입니까?**

    규칙을 저장합니다.

    ![사이트 사용자의 이메일 주소로 필드를 자동으로 채웁니다.](./example-using-hidden-fields-with-form-rules/images/02.png)

1. 양식의 규칙 탭으로 이동하여 **Who are You?** 필드의 옵션 목록:
    - 질환:
        - **인 경우 당신은 누구입니까?** `비어 있지 않음`
    - 행동:
        - 수행 `자동 채우기` 데이터 제공자로부터 **이메일로 사용자 가져오기**
            - 데이터 제공자의 입력: `emailAddress` &rarr; **당신은 누구입니까?**
            - 데이터 공급자의 출력: `이름` &rarr; **이름**
            - 데이터 공급자의 출력: `성` &rarr; **성**

    규칙을 저장합니다.

    ![선택한 이메일 주소에서 이름 필드를 자동으로 채웁니다.](./example-using-hidden-fields-with-form-rules/images/03.png)

1. 양식의 규칙 탭으로 이동하여 이메일 주소가 선택되지 않은 경우에만 이름 필드를 활성화하는 규칙을 만듭니다.
    - 질환:
        - **인 경우 당신은 누구입니까?** `비어 있음`
    - 행동:
        - 해야 할 일 `활성화` **이름**
        - 해야 할 일 `활성화` **성**

    규칙을 저장합니다.

    ![이메일을 선택하지 않으면 사용자 입력을 위해 이름 필드가 활성화됩니다.](./example-using-hidden-fields-with-form-rules/images/04.png)

1. 양식을 저장하고 게시합니다. 규칙을 저장해도 양식이 저장되지 않으므로 양식 탭으로 돌아가서 양식이 아직 게시되지 않은 경우 **저장** 및 **게시** 을 클릭해야 합니다.


양식을 테스트하려면 전용 URL로 이동하여 이메일 주소를 선택하십시오. 다음 동작에 유의하십시오.

- 당신은 **입니까? 현재 사이트에 속한 사용자 목록에서 이메일 주소를 선택하는** 필드. 이 목록은 JSON 웹 서비스 **get-group-users** 을 호출하는 데이터 공급자에 의해 채워집니다.
- 선택기에서 이메일 주소를 선택하면 이름 및 성 필드가 자동으로 채워지고 이러한 필드는 편집할 수 없도록 비활성화됩니다.
- **을 떠나 당신은 누구입니까?** 필드 공백(예: **옵션 선택** 이 표시됨)은 사용자가 데이터를 직접 입력할 수 있도록 두 이름 필드를 모두 활성화합니다.

## 관련 내용

- [양식 게시](../creating-and-managing-forms/creating-forms.md#publishing-a-form)
- [데이터 공급자 개요](../data-providers/data-providers-overview.md)
- [자동 채우기 규칙 사용](./using-the-autofill-rule.md)
- [양식 필드 유형 참조](../creating-and-managing-forms/forms-field-types-reference.md)
