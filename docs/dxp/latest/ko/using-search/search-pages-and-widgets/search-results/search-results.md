# 수입 카테고리 탐색

검색 결과는 탐색, 정렬 및 필터링이 쉬워야 합니다. 기본 검색 환경과 마음대로 사용할 수 있는 다양한 구성 옵션을 이해하여 사용자에게 최적의 검색 환경을 제공하세요.

여러 요인이 검색 결과에 영향을 미칩니다.

* 자산이 인덱싱되는 방법
* 사용된 검색 위젯
* 결과 후처리 여부

![검색의 목표: 사이트에서 콘텐츠를 검색하는 사용자에게 완벽한 결과를 제공합니다.](./search-results/images/01.png)

콘텐츠 유형(Liferay DXP의 자산 **개**) 개발자는 자산 정보가 인덱싱되는 방법과 해당 정보가 검색되고 검색 결과에 반환되는 방법에 대해 많은 부분을 제어합니다. 추가 제어를 위해 **인덱서 포스트 프로세서** 은 자산의 인덱싱 동작과 자산을 조회하기 위해 검색 쿼리가 구성되는 방식을 수정할 수 있습니다.

하지만 [검색 구성](../../search-administration-and-tuning.md)에서 수행하는 거의 모든 작업은 검색 결과, 특히 [동의어 집합](../../search-administration-and-tuning.md) 및 [결과 순위](../../search-administration-and-tuning.md).

설정을 변경하기 전에 아래 개념을 반드시 이해해야 합니다.

## 패싯으로 결과 필터링

결과는 **패싯** 사용하여 필터링됩니다. 대부분의 사용자는 특히 상거래 활동 중에 다른 애플리케이션에서 유사한 필터링 기능을 경험했습니다. 사용자는 검색어를 입력하고 결과 목록이 표시되며 검색 패싯을 선택하면 결과가 구체화됩니다. 패싯은 특성을 공유하는 결과 버킷으로 생각할 수 있습니다.

![Type 패싯은 기본적으로 제공되는 패싯 중 하나입니다.](./search-results/images/02.png)

패싯을 구성할 수 있습니다. 자세한 내용은 [패싯](../search-facets.md) 구성에 대해 읽어보십시오.

## 검색 결과 관련성

검색 엔진은 **관련성** 에 따라 결과를 처리하고 정렬합니다. 관련성은 검색 엔진에서 계산한 점수입니다. 점수는 [검색 엔진에서 제공하는 알고리즘](https://www.elastic.co/guide/en/elasticsearch/guide/master/relevance-intro.html#relevance-intro) 으로 계산됩니다.

결과 관련성을 구성할 수 있습니다.

* [검색 조정은 순위를 사용자 지정하는 무차별 대입 방식입니다](../../search-administration-and-tuning.md).
* [Liferay Enterprise Search의 Learning to Rank 기능은 더 관련성 높은 결과를 반환하도록 훈련할 수 있는 기계 학습 모델입니다.](./../../liferay-enterprise-search.md)
* [검색 인사이트 위젯은 관련성 점수를 표시하여 결과가 특정 사이트에 나타나는 이유를 보여줍니다.](../../search-administration-and-tuning.md)
* [인덱싱된 필드별로 결과를 정렬하여 관련성 점수를 재정의합니다](./sorting-search-results.md).

## 권한 및 검색 결과

자산을 볼 수 있는 [권한](../../../users-and-permissions/roles-and-permissions/understanding-roles-and-permissions.md) 없는 사용자에 대해서는 검색 결과가 나타나지 않습니다. 사이트 관리자 역할로 로그인한 사용자는 익명의 손님보다 더 많은 검색 결과를 볼 수 있습니다.

권한 확인에는 두 가지 라운드가 있습니다.

* **사전 필터링** 검색 엔진의 인덱스에서 발생합니다. 데이터베이스 권한 정보를 확인하는 것보다 빠르지만 때때로 검색 인덱스에 오래된 권한 정보가 있을 수 있습니다.

* **사후 필터링** 검색 엔진의 색인에 올바른 최신 권한 정보가 있는지 확인하기 위해 표시되기 전에 결과에서 발생합니다.

### 사전 필터링

사전 필터링은 검색 쿼리에 필터 절을 추가하므로 현재 사용자가 볼 수 있는 결과가 검색에 포함됩니다.

**제어판** &rarr; **구성** &rarr; **시스템 설정** &rarr; **검색** &rarr; **권한 검사기** 에서 쿼리에 추가되는 검색 절의 수를 제어하여 사전 필터링을 구성할 수 있습니다.

**권한 기간 제한:** 이 수준의 권한 검사가 중단되기 전에 검색 쿼리에 추가되는 권한 검색 절의 수를 제한합니다. 그런 다음 권한 확인은 아래에 설명된 최종 권한 필터링에만 의존합니다.

권한 조건을 제한하는 유일한 이유는 성능입니다. 많은 사이트 및 조직에 대한 관리 액세스 권한이 있는 사용자는 쿼리에 추가된 많은 권한 용어를 생성합니다. 쿼리에 너무 많은 용어가 있으면 검색 엔진이 시간 초과될 수 있습니다.

### 사후 필터링

사후 필터링은 UI에 결과를 표시하기 전에 발생합니다. 예를 들어 사용자가 **liferay** 을 검색하면 검색 엔진은 모든 관련 포럼 게시물을 반환합니다. 검색 결과가 이 목록을 반복하면서 사용자가 게시물과 해당 범주를 볼 수 있도록 각 게시물의 마지막 권한 확인을 수행합니다. 사용자가 게시물을 볼 수 있는 권한이 없으면 검색 결과 목록에 표시되지 않습니다.

사후 필터링은 **제어판** &rarr; **구성** &rarr; **시스템 설정** &rarr; **검색** &rarr; **기본 검색 결과 권한 필터** 에서 구성할 수 있습니다. 여기에는 두 가지 설정이 포함됩니다.

**권한 필터링된 검색 결과 정확한 개수 임계값:** 결과가 계산되기 전에 권한 필터에 대한 최대 검색 결과 수를 지정합니다. 임계값이 높을수록 카운트 정확도는 높아지지만 성능은 저하됩니다. 현재 표시된 페이지의 결과는 항상 확인되므로 검색 결과 페이지 매김 델타 아래의 모든 값은 이 동작을 효과적으로 비활성화합니다.

**검색 쿼리 결과 창 제한:** 각 권한 확인 요청에 대한 최대 배치 크기를 설정합니다. 이는 페이지 매김의 영향을 받습니다. 페이지당 100개의 결과가 있고 검색 결과의 200페이지까지 이동하는 경우 1페이지에서 200페이지 사이의 모든 결과를 확인하여 권한이 있는지 확인해야 합니다. 권한 확인 결과는 20,000개입니다. 검색 엔진에서 한 번의 이동으로 이 작업을 수행하면 성능 문제가 발생할 수 있습니다. 각 권한 확인 요청에 대한 최대 배치 크기를 설정합니다.

## 검색 및 스테이징

[스테이징](./../../../site-building/site-settings.md)사용하면 콘텐츠가 라이브 사이트에 게시되기 전에 먼저 미리 보기 및 테스트 환경에 배치됩니다. 인덱싱된 콘텐츠는 항목이 라이브인지 여부를 검색 API가 알 수 있도록 표시됩니다. 사이트의 라이브 버전에서는 라이브 인덱싱된 콘텐츠만 검색할 수 있습니다.

사이트의 단계적 버전에서는 모든 콘텐츠(라이브 또는 단계적)를 검색할 수 있습니다.

## 결과 요약

결과 요약은 원래 자산의 정보를 요약으로 압축합니다. 자산 개발자는 요약에 포함할 필드를 선택합니다. 일반적인 요약에는 **제목** 과 **콘텐츠** 중 일부가 포함되며 제목이 먼저 표시됩니다. 자산 유형은 항상 두 번째 줄에 표시되고 그 뒤에 검색어와 일치하는 콘텐츠 스니펫이 표시됩니다. 문서 및 미디어 문서와 같이 콘텐츠 필드가 없는 자산은 대신 설명을 표시합니다.

```{note}
사용자 검색: 검색 결과에서 자산을 클릭하면 [Asset Publisher](../../../site-building/displaying-content/using-the-asset-publisher-widget.md) (검색 결과 위젯에서 *컨텍스트 보기* 옵션이 선택되지 않은 경우). 하지만 사용자는 다릅니다. 이를 Asset Publisher 응용 프로그램에 표시하기 위한 것이 아니라 보이지 않는 자산으로 생각하십시오.  사용자가 다른 인덱스 자산과 함께 검색 결과로 표시되는 동안 하나를 클릭하면 사용자의 프로필 페이지로 이동합니다. 공용 개인 페이지가 비활성화된 경우 검색 결과 목록에서 사용자를 클릭하면 빈 페이지가 표시됩니다. 사용자 결과 요약에는 사용자의 전체 이름과 자산 유형(사용자)만 나타납니다.
```

![사용자 요약에는 사용자의 전체 이름만 포함됩니다.](./search-results/images/03.png)

다른 자산(웹 콘텐츠 및 문서 & 미디어 폴더)을 포함하거나 해당 콘텐츠를 표시할 수 없는 자산(동적 데이터 목록 레코드 및 일정 이벤트)의 경우 결과 요약에 제목, 자산 유형 및 설명을 표시하는 것이 더 합리적입니다.

![문서, 미디어 및 웹 콘텐츠 폴더에는 요약에 제목과 설명이 포함되어 있습니다.](./search-results/images/04.png)

자산 개발자는 요약이 활성화된 필드를 결정하지만 검색 시 호출된 논리는 표시할 요약 필드의 일부를 정확하게 결정합니다. 예를 들어 `콘텐츠` 필드에는 많은 텍스트가 있을 수 있지만 요약에는 키워드가 포함된 필드 텍스트의 관련 스니펫만 표시되고 강조 표시됩니다.

## 하이라이트

요약에 나타나는 검색어는 기본적으로 <mark>강조 표시</mark> 입니다. 이것이 바람직하지 않은 경우 [위젯 구성 화면](./configuring-the-search-results-widget.md)에서 비활성화하십시오.

![검색 용어가 요약에 나타나는 텍스트와 일치하는 경우 일부 문서 요약에는 많은 강조 표시가 있습니다.](./search-results/images/05.png)

강조 표시는 결과가 반환되는 이유를 암시하는 유용한 시각적 단서이지만 주의: 요약에서 강조 표시 없이 높은 점수의 히트가 결과 상단에 나타날 수 있습니다. 모든 인덱싱된 필드가 요약에 나타나지 않기 때문입니다. Arthur C. Clarke라는 사용자를 생각해 보십시오. 검색 가능한 이메일 주소는 **acc@authors.org** 입니다. 사용자 결과 요약에는 전체 이름만 포함되기 때문에 전자 메일 주소로 Mr. Clarke를 검색하면 사용자가 반환되지만 용어는 강조 표시되지 않습니다.

![검색어와 일치하는 결과가 항상 강조표시되는 것은 아닙니다.](./search-results/images/06.png)

검색 결과에 강조 표시가 없는 경우가 더 있을 수 있습니다.
