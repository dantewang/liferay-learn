# 분류 페이셋

카테고리 패싯은 검색어 키워드와 일치하는 분류된 자산에 대한 검색 결과를 좁힙니다. 일치하는 각 결과의 카테고리는 패싯 용어로 집계됩니다.

![Example of category facet results.](./category-facet/images/02.png)

## 카테고리 패싯 구성

카테고리 패싯을 구성하려면 패싯의 _옵션_ 메뉴(![옵션](../../../images/icon-app-options.png))를 열고 _구성_을 클릭하세요.

![Click the Configuration option.](./category-facet/images/03.png)

디스플레이 설정이 먼저 나타납니다.

**표시 템플릿:** _기본값_, _클라우드 레이아웃_, _간소한 레이아웃_, _라벨 레이아웃_ 및 _어휘 레이아웃_ 중에서 선택합니다(7.4 업데이트/GA 48+에서 사용 가능). 기본 레이아웃에는 각 용어 옆에 확인란이 표시되지만 컴팩트 레이아웃에는 표시되지 않습니다. 레이블 레이아웃에는 각 용어에 대해 클릭 가능한 작은 레이블이 표시됩니다. [어휘 레이아웃](#display-facet-terms-categories-by-vocabulary) 은 어휘별로 정리된 패싯 용어(카테고리)를 보여줍니다.

고급 구성 섹션에는 다음과 같은 추가 옵션이 포함되어 있습니다.

**카테고리 매개변수 이름:** 패싯 URL의 매개변수 이름을 변경합니다. 기본값은 _범주_입니다.

```{important}
패싯 위젯 간에 AND 스타일 선택을 수행하려면 각 위젯에 대해 서로 다른 범주 매개변수 이름을 구성해야 합니다. 기본적으로 모든 Category Facet 위젯에는 이 필드가 _category_로 설정되어 있습니다. [아래 예](#example-creating-a-hierarchic-filtering-experience-in-the-category-facet-using-vocabularies)는 사용 사례를 보여줍니다.
```

**최대 용어:** 패싯에 대해 발견된 일치하는 용어 수에 관계없이 표시할 최대 패싯 용어 수를 설정합니다.

**빈도 임계값:** 용어가 패싯 용어 목록에 표시되는 데 필요한 최소 빈도를 설정합니다. 예를 들어 패싯의 빈도 임계값이 3으로 설정된 경우 두 개의 일치하는 결과가 있는 용어는 용어 결과 목록에 표시되지 않습니다.

**빈도 표시:** 용어 빈도를 표시할지 여부를 선택합니다.

**용어 정렬 기준:** Liferay 7.4 U56+/GA56+의 경우 용어 빈도 내림차순(기본값), 용어 빈도 오름차순, 용어 값 오름차순 또는 용어 값 내림차순 등 패싯 용어 정렬 전략을 선택할 수 있습니다. 기본 정렬 순서는 일치 항목이 많은 항목부터 일치 항목이 적은 항목 순으로 패싯을 지정합니다. 용어 값 옵션은 패싯 용어를 알파벳순으로 정렬합니다.

### 어휘별로 패싯 용어 표시 및 필터링

{bdg-secondary}`7.4 U48+ 및 GA48+`

기본적으로 Category Facet 위젯은 사이트의 모든 어휘에서 일치하는 결과의 카테고리를 수집하여 단순 목록에 표시합니다. 업데이트 48의 향상된 기능을 통해 새로운 표시 및 필터링 동작을 얻을 수 있습니다.

#### 어휘별로 패싯 용어(범주) 표시

Category Facet의 구성 화면에서 어휘 레이아웃을 선택하여 어휘 아래에 카테고리를 표시합니다.

![Categories are displayed under their vocabulary.](./category-facet/images/04.png)

#### 어휘별로 패싯 용어(범주) 필터링

패싯에 표시할 어휘와 카테고리를 선택하세요. 이를 활성화하려면 시스템 설정 &rarr; 검색 &rarr; 카테고리 패싯 필드의 구성을 기본 필드인 'assetCategoryIds'에서 'assetVocabularyCategoryIds' 필드로 전환하세요. 이 설정은 카테고리 패싯에서 집계를 생성하는 데 사용되는 필드를 지정합니다. 'assetVocabularyCategoryIds'를 설정하면 Category Facet 위젯의 구성 화면 내에서 어휘 설정이 활성화됩니다.

```{important}
Liferay 버전에서 업그레이드하거나 7.4 업데이트/GA 48 이전 업데이트를 수행하고 시스템에 이미 분류된 자산이 있는 경우 검색 문서에 필요한 `assetVocabularyCategoryIds` 필드를 포함하도록 모든 검색 색인을 다시 색인화하세요.
```

![Select the vocabulary.](./category-facet/images/06.png)

이 동작을 사용하면 강력한 검색 패싯 환경을 제공할 수 있습니다. 한 가지 사용 사례에 대해서는 아래 [아래 예](#example-creating-a-hierarchic-filtering-experience-in-the-category-facet-using-vocabularies) 예를 참조하세요.

## 예: 어휘를 사용하여 카테고리 패싯에서 계층적 필터링 경험 생성

자동차 부품 구매를 위한 상거래 포털을 고려해 보세요. 각 부분은 고유한 어휘로 분류된 상거래 제품입니다.

- 어휘: 차량 시스템

  분류:

  - 브레이크 시스템
  - 엔진
  - 배기 시스템
  - 보류
  - 전염
  - 터보차저

- 어휘: 품질

  분류:

  - 프리미엄
  - 기준

사용자가 엔진 및 배기 시스템을 선택하면 두 카테고리 중 하나와 일치하는 제품이 표시될 것으로 기대합니다. 그런 다음 품질 어휘에서 프리미엄 카테고리를 선택하면 결과가 엔진 및 배기 시스템용 프리미엄 자동차 부품으로 좁혀질 것으로 예상합니다. 이는 7.4 업데이트/GA 48부터 즉시 수행할 수 있습니다.

위의 사용 사례를 구성하려면

1. 글로벌 메뉴 &rarr; 제어판 &rarr; 사이트에서 새 사이트를 만듭니다. 메시지가 표시되면 Minium 사이트 템플릿을 선택합니다.

1. 사이트 이름을 Foo로 지정하고 _추가_를 클릭하세요.

1. 글로벌 사이트의 메뉴 &rarr; 분류 &rarr; 카테고리로 이동하세요. Quality라는 어휘를 추가하고 프리미엄과 표준이라는 두 가지 범주를 만듭니다.

   ```{important}
   Foo 사이트에서 사이트 카테고리를 생성하는 것이 아니라 글로벌 사이트에서 글로벌 카테고리를 생성해야 합니다.
   ```

   ```{note}
   사이트 초기화 중에 사이트 템플릿에 의해 생성된 기존 어휘가 있습니다(사이트 이름을 따서 Foo라고 함). 구축 중인 예와 일치하고 범주를 더 잘 특성화하기 위해 _Vehicle Systems_라는 이름을 지정하는 것이 좋습니다(예: 브레이크 시스템). 단, Foo 어휘의 카테고리는 기존 커머스 제품에서 참조하고 있기 때문에 편집이 불가능합니다. 
   ```

   ![Create a Quality vocabulary in the global site.](./category-facet/images/07.png)

1. 글로벌 메뉴 &rarr; 커머스 &rarr; 제품(제품 관리 섹션 아래)에서 기존 커머스 제품 중 일부를 분류합니다.

   프리미엄 카테고리를 추가하세요.

   - 프리미엄 브레이크액
   - 프리미엄 브레이크 패드

   다음과 같은 여러 추가 제품에 표준 카테고리를 추가합니다.

   - ABS 센서
   - 브레이크액
   - 마모 센서
   - 브레이크 패드
   - 브레이크 로터

   ![Categorize some existing products as Premium or Standard.](./category-facet/images/09.png)

1. Foo 사이트의 홈 페이지로 이동합니다. 기본적으로 Minium 사이트의 홈 페이지는 제품 카탈로그이며, 이는 본질적으로 빈 검색 허용이 활성화된 검색 페이지입니다.

   Category Facet 위젯을 살펴보세요. 두 어휘의 카테고리가 하나의 단순 목록에 표시됩니다. 여러 패싯 용어(예: 정지 및 표준)를 선택하면 페이지의 결과가 확장됩니다. 이는 패싯 용어 간의 OR 연산자 동작을 보여줍니다.

   ![The categories of all available vocabularies are aggregated.](./category-facet/images/08.png)

   페이지의 일부 위젯은 상거래 관련 위젯(예: 사양 패싯)이지만 카테고리 패싯은 표준 검색 위젯입니다.

1. 카테고리 패싯 위젯을 변경하여 `assetVocabularyCategoryIds` 필드를 사용하여 집계를 생성하세요. 시스템 설정 &rarr; 검색으로 이동하세요. 카테고리 패싯 필드 항목의 카테고리 패싯 필드 선택기에서 'assetVocabularyCategoryIds'를 선택하고 구성을 업데이트합니다.

1. Foo 사이트의 홈 페이지에 Foo 어휘의 카테고리만 표시하도록 구성된 Category Facet 위젯을 추가하세요.

   - 페이지 상단에 있는 _더하기 아이콘_을 클릭하세요(![Plus](../../../images/icon-plus.png)).
   - _Category Facet_ 위젯을 기존 위젯 바로 위나 아래로 드래그하세요.
   - _위젯 구성_ 화면(![앱 옵션](../../../images/icon-app-options.png))을 엽니다.
   - 표시 템플릿 선택기를 열고 _Vocabulary Layout_을 선택하세요.
   - 카테고리 매개변수 이름을 _foocategories_로 변경합니다.
   - _어휘 선택_ 라디오 버튼을 클릭하세요. _Global_을 확장하고 _Foo_를 선택하세요.
   - _저장_을 클릭하세요.

1. 유사한 절차를 사용하여 품질 어휘의 카테고리만 표시하고 어휘 레이아웃 템플릿을 사용하도록 원래 카테고리 패싯 위젯을 구성합니다. 새로운 Category Facet 위젯의 Category Parameter Name을 이미 변경했으므로 기존 위젯에 기본값을 그대로 둘 수 있습니다.

1. 페이지를 새로 고칩니다. Foo 어휘를 표시하는 카테고리 패싯 위젯에서 브레이크 시스템 및 서스펜션 카테고리를 선택하면 표시된 제품이 브레이크 시스템 또는 서스펜션 카테고리와 일치하는지 확인할 수 있습니다.

   품질 카테고리를 표시하는 카테고리 패싯에서 표준을 선택하면 브레이크 시스템 또는 서스펜션 및 표준으로 분류된 제품으로만 결과가 좁혀집니다.

![Configure hierarchic filtering in the Category Facet.](./category-facet/images/10.png)
