# 휴가 요청자 만들기

> 사용 가능: Liferay DXP/Portal 7.4+

Liferay Objects를 사용하면 코드를 작성하거나 모듈을 배포하지 않고도 전체 애플리케이션을 구축할 수 있습니다. 여기서는 Liferay [Objects](../../objects.md) 및 [Picklists](../picklists/using-picklists.md)을 사용하여 휴가 요청 애플리케이션을 생성합니다.

먼저 부서 값을 정의하기 위한 [선택 목록 추가](#adding-a-department-picklist)를 수행합니다. 그런 다음 [휴가 요청](#adding-a-time-off-request-object)용 객체와 [직원](#adding-an-employee-object)용 객체를 생성합니다. 이 프로세스 중에 이러한 개체를 서로 연결하고 휴가 요청 개체에 웹후크를 추가합니다. 마지막으로 [맞춤 레이아웃 디자인](#designing-custom-object-layouts)을 통해 관계 필드를 표시합니다.

```{note}
시스템 개체 확장에 대한 제한으로 인해 요청을 사용자 프로필과 연결하려면 직원 개체를 만들어야 합니다. 
```

![휴가 요청 애플리케이션을 작성하십시오.](./building-a-time-off-requester/images/01.png)

```{include} /_snippets/run-liferay-dxp.md
```

## 부서 선택 목록 추가

선택 목록은 회사 부서를 나타냅니다.

1. *전역 메뉴*(![전역 메뉴](../../../images/icon-applications-menu.png))를 열고 *제어판* 탭으로 이동한 다음 *선택 목록*을 클릭합니다. .

1. *추가* 버튼 클릭(![추가 버튼](../../../images/icon-add.png)), 이름에 *Department*를 입력하고 *저장*을 클릭합니다.

1. 새 *선택 목록*을 선택하고 *추가* 버튼(![추가 버튼](../../../images/icon-add.png))을 사용하여 여기에 항목을 추가합니다(예: 마케팅, 인적 자원, 영업).

    ![부서 선택 목록에 항목을 추가합니다.](./building-a-time-off-requester/images/02.png)

이제 선택 목록을 휴가 요청 개체의 필드로 사용할 수 있습니다.

## 휴가 요청 개체 추가

1. *Global Menu*(![Global Menu](../../../images/icon-applications-menu.png))를 열고 *Control Panel* 탭으로 이동한 다음 *Objects*를 클릭합니다. .

1. *추가* 버튼( ![추가 버튼](../../../images/icon-actions.png) )을 클릭하고 이 값을 입력합니다.

    | 필드 | 가치 |
    | :--- | :--- |
    | 레이블 | 휴가 요청 |
    | 복수 라벨 | 휴가 요청 |
    | 개체 이름 | TimeOffRequest |

1. *Object*를 선택하고 *Fields* 탭을 클릭한 다음 이 4개의 *fields*를 추가합니다.

    | 라벨 | 필드 이름 | 유형 | 선택 목록 | 필수 |
    | :--- | :--- | :--- | :--- | :--- |
    | 시작일 | `시작일` | 날짜 | 해당 없음 | &#10004; |
    | 종료일 | `종료일` | 날짜 | 해당 없음 | |
    | 부서 | `부서` | 선택 목록 | 부서 | &#10004; |
    | 댓글 | `댓글` | 텍스트 | 해당 없음 | |

    ![개체에 시작 날짜, 종료 날짜, 부서 및 설명 필드를 추가합니다.](./building-a-time-off-requester/images/03.png)

1. *작업* 탭을 클릭하고 이 작업을 추가합니다.

    | 필드 | 가치 |
    | :--- | :--- |
    | 액션 이름 | 생성 동기화 |
    | 언제 | 켜기 후 추가 |
    | 그런 다음 | 웹훅 |
    | URL | 앱 또는 https://webhook.site와 같은 사이트에서 테스트 웹훅 URL을 입력합니다. |

    이 작업은 휴가 요청 항목이 추가될 때마다 데이터를 외부 시스템으로 보냅니다. 자세한 내용은 [액션 정의](../creating-and-managing-objects/actions/defining-object-actions.md)를 참조하십시오.

    ![요청이 추가된 후 트리거되는 웹후크 작업을 생성합니다.](./building-a-time-off-requester/images/04.png)

1. *세부 정보* 탭을 클릭하고 다음 항목 표시 및 범위 설정을 지정합니다.

    | 필드 | 가치 |
    | :--- | :--- |
    | 제목 필드 | 시작일 |
    | 범위 | 회사 |
    | 패널 카테고리 키 | 애플리케이션 > 커뮤니케이션 |

1. *게시*를 클릭합니다. 이렇게 하면 개체가 활성화됩니다.

다음으로 Employee 개체를 만들고 휴가 요청 개체에 연결하여 요청 항목을 개별 사용자와 연결할 수 있습니다.

## 직원 개체 추가

1. *Global Menu*(![Global Menu](../../../images/icon-applications-menu.png))를 열고 *Control Panel* 탭으로 이동한 다음 *Objects*를 클릭합니다. .

1. *추가* 버튼( ![추가 버튼](../../../images/icon-actions.png) )을 클릭하고 이 값을 입력합니다.

    | 필드 | 가치 |
    | :--- | :--- |
    | 라벨 | 직원 |
    | 복수 레이블 | 직원 |
    | 개체 이름 | 직원 |

1. *Object*를 선택하고 *Fields* 탭을 클릭한 다음 이러한 *fields*를 추가합니다.

    | 레이블 | 필드명 | 유형 | 필수 |
    | :--- | :--- | :--- | :--- |
    | 이름 | `이름` | 텍스트 | &#10004; |
    | 이메일 | `이메일` | 텍스트 | &#10004; |

    ![객체에 이름 및 이메일 필드를 추가합니다.](./building-a-time-off-requester/images/05.png)

1. *관계* 탭을 클릭하고 이 관계를 추가합니다.

    | 필드 | 가치 |
    | :--- | :--- |
    | 라벨 | 요청자 |
    | 관계 이름 | 요청자 |
    | 유형 | 일대다 |
    | 개체 | TimeOffRequest |

    ```{참고}
    이 관계를 생성하면 외래 키 필드가 자동으로 휴가 요청 개체에 추가됩니다.
    ```

![휴가 요청 개체와 일대다 관계를 추가합니다.](./building-a-time-off-requester/images/06.png)

1. *세부 정보* 탭을 클릭하고 다음 항목 표시 및 범위 설정을 지정합니다.

   | 분야        | 가치        |
   |:--------- |:--------- |
   | 제목 필드     | 이름        |
   | 범위        | 회사        |
   | 패널 카테고리 키 | 제어판 > 사용자 |
  
1. *게시*을 클릭합니다.

게시되면 Liferay UI 또는 헤드리스 API를 통해 항목을 생성할 수 있습니다. 그러나 이러한 항목을 요청 항목과 연관시키려면 먼저 사용자 정의 레이아웃 [을 작성해야](#designing-custom-object-layouts).

## 사용자 정의 개체 레이아웃 디자인

개체 레이아웃은 개체 항목을 만들고 편집할 때 필드가 구성되는 방식을 결정합니다. 관계는 기본 개체 레이아웃에 표시되지 않으므로 관계 필드를 표시하려면 두 개체 모두에 대한 사용자 정의 레이아웃을 디자인해야 합니다.

### 휴가 요청

1. *개체* 애플리케이션으로 이동하고 *휴가 요청* 개체를 선택합니다.

1. *레이아웃* 탭을 클릭하고 *추가* 버튼( ![Add Button](../../../images/icon-actions.png) )을 클릭한 다음 이름에 *요청* 을 입력하고 *저장*을 클릭합니다.

1. 새 레이아웃을 선택하고 *기본* 로 표시 상자를 선택합니다.
   
   ![새 레이아웃을 추가하고 개체의 기본 레이아웃으로 표시합니다.](./building-a-time-off-requester/images/07.png)

1. *레이아웃* 탭을 클릭하고 2개의 *블록*가 있는 *탭* 을 추가합니다.

   | 요소 | 라벨    | 유형    |
   |:-- |:----- |:----- |
   | 탭  | 정보 요청 | 분야    |
   | 구획 | 날짜    | 해당 없음 |
   | 구획 | 세부사항  | 해당 없음 |
   
1. 블록에 필드를 추가합니다.

   | 구획   | 분야         |
   |:---- |:---------- |
   | 날짜   | 시작일, 종료일   |
   | 세부사항 | 부서, 직원, 의견 |
   
   ![레이아웃 블록에 시작 날짜, 종료 날짜, 부서, 직원 및 설명 필드를 추가합니다.](./building-a-time-off-requester/images/08.png)
   
1. *저장*을 클릭합니다.

저장되면 새 레이아웃이 Liferay UI에서 휴가 요청 항목을 생성하고 편집하는 데 사용됩니다. 직원 항목이 있는 경우 개별 요청에 연결할 수 있습니다.

![레이아웃은 휴가 요청 항목을 만들고 편집하는 데 사용됩니다.](./building-a-time-off-requester/images/09.png)

### 직원용

1. *Objects* 애플리케이션으로 이동하여 *Employee* Object를 선택합니다.

1. *레이아웃* 탭을 클릭하고 *추가* 버튼( ![Add Button](../../../images/icon-actions.png) )을 클릭한 다음 이름에 *직원 정보* 을 입력하고 *저장*을 클릭합니다.

1. 새 레이아웃을 선택하고 *기본* 로 표시 상자를 선택합니다.

1. *Layout* 탭을 클릭하고 하나의 블록으로 Fields 탭을 추가합니다.


   | 요소 | 라벨       | 유형    |
   |:-- |:-------- |:----- |
   | 탭  | 기본 세부 정보 | 분야    |
   | 구획 | 직원 정보    | 해당 없음 |

1. *이름* 및 *이메일* 필드를 블록에 추가합니다.

1. 직원 개체의 요청자 관계에 대한 관계 탭을 추가합니다.


   | 요소 | 라벨    | 유형 | 관계  |
   |:-- |:----- |:-- |:--- |
   | 탭  | 휴가 요청 | 관계 | 요청자 |

 
   ![개체의 요청자 관계에 대한 관계 탭을 추가합니다.](./building-a-time-off-requester/images/10.png)
   
1. *저장*을 클릭합니다.

일단 저장되면 직원 항목을 만들고 편집하기 위해 Liferay UI에서 새 레이아웃이 사용됩니다. 요청 항목이 있는 경우 *휴가 요청* 탭의 직원 항목과 연결할 수 있습니다. 여기에서 선택한 직원 항목과 관련된 모든 요청을 볼 수도 있습니다.

![레이아웃은 직원 항목을 만들고 편집하는 데 사용됩니다.](./building-a-time-off-requester/images/11.png)

## 개체 항목 추가

이제 앱이 완성되었으므로 Liferay UI 및 헤드리스 API를 사용하여 휴가 요청 및 직원 개체에 데이터를 추가할 수 있습니다.

### 직원 추가

헤드리스 API를 사용하여 직원 항목을 추가하려면 다음 단계를 따르십시오.

1. Liferay의 *API Explorer* (즉, `localhost:8080/o/api`)을 열고 *REST Applications* 드롭다운 메뉴를 클릭한 다음 *c/employees*을 클릭합니다.

1. 배치 `POST` API에 대한 요청 본문에 이 스크립트를 입력합니다. 

   ```json
   [
     {
       "email": "foo@liferay.com",
       "name": "Able"
     },
     {
       "email": "bar@liferay.com",
       "name": "Baker"
     },
     {
       "email": "goo@liferay.com",
       "name": "Charlie"
     }
   ]
   ```

1. *실행*을 클릭합니다.

이렇게 하면 직원 개체에 세 개의 항목이 추가됩니다.

### 휴가 요청 추가

Liferay UI를 통해 요청 항목을 추가하려면 다음 단계를 따르십시오.

1. *글로벌 메뉴* (![Global Menu](../../../images/icon-applications-menu.png))을 열고 *애플리케이션* 탭을 클릭한 다음 *휴가 요청*을 선택합니다.

1. ** 추가 버튼(![Add Button](../../../images/icon-actions.png))을 클릭하고 양식을 작성하십시오.

1. *저장*을 클릭합니다.

항목을 저장하면 항목의 편집 화면이 표시됩니다. 더 많은 항목을 추가하려면 휴가 요청 기본 페이지로 돌아가십시오. 시간 요청이 추가되면 개체의 웹후크가 트리거되고 항목의 데이터를 설정된 URL에 게시합니다.

요청이 추가되고 직원 항목과 관련되면 직원 애플리케이션에서 볼 수 있습니다. *글로벌 메뉴* (![Global Menu](../../../images/icon-applications-menu.png))을 열고 *제어판* 탭으로 이동하여 *직원*을 클릭합니다. 관련 *항목* 을 선택하고 *휴가 요청* 탭을 클릭합니다.

![휴가 요청 탭에서 직원의 관련 요청을 봅니다.](./building-a-time-off-requester/images/12.png)

## 추가 정보

* [개체 개요](../../objects.md)
* [개체 만들기](../creating-and-managing-objects/creating-objects.md)
* [선택 목록 사용](../picklists/using-picklists.md)
