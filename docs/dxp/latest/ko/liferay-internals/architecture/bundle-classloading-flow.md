# 번들 클래스 로딩 흐름

OSGi 컨테이너는 여러 사이트에서 가져온 클래스를 검색합니다. 그것이 어디에 있고 어떤 순서로 보이는지 아는 것이 중요합니다. OSGi 번들에 대한 Liferay DXP의 클래스 로딩 흐름은 OSGi 코어 사양을 따릅니다. 간단하지만 복잡합니다. 아래 그림은 흐름을 보여 주며 이 문서에서는 흐름을 안내합니다.

![그림 1: 이 순서도는 번들의 클래스 로딩을 보여줍니다.](./bundle-classloading-flow/images/01.png)

다음은 번들에서 클래스 로딩을 위한 알고리즘입니다.

1. 클래스가 `java.*` 패키지에 있으면 로드를 상위 클래스 로더에 위임합니다. 그렇지 않으면 계속하십시오.

1. 클래스가 OSGi 프레임워크의 부팅 위임 목록에 있는 경우 로드를 상위 클래스 로더에 위임합니다. 그렇지 않으면 계속하십시오.

1. 클래스가 유선 내보내기에서 번들이 가져오는 패키지 중 하나에 있으면 내보내는 번들의 클래스 로더가 이를 로드합니다. *유선 내보내기* 은 이전에 패키지를 로드한 다른 번들의 클래스로더입니다. 클래스를 찾을 수 없으면 계속하십시오.

1. 번들의 필수 번들 중 하나에서 클래스를 가져오면 필수 번들의 클래스 로더가 이를 로드합니다.

1. 클래스가 번들의 클래스 경로(매니페스트 헤더 `Bundle-ClassPath`)에 있으면 번들의 클래스 로더가 이를 로드합니다. 그렇지 않으면 계속하십시오.

1. 클래스가 번들의 프래그먼트 클래스 경로에 있으면 번들의 클래스 로더가 이를 로드합니다.

1. 클래스가 `DynamicImport-Package` 을 사용하여 동적으로 가져온 패키지에 있고 내보내기 번들과 연결이 설정되면 내보내기 번들의 클래스 로더가 이를 로드합니다. 그렇지 않으면 클래스를 찾을 수 없습니다.

축하합니다! 이제 Liferay DXP가 OSGi 번들에 대한 클래스를 찾고 로드하는 방법을 알게 되었습니다.