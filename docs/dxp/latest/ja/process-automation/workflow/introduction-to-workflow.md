# ワークフローの概要

Liferay DXPは、Blog、Webコンテンツ、Wikiなどのコンテンツを公開前にレビューし、承認することができるワークフローエンジンを同梱しています。 ワークフローアプリケーションは、ポータルインターフェースを通じて、任意の数のビジネスプロセス/ワークフローを定義し、それらを展開し、管理することを可能にします。 ワークフロープロセスは `XML` 形式で記述され、参照用にいくつかのサンプルワークフロープロセスが用意されています。 最後に、ワークフロープロセスは、レビュアーや承認者としてユーザー、グループ、ロールを統合することができます。 レビュープロセスを定義した後、公開前にレビュープロセスを必要とするコンテンツの種類を選択することができます。

## ワークフローの有効化

特定のアセットに対してワークフローが有効化されると、 **Publish** ボタンが **Submit for Workflow** ボタンに置き換えられ、即時公開ではなく、アセットのステータスが **Pending** に設定されます。 出版前にワークフローを通過する必要があります。

![ワークフローに対応したリソースには、「公開」ボタンの代わりに「ワークフローに送信」ボタンが表示されます。](./introduction-to-workflow/images/01.png)

既定のワークフロープロセスは、 **唯一の承認者** と呼ばれます。このプロセスでは、公開前に提出物を確認および承認する人が1名必要です。

詳細は、 [ワークフローのアクティブ化](./using-workflows/activating-workflow.md)および[レビューでアセットを送信する](./using-workflows/reviewing-assets.md) を参照してください。

## ワークフローを構築する

ワークフローを使用すると、ユーザーは複数のレビュー担当者と承認者が設定されたより複雑なワークフローを構築できます。 効果的なワークフローを構築する方法をご紹介します：

* [XMLでのレビュープロセスの作成](./developer-guide/crafting-xml-workflow-definitions.md)
* [レビュープロセスの視覚的設計](./designing-and-managing-workflows/workflow-designer/workflow-designer-overview.md) (サブスクライバー）
* [ワークフロー定義のアップロード](./designing-and-managing-workflows/managing-workflows.md#uploading-a-new-workflow-definitions)
* [ワークフロー定義の管理](./designing-and-managing-workflows/managing-workflows.md)

独自のワークフローの構築を開始するには、[ワークフローの構築](./designing-and-managing-workflows/building-workflows.md)を参照してください。

### ワークフローメトリクスを使ったSLAの実施

> サブスクリプション

**Metrics** 機能は、ワークフロープロセスにおけるサービスレベルアグリーメント(SLA）のパフォーマンスを測定するために使用することができます。 SLAは、ワークフロープロセスのイベントの期限を定義するものです。 顧客との間で正式に合意された期限であったり、社内の目標達成のために非公式に作成されたものであったり、次のようなイベントを追跡することができます：

* 解決までの総時間
* 特定のワークフロータスクを完了するまでの時間

SLAが設定されると、SLAタイマーをトリガーするワークフローの送信がワークフローメトリクスフレームワークによって自動的に報告され、 ［**予定通り**］ または ［**期限切れ**］ のステータスが付けられます。

![SLAに基づいて生成されたワークフローレポートをご覧ください。](./introduction-to-workflow/images/02.png)

ワークフローにSLAを追加する方法については、 [ワークフローメトリクスの使用](./using-workflows/using-workflow-metrics.md) の記事を参照してください。

## ワークフローステータスを理解する

ワークフロープロセスのアセットは、常にステータスを持っています。 このステータスは、アセットをエンドユーザーに表示できるかどうかなどの重要な判断材料として使用されます。 多くのステータスがありますが、その中でも特に一般的で理解すべき重要なものをここで説明します。

- **下書き** ステータスは、ワークフローでのレビューまたはエンドユーザーによる表示の準備ができる前に保存できるコンテンツに割り当てられます。
- **保留中** ステータスは、そのアセットがまだ完了していないワークフロープロセスにあることを示します。
- **承認済み** ステータスは、アセットを表示する権限を持つすべてのユーザーがUIに表示できる状態であることを意味します。
- **拒否** ステータスは、ワークフローを通過できなかったアセットのためのものです。 このステータスを利用して、アセットのオリジナル提出者に通知を行い、コンテンツの修正と再提出を促すことができます。

![コンテンツは、ワークフローのステータスを持つことができます。](./introduction-to-workflow/images/03.png)

ソースコードの [WorkflowConstantsクラス](https://github.com/liferay/liferay-portal/blob/[$LIFERAY_LEARN_PORTAL_GIT_TAG$]/portal-kernel/src/com/liferay/portal/kernel/workflow/WorkflowConstants.java) を参照して、利用可能なすべてのステータスを確認してください。

### バージョン管理されたアセットは複数のステータスを持つことができます

バージョン管理したアセットには、2つのステータスがあります。

![バージョン管理されたアセットには、2つのステータスがあります。](./introduction-to-workflow/images/04.png)

ほとんどのアセットでは、デフォルトで承認済みの最新バージョンが表示されます。 すでに承認されているアセットが更新された場合、新しいバージョンが作成され、ワークフローで送信されます。 新しいバージョンがワークフローでまだ承認されていない間、アセットの2番目のステータスが表示されます(例： **保留中**）。 最後に承認されたバージョンは、新しいバージョンが承認されるまで継続して使用されます。

## 次のステップ

* [ワークフローの有効化](./using-workflows/activating-workflow.md)
* [ワークフローの管理](./designing-and-managing-workflows/managing-workflows.md)
* [ワークフローデザイナーの概要](./designing-and-managing-workflows/workflow-designer/workflow-designer-overview.md)
