# アダプティブメディア設定リファレンス

{bdg-secondary}`liferay 7.3 U28+/GA28+および7.4 U78+/GA78+`。

アダプティブ・メディアでは、サポートされるメディア・タイプの設定、ドキュメント・ライブラリのプレビューやサムネイルに使用する解像度の決定などができます。 これらの設定にアクセスするには

1. [グローバルメニュー](../../../../../images/icon-applications-menu.png) を開き、[コントロールパネル] タブを開き、[システム設定] をクリックします。

1. [コンテンツとデータ]の下にある[アダプティブ・メディア]をクリックします。

   ![Access the System Settings](./adaptive-media-configuration-reference/images/01.png)

設定オプションは4つのタブで表示される：

* システム画像の解像度：ドキュメントライブラリのサムネイルとプレビューに使用する解像度を設定します。
* 画像：アダプティブ・メディアがサポートするメディアタイプを設定する。
* ImageMagick：ImageMagickを使用して生成するメディアタイプを設定します。
* プロセス：非同期処理を設定する。

## システム画像解像度

ここでは、ドキュメントライブラリのプレビューとサムネイルに関するAdaptive Mediaのデフォルトの動作をオーバーライドできます。 デフォルトでは、アダプティブ・メディアは、ユーザーの画面タイプと解像度に最も近い寸法に基づいて、プレビューとサムネイルに最適な画像解像度を選択します。 しかし、解像度IDを入力することで、この処理を上書きすることができます（例：`Preview-1000x0`）。

![Access the System Settings](./adaptive-media-configuration-reference/images/02.png)

| 項目             | 説明                                                              |
| :------------- | :-------------------------------------------------------------- |
| プレビュー設定        | ドキュメント・ライブラリのプレビューのデフォルトのアダプティブ・メディア動作をオーバーライドする解像度IDを入力します。    |
| サムネイル設定        | ドキュメントライブラリのサムネイルに対するデフォルトのアダプティブメディア動作をオーバーライドする解像度IDを入力します。   |
| カスタムサムネイル 1 設定 | ドキュメントライブラリのカスタムサムネイル1のデフォルトのアダプティブメディア動作をオーバーライドする解像度IDを入力します。 |
| カスタムサムネイル 2 設定 | ドキュメントライブラリのカスタムサムネイル2のデフォルトのアダプティブメディア動作をオーバーライドする解像度IDを入力します。 |

## 画像

ここでは、Adaptive Media で処理されるメディアタイプを決定し、 [Gifsicle](https://www.lcdf.org/gifsicle/) を有効または無効にすることができます。

![Determine supported media types.](./adaptive-media-configuration-reference/images/03.png)

| 項目               | 説明                                                                                                                                                                                                   |
| :--------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| サポートされている MIME種別 | アダプティブメディアが処理するメディアタイプを決定する。 画像がアップロードされ、そのメディアタイプがリストにない場合、アダプティブメディアは画像を無視します。 デフォルトでは、このリストには `bmp`、`gif`、`jpeg`、`pjpeg`、`png`、`svg+xml`、`x-citrix-jpeg`、`x-citrix-png`、`x-ms-bmp`、`x-png` が含まれる。 |

![Enable or disable Gifsicle.](./adaptive-media-configuration-reference/images/04.png)

| 項目       | 説明                                                                                                                                                        |
| :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Gifsicle | Gifsicleを有効にしてgifファイルを適応させることができます。 詳しくは [アニメーションGIFの最適化を有効にする](../../devops/enabling-optimization-of-animated-gifs.md) を参照。 |

## ImageMagick

ここでは、 [ImageMagick](http://www.imagemagick.org) を使用して処理するメディアタイプを決定できます。 ImageMagickを使うには、まずLiferayサーバーにインストールする必要があります。 詳細は、 [Enabling ImageMagick and Ghostscript](../../../../system-administration/using-the-server-administration-panel/configuring-external-services.md#enabling-imagemagick-and-ghostscript) を参照してください。

![Determine which media types are processed using ImageMagick.](./adaptive-media-configuration-reference/images/05.png)

| 項目               | 説明                                                                                                                                                                                                                                                                                                                         |
| :--------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| サポートされている MIME種別 | アダプティブメディアでImageMagickが処理するメディアタイプを決定する。 画像がアップロードされ、そのメディアタイプがこのリストにない場合、Adaptive Mediaはプレビューを生成するためにImageMagickを使用しません。 デフォルトでは、このリストには `avif`、`gif`、`heic`、`tiff`、`webp` が含まれているが、他のメディアタイプを追加することもできる。 サポートされているメディアタイプの一覧は [ImageMagick documentation](https://imagemagick.org/script/formats.php) を参照のこと。 |

## プロセス

ここでは、アダプティブメディアの非同期処理を設定できます。 パフォーマンスを向上させるために、これらの値を変更する。

![Configure Adaptive Media's image processing.](./adaptive-media-configuration-reference/images/06.png)

| 項目      | 説明                                                                    |
| :------ | :-------------------------------------------------------------------- |
| 最大プロセス数 | 適合メディアを生成するプロセスの最大数を設定する。 デフォルト値は`5`である。                              |
| コアプロセス  | 適合メディアを生成するために常に利用可能なプロセス数を設定する。 デフォルト値は`2`である。 この値は最大プロセス数を超えてはならない。 |

```{warning}
Max ProcessesとCore Processesの値を大きくすると、大量のメモリを消費し、メモリ不足エラーが発生する可能性がある。 ソース画像が大きい場合、メモリ不足のエラーが発生することもあります。 パフォーマンステストを実行して、システムで使用可能なメモリの量に合わせてこれらの設定を最適化する必要があります。
```

## 関連トピック

* [画像解像度の追加](./adding-image-resolutions.md) 
* [画像解像度の管理](./managing-image-resolutions.md) 
