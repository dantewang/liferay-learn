# 標準アプリケーションの作成

カスタムオブジェクトに基づいてアプリケーションを作成するには、オブジェクトを作成し、少なくとも1つのフォームビューを作成し、少なくとも1つのテーブルビューを作成して、アプリケーションをデプロイするという4つの手順が必要です。

* [カスタムオブジェクトの作成](#creating-a-custom-object)
* [フォームビューの作成](#creating-form-views)
* [テーブルビューの作成](#creating-table-views)
* [アプリケーションのデプロイ](#deploying-the-application)

ここでは、アプリビルダーを使用して、Time Off Requestというカスタムオブジェクトによってサポートされる2つのシンプルな休暇管理アプリケーションを作成します。 最初のアプリケーションは、リクエストの追加フォームを表示する［Time Off Requester］ウィジェットです。 ユーザーは、休暇をリクエストするときにこのフォームに記入します。 2番目のアプリケーションは、プロダクトメニューにデプロイされた休暇管理アプリケーションで、ここで管理ユーザーは休暇申請を表示および管理できます。

## カスタムオブジェクトの作成

1. グローバルメニュー（![Applications Menu](../../images/icon-applications-menu.png)）を開き、［コントロールパネル］&rarr; ［アプリビルダー］ &rarr; ［カスタムオブジェクト］に移動します。

1. 追加ボタン（![Add](../../images/icon-add.png)）をクリックします。

1. 名前を入力します：_Time Off Request_ 。

1. オブジェクトのフォームビューを作成し、オブジェクトに存在するデータフィールドを定義するには、_［Continue and Create Form View］_設定をオンのままにして、_［Continue］_をクリックします。

   ![カスタムオブジェクトの作成は、アプリビルダーアプリケーションを作成するための最初のステップです。](./creating-a-standard-application/images/01.png)

フォームビューを作成して、Time Off Requestオブジェクトに含めるデータフィールドを定義します。

## フォームビューの作成

フォームビューは、カスタムオブジェクトで定義されたデータを入力するために使用されるビジュアルインターフェイスを定義します。 アプリケーションに必要な数だけフォームビューを作成できます。 このTime Off RequesterアプリケーションとManagerアプリケーションの間に必要なフォームビューは1つだけです。

1. カスタムオブジェクトを開きます（［コントロールパネル］ &rarr; ［アプリビルダー］ &rarr; ［カスタムオブジェクト］）。

1. _［Form Views］_タブで、［Add］ボタンをクリックします。 フォームビルダーが表示されます。

1. フォームビューに_Add Request_という名前を付けます 。

1. スクリーンショットのレイアウトを使用して、以下を追加します。

    * _［Name］_というラベルの付いた必須テキストフィールド
    * _［From］_というラベルがついた必須の日付フィールド
    * _［To］_というラベルがついた必須の日付フィールド
    * _［Comment］_というラベルがついたオプションのテキストフィールド（複数行を入力可）

1. フォームビューを保存します。

    ![アプリビルダー内に埋め込まれたフォームビルダーを使用して、フォームビューを作成します。](./creating-a-standard-application/images/02.png)

埋め込みのフォームビルダーに加えて、カスタムオブジェクトに含まれるフィールド（他のフォームビューがある場合）は、左側のサイドバーのフォームビューに追加できます。

ユーザーがアプリケーションのデータを表示および操作する方法を定義するには、テーブルビューを作成します。

## テーブルビューの作成

テーブルビューは、アプリケーションに送信されたエントリを表示および管理（削除、編集）します。 フォームビューと同様に、オブジェクトには1つまたは複数のテーブルビューを設定できます。 このTime Off RequesterアプリケーションとManagerアプリケーションの間に必要なテーブルビューは1つだけです。

1. Time Off Requestオブジェクトを開きます（［コントロールパネル］ &rarr; ［アプリビルダー］ &rarr; ［カスタムオブジェクト］）。

1. ［テーブルビュー］タブで、_追加_ボタンをクリックします。 テーブルビルダーが表示されます。

    ![アプリビルダー内に埋め込まれたテーブルビルダーを使用して、テーブルビューを作成します。](./creating-a-standard-application/images/03.png)

1. テーブルビューに_Time Off Requests_という名前を付けます。

1. ［コメント］フィールド以外の使用可能なすべてのフィールドをテーブルキャンバスにドラッグします。

1. テーブルビューを保存します。

```{note}
テーブルビューにはありませんが、［コメント］フィールドは個々のレコードの詳細ビューに表示されます。 デプロイされたアプリケーションで、テーブルビューから特定のレコードをクリックして、詳細ビューを表示します。 
```

## アプリケーションのデプロイ

アプリケーションをデプロイすると、ユーザーがアプリケーションにアクセスできるようになります。 いくつかのデプロイオプションがあります。 デプロイオプションについては、[アプリビルダー](../app-builder.md#deployment)の概要を参照してください。

Time Off Requestには、デプロイする2つのアプリがあります。1つはページに追加するためのウィジェットアプリケーションで、もう1つは [プロダクトメニュー](../../getting-started/navigating-dxp.md#product-menu)の管理アプリケーションです。ここでは、追加の権限を持つユーザーがリクエストを管理できます。

1. Time Off Requestを開きます（［コントロールパネル］ &rarr; ［アプリビルダー］ &rarr; ［カスタムオブジェクト］）。

1. _［Apps］_タブで、追加ボタンをクリックします（![追加](../../images/icon-add.png)).

   ```{note}
   オブジェクト（DXPサブスクライバーが利用可能）の「ワークフロー対応」アプリを作成する場合は、グローバルメニューのアプリエントリからアプリを作成してデプロイする必要があります。 詳細は、[Creating a Workflow Powered Application](./creating-a-workflow-powered-application.md)を参照してください。
   ```

1. アプリに_Time Off Requester_という名前を付けます 。

1. フォームビューとテーブルビューを選択し、アプリの[デプロイオプション](../app-builder.md#deployment)を設定します。

   Time Off Requesterアプリケーションの場合、_［ウィジェット］_を選択して、_［デプロイする］_をクリックします。 Time Off Requesterウィジェットアプリケーションをページにデプロイし、サイトのユーザーがすぐに利用できるようになりました。

1. 同じ手順に従って、_Time Off Request Manager_と呼ばれる2番目のアプリを作成します。今回は、プロダクトメニューにアプリをデプロイすることを選択します（デフォルトの選択のままにして、グローバルメニューに追加します）。

    ![これが、グローバルメニューの［Time Off Request Manage］エントリです。](./creating-a-standard-application/images/04.png)

管理者は、プロダクトメニューのTime Off Managerアプリケーションにアクセスして、サイトユーザーからの休暇申請の管理を開始できるようになりました。

## アプリケーションのアンデプロイ

アプリビルダーのアプリケーションはいつでもアンデプロイおよび再デプロイできます（たとえば、新しい一連の休暇管理アプリケーションを作成する場合など）。 アプリケーションをアンデプロイすると、すでに送信されたエントリは保持されますが、新しいエントリを追加することはできません。

1. カスタムオブジェクトを開きます（［コントロールパネル］ &rarr; ［アプリビルダー］ &rarr; ［カスタムオブジェクト］）。

1. _［Apps］_タブで、アンデプロイするアプリのケバブメニューをクリックします。

1. _［Undeploy］_を選択します。

## データレコードを含むオブジェクトの編集

フィールドにデータレコードが追加された後でも、フィールドを削除、追加、または編集できます。アプリビルダーは、データの破損や損失を防ぎます。

### フィールドの削除

データレコードが既にあるオブジェクトからフィールドを削除すると、そのフィールドはUIに表示されなくなりますが、データは削除されません。 削除されたフィールドと同じ名前とタイプのフィールドを作成すると、フィールドのデータはそのデータを既に保持しているレコードに復元されます。

既存のオブジェクトからフィールドを削除するには、オブジェクトビューでフィールドにカーソルを合わせ、*［x］*をクリックします。 確認を求められ、データ損失について警告されます。

![フィールドを削除すると、既存のレコードのデータが失われます。](./creating-a-standard-application/images/06.png)

### フィールドの追加と編集

既存のフィールドを追加または編集する場合、変更は追加または編集後に追加されたレコードにのみ影響します。 既存のレコードは、変更による影響を受けません。

フィールドを既存のオブジェクトに追加するには、任意のフォームビューを開き、フォームビルダーの左側のペインにある_追加_ボタンをクリックします。

![既存のオブジェクトにフィールドを直接追加できます。](./creating-a-standard-application/images/05.png)

フィールドを編集するには、そのフォームビューに移動し、フォームビルダーでフィールドをクリックして、そのプロパティを表示します。

![フォームビューからフィールドを編集できます。](./creating-a-standard-application/images/07.png)

## 関連情報

* [App Builder Overview](../app-builder.md)
* [Creating a Workflow Powered App](./creating-a-workflow-powered-application.md)
