# オブジェクトの作成

> 対応可能：Liferay DXP/Portal 7.4以降

Liferay Objectは、Liferay UIの開発機能を提供します。 オブジェクトポートレットを使用すると、コードを記述したり、モジュールを手動でデプロイしたりすることなく、完全に統合されたLiferayアプリケーションを構築できます。 このプロセスには、オブジェクトの初期ドラフトの [作成](#creating-object-drafts) 、オブジェクトドラフトの [編集](#editing-object-drafts) 、最後にドラフトを [公開](#publishing-object-drafts) して新しいアプリケーションを作成することが含まれます。 オブジェクトドラフトを公開すると、完全に統合されたLiferayアプリケーションが作成され、オブジェクトポートレットを介していつでも[管理および拡張](./managing-objects.md)できます。

## オブジェクトドラフトの作成

オブジェクトドラフトは、オブジェクトポートレットに格納されているアプリケーションテンプレートです。 各テンプレートに保存されているデータは、公開時にオブジェクトアプリケーションを作成するために使用されます。

次の手順に従って、オブジェクトドラフトを作成します。

1. ［**グローバルメニュー**］（![Global Menu](../../../images/icon-applications-menu.png)）を開き、 ［**コントロールパネル**］ タブに移動して、 ［**オブジェクト**］ をクリックします。

1. **追加** ボタン（![Add Button](../../../images/icon-add.png)）をクリックします。

1. 新しいオブジェクトのこれらの詳細を提供します。

   ［**Label**］ ：オブジェクトポートレットおよびサポートされているアプリケーションコンテキスト（ワークフロー、表示ページテンプレート、フォームなど）でオブジェクトを識別します。

   ［**Plural Label**］ ：ポータルUIでのオブジェクトアプリケーションの表示名を決定します。

   ［**Object Name**］ ：オブジェクトの`definition.name`を決定し、オブジェクトが公開されると変更できません。

   ![オブジェクトドラフトのラベル、複数形ラベル、および名前を入力します。](./creating-objects/images/01.png)

1. ［**保存**］ をクリックします。

保存すると、フィールド、リレーションシップ、レイアウト、または定義された範囲なしで新しいオブジェクトドラフトが作成されます。 作成プロセスを完了するには、オブジェクトを [編集](#editing-object-drafts) してから、Liferayインスタンスに [公開](#publishing-object-drafts) する必要があります。

![新しいオブジェクトドラフトが作成されます。](./creating-objects/images/02.png)

## オブジェクトドラフトの編集

オブジェクトを公開する前に、その設定と要素を構成できます。 これには、データの範囲、名前、パネルカテゴリキー、フィールド、リレーションシップ、およびレイアウトが含まれます。 公開されると、これらの構成オプションの一部は削除されます。 詳細については、 [オブジェクトドラフトの公開](#publishing-object-drafts) を参照してください。

オブジェクトドラフトを編集するには、次の手順に従います。

1. オブジェクトアプリケーションから、新しく作成されたオブジェクトドラフトをクリックします。 これにより、［Details］タブにリダイレクトされます。

1. 必要に応じて、オブジェクトの［Name］、［Label］、 および［Plural Label］を変更します。

   ```{important}
   公開されると、［名前］フィールドは変更できません。
   ```

   ![必要に応じて、オブジェクトの名前、ラベル、および複数形ラベルを変更します。](./creating-objects/images/03.png)

1. オブジェクトの **範囲** を決定します。 これにより、オブジェクトのデータの保存方法が決まります。

   ［**Company**］（デフォルト）：会社ごとに範囲が設定されている場合、オブジェクトのデータはLiferayインスタンスごとに保存されます。

   **サイト** ：サイトで範囲を設定すると、オブジェクトのデータはサイトごとに保存されます。

   ```{important}
   公開されると、オブジェクトの範囲は変更できません。
   ```

   ![オブジェクトの範囲とパネルカテゴリキーを選択します。](./creating-objects/images/04.png)

1. **パネルカテゴリキー** を選択して、Liferay UIのどこにオブジェクトを表示するかを決定します。

   オブジェクトが会社で範囲設定されている場合、 **グローバルメニュー**（![Global Menu](../../../images/icon-applications-menu.png)）に配置することが可能です。

   オブジェクトがサイトで範囲設定されている場合、 **サイトメニュー**(![Site Menu](../../../images/icon-menu.png)) に配置することが可能です。

1. サイトでオブジェクトのウィジェットを表示するか非表示にするかを決定します。

   有効にすると、ユーザーはオブジェクトをウィジェットとしてページにデプロイすることができます。 詳細は、[Deploying Object Widgets in Sites](../deploying-object-widgets-to-sites.md)を参照してください。

   ```{note}
   この機能は、Liferay DXP 7.4 U1以降とLiferay Portal 7.4 GA5以降で利用可能です。
   ```

   ![オブジェクトのウィジェットの表示／非表示を決定する。](./creating-objects/images/05.png)

1. 次の手順に進む前に、 ［**保存**］ をクリックしてください。 他のタブに移動すると、 ［**Details**］ タブで保存されていない変更はすべて失われます。

1. （オプション）［**フィールド**］ タブに移動し、オブジェクトにフィールドを追加します。 フィールドは、特定のタイプの値を格納するためのオブジェクトデータ定義であり、データベース列を表します。 詳細については、 [オブジェクトへのフィールドの追加](./adding-fields-to-objects.md) を参照してください。

   ![［フィールド］タブからオブジェクトにフィールドを追加します。](./creating-objects/images/06.png)

1. （オプション）［**Relationships**］ タブに移動し、オブジェクトにリレーションシップを追加します。 リレーションシップは、異なるオブジェクトエントリーを相互にリンクするオブジェクト間の定義された接続です。 詳細については、 [オブジェクトリレーションの定義](./defining-object-relationships.md) を参照してください。

   ![［リレーションシップ］タブからオブジェクトにリレーションシップを追加します。](./creating-objects/images/07.png)

1. （オプション）［**Layouts**］ タブに移動し、カスタムレイアウトをオブジェクトに追加します。 オブジェクトレイアウトは、オブジェクトエントリーを作成または編集するときにフィールドとリレーションシップがどのように表示されるかを定義します。 詳細については、 [オブジェクトレイアウトの設計](./designing-object-layouts.md) を参照してください。

   ```{note}
   カスタムレイアウトを設計せず、デフォルトとして設定した場合、オブジェクトはそのエントリーに自動生成されたレイアウトを使用します。 このレイアウトには、すべてのオブジェクトフィールドをアルファベット順に表示し、リレーションシップを表示しない単一のタブがあります。 リレーションシップを表示するには、専用の［relationships］タブを使用してカスタムレイアウトを作成する必要があります。
   ```

   ![必要に応じて、［レイアウト］タブからオブジェクトにカスタムレイアウトを追加します。](./creating-objects/images/08.png)

1. （オプション）オブジェクトにフィールドを追加したら、 ［**Details**］ タブに移動して、エントリのタイトルを選択できます。 これにより、オブジェクトのエントリーのタイトルとして使用されるフィールドが決まります。

   ![フィールドがオブジェクトに追加されたら、［詳細］タブに移動して、エントリのタイトルを選択できます。](./creating-objects/images/09.png)

フィールド、リレーションシップ、またはレイアウトを追加するたびに、オブジェクトドラフトが自動的に保存されます。 ドラフトの構成と編集が完了したら、 ［**Details**］ タブでドラフトを [［公開］](#publishing-object-drafts) して、アプリケーションを作成できます。

## オブジェクトドラフトの公開

オブジェクトを公開すると、新しいアプリケーションが作成されてアクティブ化されます。 有効にすると、ユーザーは範囲とパネルカテゴリキーに従ってポータルUIでアクセスできます。 オブジェクトを公開する前に、以下の情報を確認して、ドラフトを公開した場合の結果を理解してください。

### 公開設定時の処理

公開プロセスには、次の操作が含まれます。

* ドラフトのデータ定義を使用して、オブジェクトのデータベーステーブルが作成されます。

* CRUD操作用に新しいヘッドレスAPIが自動的に作成されます。

* オブジェクトのエントリーを表示するためのコレクションプロバイダーが作成されます。

* オブジェクトに対してページウィジェットが作成されます。

* オブジェクトは情報フレームワークと統合されているため、[表示ページテンプレート](../../../site-building/displaying-content/using-display-page-templates/about-display-page-templates-and-display-pages.md)のコンテンツの種類としてオブジェクトを選択できます。

* オブジェクトは[権限設定フレームワーク](../understanding-object-integrations/permissions-framework-integration.md)と統合されているため、新しいアプリケーションとそのリソースの権限を管理できます。

* オブジェクトはワークフローフレームワークと統合されているため、オブジェクトのカスタムワークフローを構成できます。

* オブジェクトはフォームと統合されているため、データストレージオプションとしてオブジェクトを選択できます。

### 公開されたオブジェクトの構成制限

データの損失とシステムの競合を防ぐために、オブジェクト、フィールド、およびリレーションシップの一部の構成オプションは、公開後に削除されます。

* 公開されたオブジェクトは削除または非公開にすることはできません。

* 公開されたオブジェクトの名前と範囲は変更できません。

* 公開時にオブジェクトに含まれていたフィールドまたはリレーションシップは削除できません。

* 公開されたフィールドとリレーションシップのほとんどの構成オプションは変更できません。

公開後もオブジェクト、フィールド、およびリレーションシップのラベルを編集およびローカライズできますが、ほとんどの構成オプションは削除されます。 オブジェクトの場合、パネルカテゴリキーを変更したり、新しいフィールド、リレーションシップ、およびレイアウトを追加したりできます。 リレーションシップについては、その **削除タイプ** を構成できます。

## 追加情報

* [Objects Overview](../../objects.md)
* [オブジェクトへのフィールドの追加](./adding-fields-to-objects.md)
* [オブジェクトリレーションの定義](./defining-object-relationships.md)
* [オブジェクトレイアウトの設計](./designing-object-layouts.md)
* [オブジェクトの管理](./managing-objects.md)
