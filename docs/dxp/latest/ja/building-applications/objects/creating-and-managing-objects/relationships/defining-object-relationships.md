# オブジェクトリレーションの定義

{bdg-secondary}`Liferay 7.4+`

関連は、オブジェクト定義にフィールドとテーブルを追加し、そのエントリーを相互に関連付けるものです。 次の手順に従って、オブジェクト定義に関連を追加します。

1. ［**グローバルメニュー**］（![Global Menu](../../../../images/icon-applications-menu.png)）を開き、 ［**コントロールパネル**］ タブに移動して、 ［**オブジェクト**］ をクリックします。

1. 目的のオブジェクト定義の編集を開始します。

1. ［**Relationships**］ タブを開き、 **追加**( ![Add Button](../../../../images/icon-add.png) ) をクリックします。

1. **ラベル** と **名前** を入力します。

   **ラベル** ：オブジェクトUIでリレーションシップを識別し、リレーションシップの作成後にローカライズできます。

   **名前** ：バックエンドでの関連の名前を決定し、キャメルケースを使用します。 関連が公開されると、この値は変更できません。

1. 関連のタイプ（［**一対多**］ または ［**多対多**］）を選択します。

   **一対多** : 1つのオブジェクトエントリーを複数のオブジェクトエントリーに関連付けます。 このタイプは、関連の親側 (すなわち「一人」側) のエントリーに関係テーブルを追加し、子側 (すなわち「多数」側) のエントリーに関係フィールドを追加するものです。

   **多対多** : 複数のオブジェクトエントリーと複数のオブジェクトエントリーを関連付けます。 これにより、関連の両側のエントリーに関連テーブルが追加されます。

   ```{note}
   Objects UIでは、関連フィールドは定義の［フィールド］タブに表示され、テーブルは［関連］タブに表示されます。
   ```

1. 現在のオブジェクトに関連付ける **オブジェクト** を選択します。 オブジェクトをそれ自体または他のオブジェクト定義に関連付けることができます。

   ![ラベルと名前を入力し、関連タイプと目的のオブジェクトの両方を選択します。](./defining-object-relationships/images/01.png)

1. ［**保存**］ をクリックします。

   ![［関連］タブで関連を表示します。](./defining-object-relationships/images/02.png)

一度保存すると、その関連を使ってエントリーを関連付けることができます。

関連を編集して、その [削除タイプ](#configuring-deletion-type) を設定したり、 [必須](#making-relationship-fields-mandatory) にすることができます。

```{important}
関連フィールドは、オブジェクトのデフォルトレイアウトに自動的に表示されます。 関連テーブルを表示するには、 [関連タブ](../layouts/designing-object-layouts.md#adding-relationships-tabs) を持つカスタムレイアウトが必要です。 このタブでは、現在のエントリーに関連するすべてのエントリが一覧表示されます。 システムオブジェクトはカスタムレイアウトをサポートしないため、関連フィールドやテーブルを表示することはできません。 REST APIを介してのみ、その関連フィールドにアクセスできます。 詳しくは、[オブジェクトレイアウトの設計](../layouts/designing-object-layouts.md)をご覧ください。
```

## 削除タイプの構成

関連を定義した後、その削除タイプを設定することができます。 この設定は、あるエントリーが他のエントリーと関連している場合に、エントリーの削除をどのように処理するかを決定します。

![関連を作成した後、その削除タイプを構成できます。](./defining-object-relationships/images/03.png)

使用可能なオプションには、 ［**Prevent**］ 、 ［**Disassociate**］ 、および ［**Cascade**］ があります。

**Prevent**（デフォルト）：親側のエントリーが子エントリーに関連している場合、親エントリーを削除しないようにします。

**Disassociate** : 親エントリーが子エントリーに関連付けられているとき、ユーザーが親エントリーを削除できるようにします。 親エントリーを削除しても、関連するエントリーに影響を与えません。

**Cascade** : 親エントリーが子エントリーに関連付けられているとき、ユーザーが親エントリーを削除できるようにします。 ユーザーが子オブジェクトのエントリーを削除する権限を持っている場合は、親エントリーを削除すると、その関連エントリーも削除されます。

## 関連フィールドの必須化

{bdg-secondary}`Liferay 7.4 U47+/GA47+`

一対多リレーションの子側のオブジェクトは、リレーションシップのフィールドを継承する。 シナリオによっては、これらのフィールドを必須にしたい場合もあるでしょう。 例えば、チケットオブジェクトを作成する場合、「担当者」を選択するための必須関連フィールドを定義したいと思うかもしれません。 あるいは、アカウント別に[オブジェクトデータへのアクセスを制限](../using-system-objects-with-custom-objects/restricting-access-to-object-data-by-account.md)したい場合は、そのオブジェクトとアカウントオブジェクトの関連を必須とする必要があります。

関連フィールドを必須にするには、以下の手順に従います。

1. 目的の関連フィールドを含む **オブジェクト** の編集を開始します。

1. ［**Fields**］ タブを開き、 **関連フィールド** の編集を開始します。

   ![［Fields］タブを開き、 関連フィールドの編集を開始します。](./defining-object-relationships/images/04.png)

1. ［**Mandatory**］ に切り替えます。

   ![［Mandatory］に切り替えます。](./defining-object-relationships/images/05.png)

1. ［**Save**］ をクリックします。

## 関連トピック

* [オブジェクトの作成](../creating-objects.md)
* [オブジェクトレイアウトの設計](../layouts/designing-object-layouts.md)
* [関連の削除](./removing-relationships.md)
