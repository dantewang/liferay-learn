# オブジェクトビューの設計

{bdg-secondary}`Liferay 7.4 U27以降とGA27以降で利用可能`

オブジェクトビューは、オブジェクトのアプリケーションページにエントリーを表示するためのテーブルを定義します。 デフォルトでは、Liferayは公開されたオブジェクトごとにデフォルトビューを自動的に生成します。 このビューでは、すべてのエントリーフィールドがアルファベット順に並べられています。 ただし、カスタムビューを設計して、テーブルに含まれるオブジェクトフィールド、テーブルのソート方法、および使用可能なフィルタを決定することができます。

![オブジェクトエントリーを表示するためのカスタムビューを設計します。](./designing-object-views/images/01.png)

```{note}
カスタムビューは、カスタムオブジェクトにのみ追加できます。 システムオブジェクトに追加することはできません。
```

次の手順に従って、カスタムオブジェクト定義のビューを設計します。

1. **グローバルメニュー**（![Global Menu](../../../images/icon-applications-menu.png)）を開き、 ［**コントロールパネル**］ タブをクリックして、 ［**オブジェクト**］ に進みます。

1. カスタムオブジェクト定義の編集を開始し、 ［**表示**］ タブで、 **追加** ボタン (![Add Button](../../../images/icon-add.png)) をクリックしてください。

1. **名前** を入力し、 ［**Save**］ をクリックします。

   ![名前を入力し、［保存］をクリックします。](./designing-object-views/images/02.png)

1. 新規 **ビュー** をクリックして、編集を開始します。

1. ［Basic Info］タブで、 ［**Mark as Default**］ をチェックして、オブジェクト定義のデフォルトビューとして設定します。

   ```{note}
   これにより、ビューがオブジェクトのアプリケーションページで使用されるようになります。 デフォルトとしてカスタムレイアウトが選択されていない場合、オブジェクトは自動的に生成されたレイアウトを使用します。
   ```

   ![ビューをデフォルトとして設定します。](./designing-object-views/images/03.png)

1. ［View Builder］タブで、 [列](#adding-columns-to-a-view) をビューテーブルに追加します。

1. (オプション) 各列の表示名を [変更またはローカライズ](#renaming-columns) します</0> 。

1. (オプション）［Default Sort］タブで、 [デフォルトの列のソート](#setting-a-default-sorting) を設定します。

1. (オプション）［Filters］タブで、 [ビューフィルター](#adding-filters) として提供するフィールドを選択します。

1. ［**Save**］ をクリックします。

保存すると、カスタムビューにオブジェクトのエントリーが表示されます。

```{tip}
7.4 U21では、ビューの*Actions*ボタン (![Actions Button](../../../images/icon-actions.png)) をクリックして*複製*を選択すると、ビューを複製すること ができます。 これは、元のビューの完全なコピーを作成し、その名前に「(Copy)」が追加されます。 
```

## ビューにカラムを追加する

［ビュービルダー］タブで、ビューのフィールドを追加し、並べ替えます。 追加された各フィールドは、ビューテーブルの列になります。

```{note}
カスタムビューは、複数のエントリーを含む列には対応していません（たとえば、*多対多*のリレーションシップフィールド）。
```

次の手順に従って、列を追加します。

1. 目的のビューの編集を開始し、 ［**View Builder**］ タブに進みます。

1. **追加** ボタン（![Add Button](../../../images/icon-add.png)）をクリックします。

1. ビューテーブルに含めるすべてのフィールドをチェックして、 ［**Save**］ をクリックします。

   利用可能なオプションには、 [カスタムフィールド](./adding-fields-to-objects.md) とデフォルトのシステムフィールド（ID、著者、作成日、変更日、ワークフロー ステータスなど）の両方が含まれます。

   ![フィールドを任意の順序で配置します。](./designing-object-views/images/04.png)

1. フィールドをドラッグ＆ドロップして、ビューテーブルでの順序を決定します。

1. ［**Save**］ をクリックします。

保存されると、ビューテーブルには選択されたフィールドのみが表示されます。

![ビューテーブルには選択されたフィールドのみが表示されます。](./designing-object-views/images/05.png)

## 列名の変更

{bdg-secondary}`Liferay DXP 7.4 U12以降およびPortal 7.4 GA21以降で利用可能`

ビュー列の表示名を変更またはローカライズするには、次の手順に従います。

1. 目的のビューの編集を開始し、 ［**View Builder**］ タブに進みます。

1. 目的の列の **アクション** ボタン (![Actions Button](../../../images/icon-actions.png))をクリックし、 ［**Edit**］ を選択します。

   ![目的の列のアクションボタンをクリックし、［編集］を選択します。](./designing-object-views/images/06.png)

1. ［**Column Label**］ フィールドにローカライズ可能な名前を入力し、 ［**Edit**］ をクリックします。

   ![ローカライズ可能な名前を入力し、［編集］をクリックします。](./designing-object-views/images/07.png)

1. ［**Save**］ をクリックします。

保存されると、ローカライズされたラベルがビュー列に使用されます。

![ローカライズされたラベルがビュー列に使用されます。](./designing-object-views/images/08.png)

## デフォルトのソート順の設定

{bdg-secondary}`Liferay DXP 7.4 U18以降およびPortal 7.4 GA18以降で利用可能`

次の手順に従って、オブジェクトビュー列のデフォルトの順序/並べ替えを設定します。

1. 目的の **ビュー** の編集を開始し、 ［**デフォルトソート**］ タブに進みます。

1. **追加** ボタン（![Add Button](../../../images/icon-add.png)）をクリックします。

1. **列** と **ソート** 順序（つまり、昇順または降順）を選択します。

   ![列とソート順を選択します。](./designing-object-views/images/09.png)

1. ［**Save**］ をクリックします。

1. (オプション）複数のフィールドを追加した場合、ドラッグ＆ドロップでどれをデフォルトのソートとするかを決定します。 リストの上部にあるソートは、デフォルトで適用される順序です。

   ![フィールドを並べ替え、デフォルトソートを決定します。](./designing-object-views/images/10.png)

1. ［**保存**］ をクリックします。

オブジェクトエントリーは、デフォルトのソート順に従ってソートされるようになりました。

## フィルターの追加

{bdg-secondary}`Liferay 7.4 U27以降とGA27以降で利用可能`

カスタムビューを作成する際に、ユーザーがフィルターファセットとして利用できるフィールドを決定することができます。 また、ビューに自動的に適用されるデフォルトのフィルタを設定することもできます。

以下の手順で、カスタムビューにフィルターを追加します。

1. 目的のビューの編集を開始し、 ［**Filters**］ タブに進みます。

1. **追加** ボタン（![Add Button](../../../images/icon-add.png)）をクリックします。

1. ［**Filter by**］ で、フィールドを選択します。

   ```{note}
   現在、オブジェクトはビューフィルターとして、Workflow Status、Creation Date、Modified Date、Picklistフィールドのみをサポートしています。
   ```

1. (オプション) フィルターの種類（［**Includes**］ もしくは ［**除外**］ を選択します。 これは、デフォルトのフィルターが以下の値を持つエントリーを含むか、または除外するかを決定します。

1. (オプション) デフォルトのフィルターとして使用するフィールド値を入力します。

   ![フィールド、フィルタータイプ、値を選択します。](./designing-object-views/images/11.png)

1. ［**Save**］ をクリックします。

1. (オプション) 上記のプロセスを繰り返し、ビューにフィールドフィルターを追加します。

   ![ビューに複数のフィールドフィルターを追加します。](./designing-object-views/images/12.png)

1. ［**Save**］ をクリックします。

保存されると、ユーザーは追加されたフィールドを使用してオブジェクトエントリーをフィルタリングすることができます。

![ユーザーは、追加されたフィールドを使用してエントリーをフィルタリングすることができます。](./designing-object-views/images/13.png)

また、デフォルトのフィルターを追加している場合は、自動的にビューに適用されます。

![デフォルトのフィルターがビューに適用されます。](./designing-object-views/images/14.png)

## 追加情報

* [オブジェクトの作成と管理](../creating-and-managing-objects.md)
* [オブジェクトへのフィールドの追加](./adding-fields-to-objects.md)
* [オブジェクトレイアウトの設計](./designing-object-layouts.md)
