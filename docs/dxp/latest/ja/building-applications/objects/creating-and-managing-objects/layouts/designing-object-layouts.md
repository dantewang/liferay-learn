# オブジェクトレイアウトの設計

{bdg-secondary}`Liferay 7.4 U31+/GA31+ の場合`

レイアウトは、オブジェクトのエントリを作成および編集する際に、フィールドやリレーションシップがどのように表示されるかを定義します。 各レイアウトには、エントリー作成時または作成後に表示されるさまざまな要素を含む複数のタブを含めることができます。 レイアウトをデザインする際、2種類のタブがあります。

* [フィールドタブ](#adding-field-tabs) は、オブジェクト定義で直接作成されたフィールドや、1対多のリレーションシップから継承されたフィールドを表示することができます。

* [リレーションシップタブ](#adding-relationship-tabs) は、一対多または多対多のリレーションシップからのリレーションシップテーブルのみを表示することができます。

レイアウトを設計する際には、まずフィールドタブを追加し、その後他のタブを追加していく必要があります。 オブジェクトエントリーの作成時には、最初のタブのみが表示されます。 オブジェクトエントリーの編集時には、他のタブが表示されます。 レイアウトのデザインが完了したら、 [デフォルト](#selecting-a-default-layout) としてマークし、使用します。

```{important}
最初のタブはフィールドタブである必要があります。 このタブには、すべての必須オブジェクトフィールドを含める必要があります。 また、リレーションシップタブを追加できるのは、レイアウトにフィールドタブがある後だけです。 リレーションシップタブは、オブジェクトレイアウトの最初のタブにすることはできません。
```

## レイアウトを追加する

1. **グローバルメニュー**（![Global Menu](../../../../images/icon-applications-menu.png)）を開き、 ［**コントロールパネル**］ タブに移動して、 ［**オブジェクト**］ をクリックします。

1. 目的のオブジェクト定義の編集を開始します。

   ```{note}
   システムオブジェクトは、カスタムレイアウトに対応していません。 詳しくは、[システムオブジェクトの拡張](../extending-system-objects.md)を参照してください。
   ```

1. **レイアウト** タブを開き、 **追加**(![Add Button](../../../../images/icon-add.png)) をクリックします。

1. **名前** を入力し、 **保存** をクリックします。

   ![Go to the Layouts tab and click Add.](./designing-object-layouts/images/01.png)

これにより、 [フィールド](#adding-field-tabs) と [リレーション](#adding-relationship-tabs) のタブを追加できる空白のレイアウトが作成されます。

## フィールドタブの追加

1. **レイアウト** タブを開き、 **タブの追加** をクリックします。

   ![Go to the Layout tab and click Add Tab.](./designing-object-layouts/images/02.png)

1. **ラベル** を入力し、 **フィールド** の種類を選択し、 **保存** をクリックします。

   ラベルは、Liferay UIでのタブの表示名を決定します。

   ![ラベルを入力し、フィールドの種類を選択し、保存をクリックします。](./designing-object-layouts/images/03.png)

1. **ブロックの追加** をクリックし、 **ラベル** を入力し、 **保存** をクリックします。

   これにより、フィールドを追加するためのサブセクションが作成されます。 ラベルは、Liferay UIでのセクションの表示名を決定します。

   同じタブに複数のブロックを追加する場合は、この手順を繰り返してください。

   ![フィールドタブにブロックを追加する。](./designing-object-layouts/images/04.png)

1. **Add Field** for desired block をクリックし、オブジェクト **フィールド** を選択し、フィールドの **サイズ**（すなわち、1列、2列、または3列）を決定し、 **Save** をクリックします。

   ![Add Fieldをクリックし、フィールドを選択し、フィールドのサイズを決定し、Saveをクリックする](./designing-object-layouts/images/05.png)

   このステップを繰り返して、ブロックにフィールドを追加していきます。

   ![ブロックにフィールドを追加します。](./designing-object-layouts/images/06.png)

1. トグルスイッチでブロックを折りたたみ式にする。

   ![トグルスイッチでブロックを折りたたみ式にする。](./designing-object-layouts/images/07.png)

1. 必要なタブを追加した後、レイアウトの変更を保存します。

フィールドタブを追加した後、エンドユーザーがオブジェクトエントリにタグやカテゴリを適用できるように、カテゴリ分類ツールを追加することができます。 詳細は、 [Adding Categorization to Field Tabs](./adding-categorization-to-fields-tabs.md) を参照してください。

## リレーションシップタブの追加

1. 目的のレイアウトを編集し、 **レイアウト** タブを表示し、 **タブの追加** をクリックします。

   ![目的のレイアウトを選択し、「レイアウト」タブを開き、「タブの追加」をクリックします。](./designing-object-layouts/images/08.png)

1. **ラベル** を入力し、 **リレーションシップ** タイプを選択し、タブに表示したい **リレーションシップテーブル** を選択します。

   ラベルは、Liferay UIでのタブの表示名を決定します。

   ![タブの種類は、「関係」を選択し、表示する関係テーブルを選択します。](./designing-object-layouts/images/09.png)

1. ［**Save**］ をクリックします。

   ![レイアウトにリレーションシップタブを追加する。](./designing-object-layouts/images/10.png)

1. 必要なタブを追加した後、レイアウトの変更を保存します。

```{important}
オブジェクトが自身と多対多の関係を持っている場合、そのレイアウトに2つのリレーションシップタブを追加することができます。各タブは、関係の片側に対応しています。例えば、複数のチケットを互いに関連付けるチケットオブジェクトを考えてみましょう。チケットとその依存関係を追跡するために、2つのリレーションシップタブを定義することができます。1 つのタブは、現在のチケットが依存しているすべてのチケットをリストアップし、もう 1 つのタブは、現在のチケットに依存しているすべてのチケットをリストアップします。詳しくは、[オブジェクト関係の定義](../relationships/defining-object-relationships.md)をご覧ください。
```

## デフォルトのレイアウトの選択

レイアウトを設計したら、それをオブジェクトのデフォルトレイアウトとして設定することができます。 これにより、オブジェクトのエントリーの作成と編集に使用されることが保証されます。 そうでない場合は、オブジェクトは自動生成されたレイアウトを使用します。

次の手順を実行します：

1. 希望する **レイアウトを選択します** .

1. 基本詳細」タブで、 「**既定値としてマークする**」 をチェックします。

   ![デフォルトとしてマークをチェックし、 [保存]をクリックします。](./designing-object-layouts/images/11.png)

1. ［**保存**］ をクリックします。

オブジェクトのエントリーを作成・編集する際に、レイアウトが使用されるようになりました。

![このオブジェクトは、エントリーの作成と編集にデフォルトのレイアウトを使用します。](./designing-object-layouts/images/12.png)

## 追加情報

* [オブジェクトの作成](../creating-objects.md)
* [オブジェクトへのフィールドの追加](../fields/adding-fields-to-objects.md)
* [オブジェクトリレーションの定義](../relationships/defining-object-relationships.md)
