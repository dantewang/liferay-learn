# オブジェクトでフォームを使用する

{bdg-secondary}`Liferay 7.4+`

LiferayオブジェクトはFormsアプリケーションと統合されているので、ユーザー入力を受け取り、オブジェクトエントリを作成するためのフォームを設計することができます。 これを行うには、まず新しいフォームを追加し、オブジェクト・ストレージ・タイプを使用するように設定します。 次に、必要なオブジェクトを選択し、フォームをデザインし、そのフィールドを選択したオブジェクトのフィールドにマッピングします。

```{note}
ルールやバリデーションを含め、Formsのすべての機能がオブジェクトに対してサポートされています。 しかし、ユーザーはオブジェクトのリレーションシップをフォーム・フィールドにマッピングすることはできない。 オブジェクトのリレーションシップを含むカスタムレイアウトの作成方法については、[オブジェクトレイアウトのデザイン](./creating-and-managing-objects/layouts/designing-object-layouts.md)を参照してください。
```

## オブジェクト用のフォームを追加する

以下の手順に従って、オブジェクトエントリを作成するためのフォームを追加してください：

1. 目的のサイトに移動し、 **サイトメニュー**（![Site Menu](../../images/icon-menu.png)）を開いて、 ［**Content & Data**］ &rarr; ［**Forms**］ に移動します。

1. **追加** ボタン（![Add Button](../../images/icon-add.png)）をクリックします。

1. 新しいフォームの ［**設定**］ ボタン(![Configuration Button](../../images/icon-cog.png)）をクリックします。

1. **オブジェクト** ストレージタイプと、フォームで使用するオブジェクトを選択します。

   これは、選択されたオブジェクトのデータを保存するフォームを設定します。

   ![オブジェクト・ストレージ・タイプと目的のオブジェクトを選択する。](./using-forms-with-objects/images/01.png)

   ```{note}
   パブリッシュされたアクティブなオブジェクトのみが表示されます。 オブジェクトを複数のフォームに接続することはできますが、フォームを一度に接続できるのは1つのオブジェクトだけです。
   ```

1. ［**完了**］ をクリックします。

目的のオブジェクトにリンクしたら、フォームにフィールド要素を追加し、オブジェクトのフィールドにマッピングすることができます。

## フォーム項目をオブジェクトフィールドにマップする

以下の手順に従って、フォーム・フィールドをオブジェクト・フィールドにマッピングしてください。

1. 目的のオブジェクトフィールドと互換性のあるフォームフィールドを追加する。

   各タイプのオブジェクト・フィールドと互換性のあるフォーム・フィールドのリストについては、 [Field Compatibility Reference](#field-compatibility-reference) を参照してください。

1. ［**詳細設定**］ タブをクリックします。

1. 希望する **オブジェクト・フィールド** を選択する。

   ```{warning}
   必須オブジェクトフィールドにマッピングされると、フォームフィールドは自動的に必須とマークされます。 [フォームルール](../../process-automation/forms/form-rules/form-rules-overview.md)を使って[条件付きで必須フィールドを隠す](../../process-automation/forms/form-rules/example-using-hidden-fields-with-form-rules.md)場合、適切なデータが含まれていることを確認しなければなりません。 [定義済み値](../../process-automation/forms/creating-and-managing-forms/providing-help-text-and-predefined-values.md)と[オートフィルルール](../../process-automation/forms/form-rules/using-the-autofill-rule.md)を使うことで、必須の隠しフィールドに正しく入力されるようにすることができます。
   ```

   ![Advancedタブで、目的のオブジェクトフィールドを選択します。](./using-forms-with-objects/images/02.png)

1. 希望するすべてのオブジェクトフィールドがフォームフィールドにマッピングされるまで、上記のプロセスを繰り返します。

   ```{note}
   オブジェクト・フィールドは1つのフォーム・フィールドにしかマッピングできません。
   ```

   ![希望するすべてのオブジェクトフィールドをフォームフィールドにマッピングする。](./using-forms-with-objects/images/03.png)

1. フォームレイアウトをデザインします。 このプロセスの詳細については、 [フォーム](../../process-automation/forms.md) のドキュメントを参照してください。

1. フォームのデザインが完了したら、 ［**公開**］ をクリックしてフォームの作成を終了します。

   ```{important}
   オブジェクト フォームを公開する前に、すべての [マッピング要件](#mapping-requirements) を満たす必要があります。
   ```

パブリッシュ後、フォームは選択されたオブジェクトのオブジェクトエントリを作成するために使用することができます。

![オブジェクトエントリを作成するには、公開フォームを使用します。](./using-forms-with-objects/images/04.png)

## マッピング要件

オブジェクトストレージタイプのすべてのフォームには、次の要件があります。

* データ損失を防ぐため、すべてのフォームフィールドはオブジェクトフィールドにマッピングされなければならない。

* すべての必須オブジェクトフィールドは、フォームフィールドにマッピングされなければなりません。

無効なマッピングを使用してフォームを公開しようとすると、何が問題であるかを示すエラーメッセージが表示されます。

![無効なマッピングを使用してフォームを公開しようとすると、エラーメッセージが表示されます。](./using-forms-with-objects/images/05.png)

## フィールド互換性リファレンス

| オブジェクト項目タイプ             | 互換性のあるフォーム項目     |
|:----------------------- |:---------------- |
| 添付ファイル                  | &#10060;         |
| ブール値                    | ブール値(チェックボックス)   |
| 日付                      | 日付               |
| 小数（**以前はDouble**)         | 数値 &rarr; 小数     |
| 整数                      | 数値 &rarr; 整数     |
| 長い整数 (**以前はLong**)        | 数値 &rarr; 整数     |
| 長いテキスト（**以前はClob**)       | テキスト             |
| 選択リスト                   | リストから選択、１つだけ選択   |
| 小数の精度 (**以前はBigDecimal**) | 数値 &rarr; 小数     |
| リレーション                  | &#10060;         |
| リッチテキスト                 | リッチテキスト          |
| Text (**以前はString**)      | テキスト、複数選択、グリッド、色 |

## 関連トピック

* [オブジェクト](../objects.md)
* [オブジェクトの作成](./creating-and-managing-objects/creating-objects.md)
* [オブジェクトレイアウトの設計](./creating-and-managing-objects/layouts/designing-object-layouts.md)
