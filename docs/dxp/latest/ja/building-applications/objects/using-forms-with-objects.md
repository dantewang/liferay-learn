# オブジェクトでフォームを使用する

{bdg-secondary}`Liferay DXP 7.4以降で利用可能`

Liferay Objectはフォームアプリケーションと統合されているため、ユーザー入力を受け取ってオブジェクトエントリーを作成するためのフォームを設計できます。 これを行うには、最初に新しいフォームを追加し、オブジェクトストレージタイプを使用するように構成します。 次に、目的のオブジェクトを選択し、フォームをデザインして、そのフィールドを選択したオブジェクトのフィールドにマップします。

```{note}
ルールや検証を含むすべてのフォーム機能がオブジェクトでサポートされています。 ただし、ユーザーはオブジェクトリレーションをフォーム項目にマップすることはできません。 オブジェクトリレーションを含むカスタムレイアウトを作成する方法については、[Designing Object Layouts](./creating-and-managing-objects/designing-object-layouts.md)を参照してください。
```

## オブジェクト用のフォームを追加する

次の手順に従って、オブジェクトエントリーを作成するためのフォームを追加します。

1. 目的のサイトに移動し、 **サイトメニュー**（![Site Menu](../../images/icon-menu.png)）を開いて、 ［**Content & Data**］ &rarr; ［**Forms**］ に移動します。

1. **追加** ボタン（![Add Button](../../images/icon-add.png)）をクリックします。

1. 新しいフォームの ［**設定**］ ボタン（![Configuration Button](../../images/icon-cog.png)）をクリックします。

1. **オブジェクト** ストレージタイプと、フォームに接続する特定のオブジェクトの両方を選択します。

   これにより、選択したオブジェクトのデータを保存するようにフォームが構成されます。

   ![オブジェクトストレージタイプと目的のオブジェクトの両方を選択します。](./using-forms-with-objects/images/01.png)

   ```{note}
   公開されたアクティブなオブジェクトのみが表示されます。 また、フォームは一度に1つのオブジェクトにのみ接続できますが、オブジェクトは複数のフォームに接続できます。
   ```

1. ［**完了**］ をクリックします。

目的のオブジェクトにリンクしたら、フィールド要素をフォームに追加して、オブジェクトのフィールドにマップできます。

## フォーム項目をオブジェクトフィールドにマップする

次の手順に従って、フォーム項目をオブジェクトフィールドにマップします。

1. フォームにフィールド要素を追加します。

   ```{important}
   オブジェクトフィールドは、[互換性のあるフィールドタイプ](#field-compatibility-reference)にのみマップできます。

   必須のオブジェクトフィールドにマップされると、フォーム項目タイプが自動的に設定されます。 
   ```

1. ［**詳細設定**］ タブをクリックします。

1. 目的の **オブジェクトフィールド** を選択します。

   ![［詳細設定］タブで、目的のオブジェクトフィールドを選択します。](./using-forms-with-objects/images/02.png)

1. 必要なすべてのオブジェクトフィールドがフォーム項目にマップされるまで、上記のプロセスを繰り返します。

   ```{note}
   オブジェクトフィールドは、1つのフォーム項目にのみマップできます。
   ```

   ![必要なすべてのオブジェクトフィールドをフォーム項目にマップします。](./using-forms-with-objects/images/03.png)

1. フォームレイアウトをデザインします。 フォームのデザインの詳細については、[フォーム](../../process-automation/forms.md)のドキュメントを参照してください。

1. フォームのデザインが完了したら、 ［**公開**］ をクリックしてフォームの作成を終了します。

   ```{important}
   オブジェクトフォームを公開する前に、すべての[マッピング要件](#mapping-requirements)を満たす必要があります。
   ```

公開後、フォームを使用して、選択したオブジェクトのオブジェクトエントリーを作成できます。

![公開されたフォームを使用して、オブジェクトエントリーを作成します。](./using-forms-with-objects/images/04.png)

## マッピング要件

オブジェクトストレージタイプのすべてのフォームには、次の要件があります。

* データの損失を防ぐために、すべてのフォーム項目はオブジェクトフィールドにマップする必要があります。

* 必要なすべてのオブジェクトフィールドは、フォーム項目にマップする必要があります。

無効なマッピングを使用してフォームを公開しようとすると、何が問題であるかを示すエラーメッセージが表示されます。

![無効なマッピングを使用してフォームを公開しようとすると、エラーメッセージが表示されます。](./using-forms-with-objects/images/05.png)

## フィールド互換性リファレンス

{bdg-secondary}`Liferay 7.4 U20以降の場合`

| オブジェクト項目タイプ             | 互換性のあるフォーム項目     |
|:----------------------- |:---------------- |
| 添付ファイル                  | &#10060;         |
| ブール値                    | ブール値(チェックボックス)   |
| 日付                      | 日付               |
| 小数（**以前はDouble**)         | 数値 &rarr; 小数     |
| 整数                      | 数値 &rarr; 整数     |
| 長い整数 (**以前はLong**)        | 数値 &rarr; 整数     |
| 長いテキスト（**以前はClob**)       | テキスト             |
| 選択リスト                   | リストから選択、１つだけ選択   |
| 小数の精度 (**以前はBigDecimal**) | 数値 &rarr; 小数     |
| リレーション                  | &#10060;         |
| リッチテキスト                 | リッチテキスト          |
| Text (**以前はString**)      | テキスト、複数選択、グリッド、色 |

## 追加情報

* [Objects](../objects.md)
* [オブジェクトの作成](./creating-and-managing-objects/creating-objects.md)
* [オブジェクトレイアウトの設計](./creating-and-managing-objects/designing-object-layouts.md)
