# 権限設定フレームワークの統合

{bdg-secondary}`liferay 7.4+`

公開されたオブジェクトは、Liferayの権限設定フレームワークと自動的に統合されます。 [アプリケーション](#application-permissions) および [リソース](#resource-permissions) 権限で、オブジェクトとそのエントリーへのユーザー アクセスを管理できます。 ロールベースのアクセス制御により、適切なユーザーのみがアプリケーションのデータを表示・使用できるようにすることができます。

デフォルトでは、カスタム・オブジェクト権限はユーザ・ロールに自動的に割り当てられません。 これは、オブジェクトのデータが誤って公開されるのを防ぐためである。 アクセスを許可するには、必要なロールにオブジェクトの権限を手動で割り当てます。

ロールパーミッションを定義する場合、アクティブオブジェクトはそのスコープとパネルリンクに従って表示されます。

```{tip}
サイト・スコープのオブジェクトでは、すべてのサイトに対してパーミッションを付与するか、特定のサイトに対してのみパーミッションを付与するかを決定できます。
```

```{important}
アカウントと組織のロールは、アカウント制限が有効になっているオブジェクトでのみサポートされています。 それ以外の場合は、オブジェクトの権限の割り当てに標準ロールとサイトロールのみを使用することができます。 詳細については、 [Account Restriction and User Roles](../creating-and-managing-objects/using-system-objects-with-custom-objects/restricting-access-to-object-data-by-account.md#account-restriction-and-user-roles) を参照のこと。
```

## アプリケーションの権限

アプリケーションの権限は公開オブジェクト自体へのアクセス権限を付与するもので、 [リソース関連の権限は含まれません](#resource-permissions) 。 各オブジェクトには、定義されたスコープに応じて、次の標準アプリケーションの権限が含まれます。

| 権限                                    | 説明                                                                                       |
| :------------------------------------ | :--------------------------------------------------------------------------------------- |
| コントロールパネルでのアクセス（※企業範囲のみ）              | グローバル・メニュー( ![グローバル・メニュー](../../../images/icon-applications-menu.png))のオブジェクトにアクセスする。    |
| サイトおよびアセットライブラリ管理でのアクセス（**サイトスコープのみ**）。 | サイトメニュー( ![サイトメニュー](../../../images/icon-product-menu.png))またはアセットライブラリ内のオブジェクトにアクセスします。 |
| 設定                                    | 該当なし                                                                                     |
| 権限の設定                                 | オブジェクトに対するアプリケーションの権限を表示し変更します。                                                          |
| 詳細設定                                  | 該当なし                                                                                     |
| **表示** | オブジェクトのアプリケーションページを表示します。                                                                | 

* また、マッピングされたコンテンツを表示したり、ページの編集中にオブジェクト定義にマッピングされたフォームコンテナを追加/変更したり、その他のアクションを実行したりするためにも、表示パーミッションが必要です（例：表示ページテンプレート、情報テンプレート、サイトナビゲーションメニューの作成）。 これがないと、コレクションおよびコンテンツ表示は、ビューおよびプレビューモードでは表示されません。

## リソース権限

リソース権限は、カスタム・オブジェクト定義のエントリを表示、作成、操作するためのアクセス権を付与します。 これらの権限の中には、 [オブジェクトエントリーの作成に関連](#creating-entries) するものもあれば、 [既存のエントリーに対するアクションを実行する](#acting-on-existing-entries) ものもあります（例：編集、削除）。

### エントリーの作成

| 権限             | 説明                                                                                               |
| :------------- | :----------------------------------------------------------------------------------------------- |
| オブジェクトエントリーを追加 | エントリーを作成します。 このパーミッションは、関連オブジェクトのフォームコンテナを表示するために必要です。 これがないと、フォームコンテナはビューモードとプレビューモードでは表示されません。 |
| 権限の設定          | エントリーの作成に関する権限を表示・管理します。                                                                         |

### 既存のエントリーの操作

| 権限            | 説明                                                                                                                                                                                                                                                                      |
|:------------- |:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 削除            | エントリーを削除します。                                                                                                                                                                                                                                                            |
| オブジェクトエントリー履歴 | REST API を使用して、 [クエリー・エントリー履歴](./using-custom-object-apis/using-nestedfields-to-audit-entry-history.md). このパーミッションは、 [Entry History がオブジェクト定義で有効](../creating-and-managing-objects/auditing-object-events.md#enabling-entry-history) ）になっている間のみ利用可能です。 |
| 権限の設定         | 個々のエントリーの権限を表示・変更します。                                                                                                                                                                                                                                                   |
| 更新            | エントリーを更新します。                                                                                                                                                                                                                                                            |
| 表示            | エントリーを参照します。                                                                                                                                                                                                                                                            | 

```{note}
オブジェクト・エントリの作成者には、オーナー・ロールが自動的に割り当てられ、上記の権限が付与されます。
```

リソースパーミッションはオブジェクトに追加された[スタンドアロンアクション](../creating-and-managing-objects/actions/using-manual-actions.md)ごとに生成されます。アクションを起動できるロールを管理するのに便利で、`action.[actionName]`パターンを使って命名されます。

## 個々のオブジェクトエンティティに対する権限の管理

{bdg-secondary}`7.4 U10+/GA14+用`。

カスタムオブジェクトを使用すると、個々のデータベースエンティティに対する権限を管理し、オブジェクトデータへのアクセスをコントロールすることができます。

次の手順を実行します：

1. 目的のカスタムオブジェクトに移動します。

1. 目的のエンティティの **Actions** ボタン(![Actions Button](../../../images/icon-actions.png)) をクリックし、 **Permissions** を選択します。

   ![Click the Actions button for the desired entity and select Permissions.](./permissions-framework-integration/images/01.png)

1. チェックボックスを使用して、 [エントリーの操作](#acting-on-existing-entries) 権限を必要なロールに付与します。

   ```{note}
   Roles 管理アプリケーションで定義された権限は、エンティティ・レベルで定義された権限を上書きします。
   ```

   ![Use the checkboxes to assign permissions to the desired roles.](./permissions-framework-integration/images/02.png)

1. ［**保存**］をクリックします。

## 関連トピック

* [オブジェクト統合を理解する](../understanding-object-integrations.md)
* [オブジェクトの概要](../../objects.md)
* [オブジェクトの作成](../creating-and-managing-objects/creating-objects.md)
* [アカウントによるオブジェクト・データへのアクセスの制限](../creating-and-managing-objects/using-system-objects-with-custom-objects/restricting-access-to-object-data-by-account.md)
