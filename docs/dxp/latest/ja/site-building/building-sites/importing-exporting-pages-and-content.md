# サイトとコンテンツのインポート/エクスポート

エクスポート/インポートでは、サイトやアプリのデータをLAR（Liferay Archive）としてエクスポート、復元することができます。 エクスポート/インポートが使われる主な場所は、サイトとアプリです。 アプリのデータのエクスポート/インポートについては、 [ウィジェットコンテンツのエクスポート/インポート](../creating-pages/using-widget-pages/configuring-widgets/exporting-importing-widget-data.md)で詳しく説明しています。 ここでは、サイトのコンテンツやページをエクスポート、インポートする方法について説明します。

## サイトLARのプロパティと要件

LARにはこのようなプロパティと要件があります。

* LARはバージョンによって異なります。 各サーバーのLiferay Portalのバージョンが同じであれば、別のLiferay Portalサーバー上のサイトにインポートすることができます。
* いくつかの名前の衝突は自動的に処理されます。 例えば、インポートするLARとサイトの両方に同じフレンドリURLのページがある場合、フレンドリURLに数字が追加され、衝突が起こらなくなるまで増加します。 カテゴリー名がぶつかる場合も同様です。
* 最新のLARを使用してサイトを復元することができますが、そのためにはサイトを完全に削除してから、同じ名前の新しいサイトを作成してLARをインポートする必要があります。 これにより、LARと本サイトの両方に存在するコンテンツの間でデータが衝突する可能性を回避できます。

```{note}
LARを定期的にエクスポートすることは、バックアップソリューション*ではなく*、2つの環境間で情報を移行するためにのみ使用してください。 Liferay Portalのバックアップについては、[Liferay Portalインストールのバックアップ](../../installation and-upgrades/maintaining-a-liferay-installation/backing-up.md) の項を参照してください。
```

## ページのインポートとエクスポート

以下の手順で、サイトのページのエクスポートとインポートを行います。

1. サイトメニューを開き、 *［公開設定］* &rarr; *［エクスポート］*に移動します。

1. *追加* アイコンをクリックします（![Add icon](../../images/icon-add.png)）。

    *［New Custom Export］* のページが読み込まれます。 サイトからエクスポートしたいページやコンテンツを選択できます。

    * サイトのページ（正確に選択できます）
    * ページ設定
    * テーマ
    * テーマ設定
    * ロゴ
    * アプリケーション設定
    * アプリケーションの内容
    * アーカイブされたセットアップ
    * ユーザー設定

    ![新しいカスタムエクスポートを作成して、サイトからのエクスポート内容を指定します。](./importing-exporting-pages-and-content/images/01.png)

1. タイトルを入力します。

1. *ページ*で、エクスポートするページと設定を選択します。

1. *［Content］* カテゴリで、 *［All］* を選択してすべてのコンテンツをエクスポートするか、日付の範囲や時間を指定してエクスポートするコンテンツをフィルタリングします。

    ```{note}
    ラジオセレクターの*Choose*やリンクの*Change*を選択すると、選択できるオプションのチェックボックスが表示されます。 また、ドキュメントとメディアライブラリ、掲示板、Webコンテンツなどのアプリケーションコンテンツを選択してエクスポートすることもできます。 使っているテーマをエクスポートすることもできます。
    ```

1. エクスポートしたページやコンテンツの権限を含めるかどうかを選択します。

1. *［エクスポート］* をクリックします。 メニューは自動的に *［プロセス］* タブに切り替わり、エクスポートされたLARファイルのステータスが表示されます。

1. *ダウンロード* アイコン（![Download](../../images/icon-download.png)）を選択して、エクスポートをローカルマシンにダウンロードし、保管のために安全な場所にコピーするか、Liferayポータルの別のインストールにインポートします。

1. 再構築またはサイトを本バージョンに戻す場合は、 *［公開設定］*メニューから*［インポート］* ボタンをクリックすることで、このファイルをインポートすることができます。 また、点線部分の内側にLARファイルをドラッグすると、インポート処理が実行されます。

## テンプレートのエクスポートの作成

ページやコンテンツをエクスポートするたびにエクスポートプロセスを手動で作成する代わりに、エクスポートテンプレートを作成してエクスポートプロセスの設定を保存し、再利用することができます。 エクスポートテンプレートを作成するには、以下の手順で行います。

1. サイトメニューを開き、 *［Publishing］* &rarr; *［Export］*に移動します。

1. 画面右上の *オプション*アイコンを選択（![Options](../../images/icon-options.png)）し、 *［Export Templates］*を選択します。

    ![エクスポートテンプレートを作成して、エクスポートプロセスの設定を保存することができます。](./importing-exporting-pages-and-content/images/03.png)

1. *追加*ボタン（![Add Export Template](../../images/icon-add.png)）をクリックします。

1. テンプレートには、 *名前* と *説明* を指定します。

1. エクスポートプロセスの設定オプションを入力します。

1. *［保存］* をクリックします。

作成したテンプレートは、 *［テンプレートのエクスポート］* メニューから使用することができます。

## エクスポートテンプレートを使う

エクスポートテンプレートを使用するには、以下の手順で行います。

1. テンプレートのエクスポートの横に *アクション* （![Actions](../../images/icon-actions.png)）メニューをクリックし、 *［エクスポート］*を選択します。

    ページとそのコンテンツをエクスポートするためのフィールドとオプションが自動的に入力されます。

1. エクスポートに名前をつけます。

1. *［エクスポート］* をクリックすると、LARファイルが生成されます。
