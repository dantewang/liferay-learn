# ウィジェットデータのエクスポート/インポート

本サイトの他の部分のコンテンツに関係なく、特定のウィジェットインスタンスからデータをエクスポートする必要がある場合があります。 多くのウィジェットは、データを個別にエクスポートまたはインポートすることができます：

- ブログ
- ブックマーク
- 動的データリスト
- フォーム
- ナレッジベース(管理）
- 掲示板
- Webコンテンツ
- Wikiノード
- その他

ウィジェットデータをエクスポートすると、 `.lar` ファイルが作成され、保存して同じタイプの別のウィジェットにインポートすることができます。

```{important}
ウィジェット固有の `.lar` ファイルとサイト固有の `.lar` ファイルを混同しないように注意してください。 サイトページデータのインポート/エクスポートについては、[サイトページとコンテンツのエクスポート/インポート](.../.../sites/exporting-importing-site-pages-and-content.md） を参照してください。
```

ウィジェットコンテンツをエクスポート/インポートするには、2つの方法があります：

1. ウィジェットの管理領域を使用します。
1. ウィジェットのページにアクセスしてください。

エクスポート/インポートメニューの動作はどちらも同じですが、管理領域にはウィジェットの対応と異なるデータが含まれている場合があります(例：Liferay DXP MenuのWeb Content AdminとWeb Content Displayウィジェットはエクスポート/インポートに同じコンテンツを提供しません）ので、選択には注意が必要です。

ウィジェットの管理領域からデータをエクスポートまたはインポートする場合、

1.  Liferay DXPメニューから、ウィジェットの指定エリアに移動します。 例えば、Web コンテンツのデータをエクスポートする場合、 *コンテンツとデータ* &rarr; *Web コンテンツ*にアクセスします。

1.  ページ右上の *オプション* (![Options](../../../../images/icon-actions.png)) をクリックし、 *エクスポート/インポート*を選択します。

1.  *［エクスポート］* または *［インポート］* タブを選択し、それぞれのプロセスの設定を開始します。

    ![ウィジェットのオプションメニューを選択すると、ウィジェットの管理機能である*エクスポート / インポート*機能にアクセスできます。](./exporting-importing-widget-data/images/01.png)

ウィジェットからデータをエクスポートまたはインポートする場合、

1.  エクスポート/インポートするウィジェットがページ上で利用可能であることを確認します。 *追加* (![Add Button](../../../../images/icon-add.png)) &rarr; *ウィジェット* メニューからウィジェットを追加することができます。

1.  ウィジェットの*オプション*アイコン (![Options](../../../../images/icon-app-options.png)) を選択し、 *［Export/Import］*を選択します 。

1.  *［エクスポート］* または *［インポート］* タブを選択し、それぞれのプロセスの設定を開始します。

    ![ウィジェットのオプションメニューを選択すると、ウィジェットの*エクスポート / インポート*機能にアクセスすることができます。](./exporting-importing-widget-data/images/02.png)

*エクスポート/インポート*メニューへの移動方法がわかったので、エクスポート処理を探ってみましょう。

## ウィジェットデータのエクスポート

ウィジェットデータをエクスポートするには、 *［新規エクスポートプロセス］*タブ(デフォルト）を選択して、新しいエクスポートプロセスを作成します。 いくつかのエクスポートオプションを設定することができます。

最初に、ウィジェットの構成設定をエクスポートするかどうかを選択できます。 一部のウィジェットでは、コンフィギュレーションエクスポートにコンテンツが含まれる場合があります。 例えば、Webコンテンツ記事を表示するWebコンテンツの表示ウィジェットでは、コンテンツが選択されていないにもかかわらず、エクスポートすると記事もエクスポートされます。 これは、Webコンテンツの表示ウィジェットを公開する際にも適用され、設定された記事はウィジェットと一緒に公開されます。

次に、エクスポートしたいコンテンツの［日付の範囲］を選択します。 指定した日付の範囲内にウィジェットに追加されたコンテンツは、 `.lar` ファイルに含まれます。 以下の日付の範囲の選択が可能です。

**すべて：** 作成日や最終更新日に関係なく、すべてのコンテンツを公開します。

**日付の範囲：** 指定された日付の範囲に基づいたコンテンツを公開します。 開始日時と終了日時のウィンドウを設定することができます。 そのウィンドウ内に作成または変更されたコンテンツが公開されます。

**最後...：** 現在の時刻から設定された時間に基づいてコンテンツを公開します。 例えば、日付の範囲を現在の時刻から過去48時間に設定することができます。

*コンテンツ* にチェックを入れることで、特定のコンテンツを選んでエクスポートすることができます。 収録するメタデータの種類を選択できるオプションが表示されます。 例えば、不要な参照コンテンツを持つWikiページがある場合、 *Wiki Pages* チェックボックスをチェックし、 *Referenced Content* チェックボックスのチェックを外してください。 また、コンテンツの種類を選択することも可能です。 Liferayインスタンスでおなじみのコンテンツタイプに、コメントとレーティングがあります。 これらのエンティティを `.lar` ファイルに含める場合は、 *Change* を選択し、チェックリストから選択してください。 コンテンツタイプの管理の詳細については、 [ステージングでのコンテンツタイプの管理](../../../../publishing-tools/staging/managing-data-and-content-types-in-staging.md)を参照してください。

3つ目は、個々の削除をエクスポートするかどうかを選択できることです。 コンテンツタイプに対して行われた削除操作を、LARファイルにエクスポートします。

最後に、エクスポートしたコンテンツの権限を含めるかどうかを選択できます。 *［権限をエクスポート］* セレクタを有効にすると、エクスポートされたウィジェットウィンドウに割り当てられた権限が含まれるようになります。

ウィジェットのデータをエクスポートしたら、*［最新バージョンと過去バージョン］*タブに切り替えて、進行中のエクスポート処理と過去のエクスポートの履歴を表示します。 また、エクスポートした`.lar`ファイルはこのタブからダウンロードすることができます。

## ウィジェットデータのインポート

ウィジェットデータをインポートするには、ファイルピッカーでLARを選択するか、点線の間にファイルをドラッグ＆ドロップしてください。

![ウィジェットデータをインポートする場合、ファイルエクスプローラーでLARファイルを選択するか、点線の間にファイルをドラッグ＆ドロップすることができます。](./exporting-importing-widget-data/images/03.png)

あなたのLARファイルがアップロードされ、レビュー用に表示されます。 *［Continue］*をクリックします。

LARファイルのアップロードと確認が完了すると、エクスポート時と同様の画面が表示されます。 ここでは、各セクションのオプションと説明について説明します：

### 削除

**インポート前にアプリケーションのデータを削除する：** チェックすると、インポート処理前にアプリケーションで作成されたすべてのデータが削除されます。 他のアプリケーションがこのデータを参照する可能性がありますので、ご注意ください。 このプロセスは元に戻すことができません。 不確かな場合は、まずエクスポートをしてみてください。

**個々の削除を複製する：** チェックすると、コンテンツタイプに対して実行された削除操作がターゲットサイトで複製されます。

### 権限設定

**インポート権限：** チェックすると、エクスポートしたエントリーに割り当てられたパーミッションが含まれます。

### データの更新

**ミラーリング：** インポートされたLAR内のすべてのデータとコンテンツは、ソースへの参照を維持しながら、初めて新しく作成されます。 同じソースから続けてインポートすると、新しいエントリーが作成されるのではなく、エントリーが更新されます。

**上書きのミラーリング：** ミラーリング戦略と同じですが、同じ名前のドキュメントやイメージが見つかった場合は上書きされます。

**新規としてコピーします：** インポートされたLAR内のすべてのデータとコンテンツは、LARがインポートされるたびに、現在のサイト内に新しいエントリとして作成されます。

### コンテンツの作成者

**元の作者を使用：** インポートしたコンテンツの作成権を可能な限り保ちます。 元々の作成者が見つからない場合、現在のユーザーを作成者にします。

**現在のユーザーを作成者にする：** インポートしたすべてのコンテンツの作成者として、現在のユーザーを割り当てます。

適切なオプションを選択したら、 *インポート*を選択し、ウィジェットのデータをインポートして使用できるようにします。

## 追加情報

- [ウィジェット間の通信](./communication-between-widgets.md)
- [サイトページとコンテンツのエクスポート/インポート](../../../../sites/exporting-importing-site-pages-and-content.md)
