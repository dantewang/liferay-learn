# フラグメントの変更のプロパゲート

デフォルトでは、カスタムフラグメントのコードに加えられた[変更](../../../developer-guide/developing-page-fragments/using-the-fragments-editor.md)は、フラグメントのデプロイされたインスタンスにプロパゲートされません。 **フラグメントプロパゲーション** を使用すると、次の2つの方法のいずれかでフラグメントインスタンスに変更をプロパゲートできます。

* [フラグメントの個々のインスタンスに対して手動で](#manually-propagating-changes)
* [フラグメントのすべてのインスタンスに対して自動的に](#automatically-propagating-changes)

```{important}
データの上書きを避けるため、編集可能なフィールドに加えられた変更は、フラグメントに直接伝搬させることはできません。 ただし、フラグメントのフィールドIDを変更することで、強制的に伝搬させることができます。 プロパゲートされると、フィールドのコンテンツは表示されなくなりますが、古いフィールドIDを使用してデータベースからコンテンツを取得できます。 詳しくは、開発者向けドキュメントの [フラグメント固有のタグと属性のリファレンス](../../../developer-guide/reference/fragments/fragment-specific-tags-reference.md) をご覧ください。
```

## 変更を手動でプロパゲートする

以下の手順に従って、フラグメントの個々のインスタンスに変更を手動で反映させます。

1. **サイトメニュー**（![Site Menu](../../../../images/icon-product-menu.png)）を開き、 ［**デザイン**］ &rarr; ［**フラグメント**］ に移動します。

1. 目的のフラグメントの **Fragment Set** に移動します。

1. 目的のフラグメントの **Actions** ボタン (![Actions Button](../../../../images/icon-actions.png)) をクリックし、 **View Usages** を選択します。
   
   ![フラグメントのActionsボタンをクリックし、View Usagesを選択します。](./propagating-fragment-changes/images/01.png)  

   ```{tip}
   View Usages*オプションが利用できない場合、そのフラグメントは使用中ではありません。
   ```

1. Usages and Propagation ページで、最新バージョンに更新したいフラグメントインスタンスにチェックを入れます。
   
   表では、ページやテンプレートが **前バージョン** と **最新バージョン** のどちらを使用しているかを確認することができます。
   
   ![更新するフラグメントインスタンスを選択します。](./propagating-fragment-changes/images/02.png)

1. **Propagate** ボタン(![Propagate](../../../../images/icon-propagate.png))をクリックすると、選択したフラグメントのインスタンスが更新されます。

編集不可のフィールドに加えられた変更は、選択されたフラグメントインスタンスに自動的に伝搬されます。

## 変更を自動でプロパゲートする

以下の手順で、フラグメントの全インスタンスに変更を自動的に反映させることができます。

```{warning}
自動プロパゲーションは、本番環境において、誤字や不正確なコンテンツが公開されるなど、意図しない結果を招く可能性があります。 自動プロパゲーションは、テストまたは開発目的でのみ使用してください。
```

1. **グローバルメニュー**(![Global Menu](../../../../images/icon-applications-menu.png)) を開き、 **コントロールパネル** タブをクリックし、 **設定** &rarr; **システム設定** に進みます。

1. ［**コンテンツとデータ**］ セクションで、 ［**ページ フラグメント**］ をクリックします。

1. ［**フラグメントの変更を自動的にプロパゲート**］ ボックスをオンにします。
   
   ![［フラグメントの変更を自動的にプロパゲート］ボックスをオンにします。](./propagating-fragment-changes/images/03.png)

1. ［**保存**］ をクリックします。

有効にすると、フラグメントの編集不可能なフィールドに加えられた変更は、フラグメントのすべてのインスタンスに自動的に伝搬されます。

## 関連トピック

* [フラグメントの使用](../using-fragments.md)
* [Fragment Styles Reference](./configuring-fragments/styles-reference.md)
* [コンテントページの使用](../../using-content-pages.md)
