# ページテンプレートの作成

{bdg-secondary}`Liferay DXP/Portal 7.3以降で利用可能`

**ページテンプレート** を使えば、定義済みのレイアウトとコンテンツに基づいてページを作成できます。 すぐに使用できるいくつかの基本的なページテンプレートがあります。

![基本的なページテンプレートが用意されている。](./creating-a-page-template/images/01.png)

また、 [コンテンツページ](../using-content-pages.md) テンプレートと [ウィジェットページ](../understanding-pages/understanding-pages.md#widget-pages) テンプレートを独自に作成することもできます。

```{note}
Liferay DXP 7.4以降の場合、ページテンプレートコレクションは、Liferay UIではページテンプレートセットと呼ばれます。
```

## 新規のページテンプレートの作成

以下のステップは、ウィジェットおよびコンテンツページテンプレートの作成と使用方法を示しています。

1. **サイトメニュー**( ![Site Menu](../../../images/icon-product-menu.png) ) を開き、 **デザイン** &rarr; **ページテンプレート** に移動します。

1. ［**Page Templates**］ タブを選択します。

1. **New** をクリックし、ページテンプレートを整理するための新しいページテンプレートセットを作成します。

   ![ページテンプレート・セットを作成するには、ページテンプレート・タブを使用します。](./creating-a-page-template/images/02.png)

1. **Add**( ![Add page template icon](../../../images/icon-add.png) ) をクリックし、 **Content Page Template** または **Widget Page Template** を選択する。

1. 名前を入力します。

1. ［**保存**］ をクリックします。

新しいページテンプレートが表示されます。 [Building Content Pages](../using-content-pages/adding-elements-to-content-pages.md) の指示に従って、コンテンツページテンプレートを設定します。 同様に、ウィジェットページテンプレートを作成するには、 [ウィジェットページ](../understanding-pages/understanding-pages.md#widget-pages) を参照してください。

**Actions**(![Actions icon](../../../images/icon-actions.png)) &rarr; **Edit** をクリックすると、いつでもページテンプレートを編集できます。

```{tip}
新しく作成したページテンプレートをプレビューすることができます。 ページテンプレートページで、*アクション* (![アクションアイコン](../../../images/icon-actions.png))を選択します。 &rarr; プレビューしたいテンプレートの*プレビュー*を選択します。
```

## 既存ページからのページテンプレートの作成

また、編集中のページからページテンプレートを作成することもできます。 新しいページテンプレートはフラグメントとウィジェットのすべての設定を保持します。 これにより、サイトを拡張する間の時間を節約できる。

ページからページテンプレートを作成するには、以下の手順に従ってください：

1. [ページを編集中](../using-content-pages/adding-elements-to-content-pages.md)、ページの右上にある **オプション**( ![Options](../../../images/icon-options.png) ) をクリックし、 **ページテンプレートに変換** を選択します。

   ![オプションメニューのページテンプレートに変換をクリックすると、編集中のページが新しいページテンプレートに変わります。](./creating-a-page-template/images/03.png)

1. 画面に表示されるモーダルで、既存のページセットを選択するか、 **新しいセットで保存** を選択して、ページテンプレート用の新しいページテンプレートセットを作成します。

   ![ここでは、新しいページテンプレートの基本情報を設定することができます。](./creating-a-page-template/images/04.png)

   ページテンプレートセットがない場合は、新しいページテンプレートセット用に、 **Name（名前**） 、オプションで **Description（説明**） 。 **Save** をクリックして、新しく作成したテンプレートセットのテンプレートとしてページを保存します。

1. ［**Save**］ をクリックします。

選択したページテンプレートセットには、現在編集中のページに基づいた新しいページテンプレートが下書きとして用意されています。

```{important}
新しいページで使用するには、このページテンプレートのドラフトを公開する必要があります。
```

## 新規ページテンプレートの共有

デフォルトでは、ページテンプレートの作成者だけが使用できる。

新しく作成したページテンプレートへのアクセス権を他のユーザーに付与するには、次の手順に従います。

1. ページテンプレートのアクションメニュー（ ![Actions icon](../../../images/icon-actions.png) ）から、 **Permissions** を選択します。

   ![権限を設定している間、他のユーザーが新しく作成したページテンプレートにアクセスできるようにします。](./creating-a-page-template/images/05.png)

1. ページテンプレートにアクセスさせたいロールの **閲覧** 権限をチェックします。 ページを作成できるすべてのユーザーがページテンプレートを使用できるようにしたい場合、ユーザーロールの **View** パーミッションをチェックしてください。

1. ［**保存**］ をクリックします。

指定されたロールを持つユーザーは、ページテンプレートにアクセスできます。

## ウィジェットページの変更のプロパゲート

ウィジェットページテンプレートからページを作成するとき、変更はデフォルトでページテンプレートから継承されるので、将来の変更はページテンプレートを使用するページに **自動的に** 伝搬されます。サイト管理者は [個別ページの設定](../page-settings/configuring-individual-pages.md#general) を通じて、この動作を無効にできます。

## コンテントページの変更のプロパゲート

コンテンツページテンプレートを使用して作成された場合、コンテンツページ **の変更が自動的に** に反映されません。 ただし、コンテンツページで使用されているフラグメントには変更を反映させることができます。 詳細については、[フラグメントの変更のプロパゲート](../page-fragments-and-widgets/using-fragments/propagating-fragment-changes.md)を参照してください。

## 他のサイトとのページテンプレートの共有

ページテンプレートは、ページと同じ手順で他のサイトと共有することができます。 その方法は、「 [サイトページとコンテンツのエクスポート/インポート](../../sites/exporting-importing-site-pages-and-content.md) 」の説明に従ってください。

## ステージングとページテンプレート

```{important}
7.3 GA1以降、ステージング機能は [メンテナンスモード](../../../installation-and-upgrades/upgrading-liferay/reference/maintenance-mode-and-deprecations-in-7-3.md) になっています。
```

ステージングが有効になっている場合、ウィジェットページテンプレートの変更はステージングされたページに自動的に伝搬されます。 これらの変更は、ページが本番環境に公開される前に承認される必要があります。 このため、ステージングされたページへのウィジェットページテンプレートの変更の自動伝搬をオフにすることはできず、 **Inherit Changes** セレクタは表示されません。

## 関連トピック

- [サイトにページを追加する](./adding-a-page-to-a-site.md)
- [ページテンプレートのエクスポートとインポート](./exporting-and-importing-page-templates.md)
- [フルページアプリケーションページタイプの使用](./using-the-full-page-application-page-type.md)
