# ページテンプレートの作成

> 対応可能：Liferay DXP/Portal 7.3以降

ページテンプレートを使用すると、事前定義されたレイアウトとコンテンツに基づいてページを効率的に作成できます。 すぐに使用できるいくつかの基本的なページテンプレートがあります。

![基本的なページテンプレートを使用できます。](./creating-a-page-template/images/01.png)

以下で説明するように、独自の [コンテントページ](../using-content-pages.md) テンプレートと [ウィジェットページ](../understanding-pages/understanding-pages.md#widget-pages) テンプレートを作成することもできます。

```{note}
Liferay DXP 7.4以降の場合、ページテンプレートコレクションは、Liferay UIではページテンプレートセットと呼ばれます。
```

## 新規のページテンプレートの作成

以下の手順は、ウィジェットおよびコンテントページテンプレートを作成して使用する方法を示しています。

1. プロダクトメニューを開き、 ［**Site Builder**］ &rarr; ［**Pages**］ に移動します。

1. ［**Page Templates**］ タブを選択します。

1. ［**New**］ をクリックし、新しいセットを作成してページテンプレートを整理します。

    ![新規のページテンプレート設定の作成。](./creating-a-page-template/images/02.png)

1. **追加** アイコン（![Add Page Template](../../../images/icon-add.png)）をクリックし、 **ウィジェットページテンプレート** または **コンテントページテンプレート** を選択します。 セット内のページテンプレート横の **アクション** アイコン(![Actions](../../../images/icon-actions.png))をクリックして ［**構成**］ を選択すれば、いつでもページテンプレートの構成に戻ることができます。

1. 名前を入力します。

1. ［**Save**］ をクリックします。

1. 新しいページテンプレートに自動的に移動します。 [ウィジェットページ](../understanding-pages/understanding-pages.md#widget-pages) の指示に従って、ウィジェットページテンプレートを作成します。 同様に、コンテントページテンプレートを構成するには、[Building Content Pages](../using-content-pages/adding-elements-to-content-pages.md) を参照してください。

## 既存のページからページテンプレートを作成する

また、編集中のページから「ページテンプレート」を作成することもできます。 新しいページテンプレートは、作成時にフラグメントとウィジェットの設定をすべて同じにします。 これにより、サイトを拡張する際に再利用する可能性のあるページについて、より多くのテンプレートを作成する時間を節約することができます。

```{note}
追加するページからページテンプレートを作成するには、すでにページテンプレートセットが作成されている必要があります。
```

ページからページテンプレートを作成する手順は次のとおりです。

1. ページ編集中に、画面上部付近の「**ページテンプレート作成**」 ボタンをクリックします。

    ![ページテンプレートの作成」をクリックすると、編集中のページが新しいページテンプレートになります。](./creating-a-page-template/images/03.png)

1. 画面に表示されるモーダルで、新しいページテンプレートの名前を入力します。

    ![ここでは、新しいページテンプレートの基本的な情報を設定することができます。](./creating-a-page-template/images/04.png)

1. 新しいページテンプレートを追加するページテンプレートセットを選択します。

1. ［作成］をクリックします。

選択したページテンプレートセットには、現在編集中のページを元にした新しいページテンプレートが下書きとして入っています。 **このページテンプレート原案を新しいページで使用するには、公開する必要があります。**

## 新規のページテンプレートの共有

デフォルトでは、ページテンプレートの作成者のみが使用できます。

新しく作成したページテンプレートへのアクセス権を他のユーザーに付与するには、次の手順に従います。

1. ページテンプレートのアクションメニューから ［**Permissions**］ を選択します。

    ![他のユーザーがアクセスできるようにページテンプレートの権限を構成します。](./creating-a-page-template/images/05.png)

1. ページテンプレートへのアクセスを許可するロールの **View** 権限にチェックを入れます。 ページを作成できるユーザーがページテンプレートを使用できるようにする場合は、 **ユーザー** ロールの **View** 権限にチェックを入れます。

1. ［**Save**］ をクリックします。

指定されたロールを持つユーザーは、ページテンプレートにアクセスできます。

## 追加情報

### ウィジェットページの変更の伝播

ウィジェットページテンプレートからページを作成すると、変更はデフォルトでページテンプレートから継承されるため、今後の変更は **自動的** にページテンプレートを使用するページに伝播されます。 サイト管理者は、 [個々のページ設定](../page-settings/configuring-individual-pages.md#general) を通じてこの動作を無効にすることができます。

### コンテントページの変更の伝播

コンテントページテンプレートを使用して作成した場合、コンテントページの **変更は自動的に伝播されません** 。 ただし、コンテントページで使用されるフラグメントへの変更は伝播できます。 詳細については、 [フラグメントの変更のプロパゲート](../page-fragments-and-widgets/using-fragments/propagating-fragment-changes.md) を参照してください。

### 他のサイトとのページテンプレートの共有

ページの場合と同じプロセスを使用して、ページテンプレートを他のサイトと共有できます。 その方法は、「 [サイトページとコンテンツのエクスポート/インポート](../../sites/exporting-importing-site-pages-and-content.md) 」の説明に従ってください。

### ステージングとページテンプレート

```{important}
7.3 GA1以降、ステージング機能は [メンテナンスモード](../../../installation-and-upgrades/upgrading-liferay/reference/maintenance-mode-and-deprecations-in-7-3.md) になっています。
```

ステージングが有効になっている場合、ウィジェットページテンプレートへの変更は、自動的に **準備** ページに伝播されます。 これらの変更は、ページが本番環境に公開される前に承認される必要があります。 このため、準備ページへのウィジェットページテンプレートの変更の自動伝播をオフにすることはできず、 **変更の継承** セレクターは表示されません。

## 追加情報

- [サイトにページを追加する](./adding-a-page-to-a-site.md)
- [ページテンプレートのエクスポートとインポート](./exporting-and-importing-page-templates.md)
- [フルページアプリケーションページタイプの使用](./using-the-full-page-application-page-type.md)
