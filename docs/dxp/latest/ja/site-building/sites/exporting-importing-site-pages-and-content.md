# サイトページとコンテンツのエクスポート/インポート

Liferay Sites には、サイトデータを Liferay Archive (LAR) ファイルとして抽出・転送するための Export/Import アプリケーションが含まれています。 これらのツールは、サイトレベルでアクセスすることができます。

```{note}
また、個々のサイトアプリケーションや[ページウィジェット]のエクスポート/インポート機能(../creating-pages/using-widget-pages/configuring-widgets/exporting-importing-widget-data.md)にアクセスすることが可能です。
```

## サイトLARのプロパティと要件

LARにはこのようなプロパティと要件があります。

* LARはバージョンによって異なります。 それぞれのサーバーのLiferayのバージョンが同じであれば、別のLiferayサーバーのSiteにインポートすることができます。

* 一部の命名の衝突は自動的に処理されます。 たとえば、インポート先のLARとサイトの両方に同じフレンドリーURLのページがある場合、フレンドリーURLに数字が付加され、競合が発生しなくなるまで数字が増加されます。 カテゴリー名についても同様です。

* LARを使用してサイトを復元することはできますが、サイトを完全に削除してから、LARをインポートするために同じ名前で新しいサイトを作成する必要があります。 これにより、LARと本サイトの両方に存在するコンテンツの間でデータが衝突する可能性を回避できます。

```{important}
定期的にLARをエクスポートすることは、バックアップソリューションではありません; 2つの環境間でデータを移行するためにのみ使用されるべきです。 Liferayインストールのバックアップについては、【Liferay Portalインストールのバックアップ】(../../installation-and-upgrades/maintaining-a-liferay-installation/backing-up.md) を参照してください。
```

## サイトのページとコンテンツをエクスポートする

以下の手順で、サイトページとコンテンツをエクスポートします。

1. *サイトメニュー* (![Site Menu](../../images/icon-product-menu.png)) を開き、 *パブリッシング*を展開し、 *エクスポート*をクリックします。

1. *追加* ボタン (![Add Button](../../images/icon-add.png)) をクリックし、新しいエクスポートプロセスを作成します。

   エクスポートテンプレートを開きます。

   ![エクスポートテンプレートの名前と設定を行います。](./exporting-importing-site-pages-and-content/images/01.png)

1. エクスポートプロセスのタイトルを入力します。

1. エクスポートしたいサイトページとコンテンツを選択して、エクスポートプロセスを設定します。

   *Pages* では、どのページとページセットをエクスポートに含めるかを選択することができます。 また、「テーマ設定」「ロゴ」「サイトページ設定」「サイトテンプレート設定」が含まれるかどうかも判断できます。

   *コンテンツ*の下で、エクスポートに含めるアプリケーションを選択することができます。 また、選択したアプリケーションのすべてのデータをエクスポートするか、含まれるアプリケーションのデータを日付または時間でフィルタリングするかを決定することができます。

   *権限*の下で、ページとコンテンツの権限をエクスポートに含めるかどうかを決定します。

1. *Export* をクリックすると、エクスポート処理が開始されます。

終了後、 *Download* ボタン(![Download Button](../../images/icon-download.png))をクリックし、生成された LAR ファイルをダウンロードします。 これで、LARを別のLiferay Siteにインポートすることができます。

![LARファイルをダウンロードしてください。](./exporting-importing-site-pages-and-content/images/02.png)

```{note}
生成されたLARには、エクスポート設定時に選択されたすべてのデータが含まれます。 個人情報や機密情報が含まれる場合は、LARファイルが安全な場所に保管されていることを確認してください。
```

## サイトのページとコンテンツをインポートする

```{important}
エクスポートされたサイトがテンプレートを使用している場合、サイトをインポートする前に、まずサイトテンプレートをLiferayのインストールにエクスポートし、インポートする必要があります。 詳しくは、[サイトテンプレートのエクスポートとインポート](./site-templates/exporting-importing-site-templates.md)をご覧ください。
```

以下の手順で、サイトページとコンテンツをインポートします。

1. *サイトメニュー* (![Site Menu](../../images/icon-product-menu.png)) を開き、 *パブリッシング*を展開し、 *インポート*をクリックします。

1. *追加* ボタン (![Add Button](../../images/icon-add.png)) をクリックし、新しいインポートプロセスを作成します。

1. 希望のLARファイルを追加して、 *Continue*をクリックします。

   ![LARファイルを追加し、[続ける]をクリックします。](./exporting-importing-site-pages-and-content/images/03.png)

1. インポートプロセスを確認し、設定する。

1. *インポート* をクリックすると、インポートが開始されます。

   ![設定し、インポート処理を開始します。](./exporting-importing-site-pages-and-content/images/04.png)

## テンプレートのエクスポートの作成

サイトページのコンテンツをエクスポートするたびにエクスポートプロセスを手動で作成する代わりに、エクスポートテンプレートを作成してエクスポート設定を保存し、再利用することができます。 エクスポートテンプレートを作成するには、以下の手順で行います。

1. *サイトメニュー* (![Site Menu](../../images/icon-product-menu.png)) を開き、 *パブリッシング*を展開し、 *エクスポート*をクリックします。

1. アプリケーションバーの「 *アクション」* ボタン ![Actions Button](../../images/icon-actions.png) をクリックし、「 *テンプレートのエクスポート」*を選択します。

   ![アプリケーションバーの「アクション」ボタンをクリックし、「テンプレートのエクスポート」を選択します。](./exporting-importing-site-pages-and-content/images/05.png)

1. *追加*ボタン（![Add Button](../../images/icon-add.png)）をクリックします。

1. エクスポートテンプレートの名前と設定を行います。

1. *［保存］*をクリックします。

[新しいエクスポートプロセスを作成する際に、テンプレートを選択できるようになりました](#exporting-site-pages-and-content)。

## 追加情報

* [サイトの追加](./adding-a-site.md)
* [サイトテンプレート](./site-templates.md)
* [サイトテンプレートのエクスポート/インポート](./site-templates/exporting-importing-site-templates.md)
