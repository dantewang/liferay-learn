# シャットダウンイベントの構成

［シャットダウン］タブでは、適切なシャットダウンイベントを開始し、ユーザーに差し迫ったシャットダウンを警告し、進行中の作業を保存するように指示できます。

シャットダウンをスケジュールすると、Liferay DXPはシステム警告メッセージとユーザーが定義したメッセージをユーザーのページの上部に表示します。 時間が経過すると、すべてのページにカスタムメッセージが表示されます。 サーバーを再起動すると、アクセスが復元されます。

## シャットダウンイベントの追加

シャットダウンイベントを追加するには、まずシステム設定で非アクティブなリクエストハンドラー構成を有効にします。

1. ［コントロールパネル］&rarr;［設定］&rarr;システム設定へ行き、_インアクティブリクエストハンドラー_を検査します。

1. _［インアクティブリクエストメッセージを表示］_ を有効にし、 _［保存］_をクリックします。

これにより、シャットダウンの発生後にLiferay DXPのどこかに移動しようとするユーザーにメッセージを表示できます。 これがなければ、彼らは完全に空白のページを見るという不親切な経験をするでしょう。

次に、シャットダウン自体を構成します。

1. ［コントロールパネル］&rarr;［設定］&rarr;［サーバ管理］へ行き、_シャットダウン_タブをクリックします。

1. シャットダウンが発生するまでの時間（分単位）を入力します。

1. 特別なメッセージを入力してください。 入力した内容はシステムのデフォルトメッセージに追加されます。

    `Maintenance Alert 4:48 PM EST The portal will shut down for maintenance in 5 minute(s). You will automatically be signed out at that time. Please finish any work in progress. After the maintenance has been completed, you will be able to successfully sign in. [YOUR MESSAGE DISPLAYS HERE]`

   さらに、このメッセージは、シャットダウン後にポータルページに移動したときにユーザーに表示されるメッセージです（［ _非アクティブな要求メッセージを表示_ ］設定を有効にしたため）。

1. _［保存］_ をクリックします。 シャットダウンイベントへのカウントダウンがすぐに始まります。

![シャットダウンまでの時間と警告メッセージは、［シャットダウン］タブで設定できます。](./configuring-a-shutdown-event/images/01.png)

すぐに、ログインしているすべてのユーザーには、ページの上部にシステムメッセージと追加されたカスタムメッセージが表示されます。

![ユーザーには、差し迫ったシャットダウンに関する警告が表示されます。](./configuring-a-shutdown-event/images/03.png)

時間が経過すると、ログインしているLiferay DXPのページに移動しようとするユーザーには、情報のない空白のページではなく、カスタムメッセージ（おそらく後で戻るための招待状が表示される）が表示されます。

![シャットダウン後、カスタムメッセージがユーザーに表示されます。](./configuring-a-shutdown-event/images/02.png)

## シャットダウンイベントのキャンセル

シャットダウンが発生する前であればいつでもキャンセルできます。

1. ［コントロールパネル］&rarr;［設定］&rarr;［サーバ管理］へ行き、_［シャットダウン］_タブをクリックします。

   シャットダウンイベントがスケジュールされている場合、キャンセルできるのは1つだけです。

1. _［シャットダウンのキャンセル］_をクリックします。

これで、スケジュールされたシャットダウンメッセージが消え、ポータルは通常どおり機能します。