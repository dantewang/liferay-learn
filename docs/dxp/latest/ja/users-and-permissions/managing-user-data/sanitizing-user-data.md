# ユーザーデータの無害化

一般データ保護規則（GDPR）の技術的に難しい要件のひとつに、「忘れられる権利」がある。 ここでは、この要件の詳細に関する説明ではなく、その要件を満たすのに役立つ2つの機能（個人データ抹消とデータ匿名化）について説明します。

ソフトウェアによって「忘れ去られる」ことは、個人データが消去または匿名化されたユーザーの身元を知ることにつながる情報を、管理者であっても得る能力を奪うことになる。

概念的には、ユーザーを忘れるということは、少なくとも次の2つのことを意味します。

* システムからユーザーの識別情報を消去します。 Liferay DXPでは、データベーステーブルと検索インデックスからユーザーを削除することになります。
* ユーザーが操作したコンテンツを消去または匿名化して、実際の人物に追跡されないようにします。

```{tip}
ユーザー登録解除と削除で十分ではないか？

削除すると、そのユーザはデータベースのUsersテーブルから削除されます。 しかし、ユーザーの情報は別の場所に保存されています。 標準的なユーザー削除シナリオでは、ユーザーが個人的に作成したすべてのコンテンツは、システムの識別子（ユーザーIDとユーザー名）によってユーザーに割り当てられたままであり、コンテンツの隣にあるUIに表示されます。 このようにユーザーを特定できるデータが意図せずに保存されてしまうことは、GDPRのいくつかの要件を満たすためには不十分であり、データ消去機能が追加された主な理由でもあります。
```

## 個人データ抹消画面

ユーザーデータの削除と匿名化は、どちらも［個人データ抹消］画面で行います。

1. アプリケーションメニュー(![Applications Menu](../../images/icon-applications-menu.png)) を開き、コントロールパネル &rarr; ユーザー &rarr; ユーザーと組織 にアクセスします。

1. ユーザーのアクションボタン（[Actions](../../images/icon-actions.png)）をクリックし、_個人データの削除_を選択します。 ユーザーを無効化していない場合は、無効化するように求められます。

   ユーザーの個人データ抹消画面が表示されます。

ユーザーがシステムに投稿したすべてのデータを閲覧できます。 個人サイト\*をクリックすると、そのサイトのデータを閲覧できます。

![From here, you can browse all data the User posted on his or her personal Site.](./sanitizing-user-data/images/01.png)

通常のLiferay Sitesに投稿されたデータを閲覧するには、_Regular Sites_をクリックします。

![Choose Regular Sites to browse all data posted by the User on administratively-created Sites.](./sanitizing-user-data/images/02.png)

ユーザーのデータを確認するには、そのデータをクリックします。 たとえば、Pepperさんが自分の個人サイトにブログエントリーを投稿したようです。 そのエントリをクリックすると、そのブログエントリーのタイトルが表示されます。

![Pepper's blog entry might need review.](./sanitizing-user-data/images/03.png)

エントリをレビューするには、それをクリックします。 アプリケーションの編集モード（この場合はブログ）が表示され、必要なコンテンツに変更を加えることができます。

アプリケーションのすべてのアイテムを一度に管理（匿名化または削除）するには、

1. アプリケーションのアクションボタン（[Actions](../../images/icon-actions.png)）をクリックします。

1. アプリケーションのすべての項目を安全に削除できることを確認したら、_Delete_を選択します。

1. アプリケーションの全項目について、単純な匿名化で十分だと思う場合は、_匿名化_を選択してください。

インターフェイスを使用して、サイト、アプリケーション、およびデータを閲覧します。

## ユーザーの削除

すべてのデータが必要に応じて確認、削除、編集、または匿名化されたら、ユーザーを削除します。 ［個人データ抹消］画面が終了すると、ダイアログボックスが自動的にポップアップします。 このステップは簡単です：*OK*をクリックします。

![To finish the data erasure process, delete the User.](./sanitizing-user-data/images/04.png)

これで、ユーザーのデータが匿名化または削除され、ユーザーも削除されます。

```{warning}
ユーザー管理ツールは、ユーザーが作成したコンテンツの匿名化や削除を支援します。 しかし、あなたのサイトに影響を与える可能性のあるいくつかの依存関係は、削除後も存続する可能性があります。 例えば、サイトページを作成したユーザーを削除すると、サイトエラーが発生する可能性があります。 これらのエラーを修正するためには、既存のユーザーによってサイト・コンテンツを再作成する必要があるかもしれません。 ユーザーの匿名化は、ユーザー削除の代替オプションである。
```

## 手動による匿名化

多くの場合、ユーザーのIDフィールドだけを匿名化し、ユーザーを削除するだけでは不十分です。 例えば、John Smithというユーザーが個人を特定できる情報をフォームに入力した場合、そのテキスト入力フィールドはUADフレームワークによって匿名化されません。

![A user inputs identifiable information into an input text field.](./sanitizing-user-data/images/05.png)

匿名化後、_Author_フィールドはサニタイズされましたが、ユーザー入力テキストは残っており、手動で削除する必要があることに注意してください。

![User input text is not anonymized.](./sanitizing-user-data/images/06.png)

このようなユーザー生成コンテンツは、手動で識別し、個人を特定する情報を削除するために編集する必要があります。
