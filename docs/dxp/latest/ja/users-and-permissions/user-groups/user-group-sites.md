# ユーザーグループサイト

ユーザーグループサイトでは、各メンバーの個人サイト [に自動的に追加されるページを作成することができます](../../site-building/sites/personal-sites.md)。 これらのページは、個人サイトと同様に、2つのページセット [page sets](../../site-building/creating-pages/understanding-pages/understanding-pages.md#page-sets) , **マイプロフィール**(公開), **マイダッシュボード**(非公開)に整理されています。 ユーザーが複数のユーザーグループに所属している場合、それらのグループのすべてのページが、ユーザーのサイトにも追加されます。

![各メンバーの個人サイトに追加されるプロフィールとダッシュボードのページを作成します。](./user-group-sites/images/01.png)

デフォルトでは、継承されたページはユーザーグループサイトからのみ編集可能であり、個人サイトからは編集することができません。 ユーザーグループの管理者は、必要に応じて、カスタマイズ可能なページ領域を定義し、ユーザーがページ内にウィジェットを追加して設定できるようにすることができます。

ユーザーグループのサイトは、 [手動で](#designing-user-group-sites-manually) または [サイトテンプレートを使用して設計することができます](#using-site-templates) .

```{important}
Liferay 7.4 U22+とGA22+では、新規にインストールしたLiferayにリリースフィーチャーフラグが含まれており、マイダッシュボードページを含むプライベートページの作成が無効になっています。 ユーザーグループのカスタムダッシュボードのページを手動で作成するには、LiferayシステムでPrivate Pagesを有効にする必要があります。 詳しくは、 [プライベートページの有効化](../../site-building/creating-pages/understanding-pages.md#enabling-private-pages) をご覧ください。

また、プライベートページが無効の場合、サイトテンプレートを使ってマイダッシュボードページを追加することができます。 テンプレートに追加され、マイダッシュボードページセットに適用されたページは、プライベートページとして扱われます。
```

## ユーザーグループのサイトを手動でデザインする

ユーザーグループサイトを手動でデザインするには、次の手順に従います。

1. **グローバルメニュー**(![Global Menu](../../images/icon-applications-menu.png)) を開き、 **コントロールパネル** を開き、 **ユーザーグループ** をクリックします。

1. 目的のグループの「**アクション**」 ボタン (![Actions Button](../../images/icon-actions.png)) をクリックし、「**ページの管理**」 を選択します。

1. [サイトページの追加とデザイン](../../site-building/creating-pages/adding-pages/adding-a-page-to-a-site.md).

   ```{note}
   プライベートページは無効ですが、この方法で追加されたすべてのページは、*My Profile*ページセットに追加されます。 My Dashboard* セットにページを追加するには、プライベートページを有効にして作成する必要があります。
   ```

1. (オプション)**Site Menu**(![Site Menu](../../images/icon-product-menu.png)) をクリックすると、その他のサイトアプリケーションと設定オプションにアクセスできます。

ユーザーグループサイトにページが追加されると、 **User Groups** アプリケーションから閲覧することができます。 希望するグループの **Actions** ボタン (![Actions Button](../../images/icon-actions.png)) をクリックし、 **Go to Profile Pages** または **Go to Dashboard Pages** を選択するだけでよいのです。

## サイトテンプレートの使用

[サイトテンプレート](../../site-building/sites/site-templates.md)を使って、ユーザーグループサイトにプロファイルとダッシュボードのページを作成する手順は以下のとおりです。

1. **グローバルメニュー**(![Global Menu](../../images/icon-applications-menu.png)) を開き、 **コントロールパネル** を開き、 **ユーザーグループ** をクリックします。

1. 目的のグループの **Actions** ボタン (![Actions Button](../../images/icon-actions.png)) をクリックし、 **Edit** を選択します。

1. **マイプロフィール** と **マイダッシュボード** ドロップダウンメニューで、各ページセット用のサイトテンプレートを選択します。

   ![My ProfileとMy Dashboardのページセットに使用するSite Templateを選択します。](./user-group-sites/images/02.png)

1. サイトテンプレートからの変更の伝搬を有効にするかどうかを決定します。

   ```{note}
   有効にすると、テンプレートの変更がユーザーグループサイトに自動的に伝搬されます。 このオプションを無効にし、後で再び有効にすると、テンプレートのページがユーザーサイトにコピーされ、変更された内容が上書きされます。
   ```

1. ［**Save**］ をクリックします。

保存されると、テンプレートのページは、各グループメンバーの個人サイトに、 **My Profile** または **My Dashboard** ページセットとして追加されます。

## 従来のユーザーグループサイトの動作

何百万ものユーザーがいる場合でも、ユーザーグループサイトページの継承によるパフォーマンスへの影響はありません。 ただし、7.0より前のバージョンのLiferay PortalとLiferay DXPでは、各ユーザーの個人用サイトにユーザーグループページをコピーする必要がありました。

Liferay DXP 7.2を使用していて、その動作を維持する必要がある場合は、次の行を `portal-ext.properties` ファイルに追加して有効にします。

```
user.groups.copy.layouts.to.user.personal.site=true
```

このプロパティはLiferay DXP 7.3で削除されました。

このプロパティが `true`設定されている場合、テンプレートページはユーザーの個人サイトに一度コピーされた後、ユーザーによって変更される可能性があります。 これは、後でテンプレートページに変更が加えられた場合、変更後にユーザーグループに追加されたユーザーにのみ影響することを意味します。 テンプレートに対して ［**Allow Site Administrators to Modify Pages Associated with This Site Template**］ ボックスをオンにすると、個人サイトの管理権限を持つユーザーがページとその内容を変更できます。 ユーザーがユーザーグループから削除されると、関連するページがユーザーの個人用サイトから削除されます。 ユーザーがグループから削除され、その後再び追加された場合、グループのテンプレートページがユーザーのサイトに再度コピーされます。 ユーザーグループのサイトがサイトテンプレートに基づいており、ユーザーがグループに追加された後に管理者がユーザーグループのサイトテンプレートを変更した場合、ユーザーグループの ［**サイトテンプレートの変更のプロパゲーションを有効にする**］ ボックスにチェックが入っていた場合のみ変更が有効になることに注意してください。
