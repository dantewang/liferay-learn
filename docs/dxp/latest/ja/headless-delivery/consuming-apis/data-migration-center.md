# バッチテンプレートデザイナー

{bdg-secondary}`liferay DXP 2023.Q4+/Portal 7.4 GA98+`
{bdg-link-primary}`[ベータ版フィーチャー](../../system-administration/configuring-liferay/feature-flags.md#beta-feature-flags)`

```{important}
データ移行センターはベータ機能で、現在はオブジェクト定義とオブジェクトエントリーのインポートとエクスポートのみをサポートしています。
```

データ移行センターでは、Liferayのインストール間でオブジェクト定義やオブジェクトエントリを簡単に移動できます。

データ移行センターを有効にする、

1. グローバル・メニューに移動する (![グローバル・メニュー](../../images/icon-applications-menu.png)) &rarr; _コントロールパネル_ &rarr; _インスタンス設定_.

1. プラットフォーム」の下にある「機能フラグ」をクリックします。

1. 左のナビゲーションで_Beta_を選択。 データ移行センター_を有効にする。

1. グローバルメニューに移動する (![グローバルメニュー](../../images/icon-applications-menu.png)) &rarr; _アプリケーション_ &rarr; _データ移行センター_.

   ![The data migration center is found under applications.](./data-migration-center/images/01.png)

1. インポートおよびエクスポート］タブをクリックすると、インポートおよびエクスポー トのタスクとそのステータスのリストが表示されます。 options_（[オプションアイコン](../../images/icon-options.png)）アイコンをクリックして、以前のタスクのファイルをダウンロードします。

1. Templates_タブをクリックすると、インポートおよびエクスポートテンプレートのリストが表示されます。

## オブジェクト定義のエクスポート

オブジェクト定義をエクスポートするには

1. _追加_（！[アイコンの追加](../../images/icon-add.png)）をクリックし、_ファイルのエクスポート_を選択します。

1. (オプション）次のページで、以前に保存したテンプレートを使用する場合は、エクスポート・テンプレートを選択します。

1. エンティティタイプとして_ObjectDefinition (v1_0 - Liferay Object Admin REST)_を選択します。

1. エクスポートファイルフォーマットのいずれかを選択します。

   ```{note}
   データ移行センターは、インポート用にJSONおよびJSONLファイル形式のみをサポートしています。

   バッチクライアント拡張機能と組み合わせて使用するためにエクスポートする場合は、JSONTファイル形式を選択します。 JSONTは`*.batch-engine-dat.json`ファイルに必要である。
   ```

1. fields セクションで、エクスポートに含めたいオブジェクト定義フィールドを選択します。

   ![Select the object definition fields you wish to export.](./data-migration-center/images/02.png)

1. Save as Template_をクリックし、エクスポート設定を保存します。 テンプレートに名前を付け、_Save_をクリックします。

1. 最後に、_Export_をクリックしてオブジェクト定義をエクスポートします。

1. エクスポートプロセスを表示するウィンドウが表示されます。 ジョブが完了したら、_Download_をクリックしてzipファイルをダウンロードします。

   ![Click download to download a zip file.](./data-migration-center/images/03.png)

   zipファイルがローカルマシンにダウンロードされます。

## オブジェクトエントリーのエクスポート

オブジェクトエントリーをエクスポートするには

1. _追加_（！[アイコンの追加](../../images/icon-add.png)）をクリックし、_ファイルのエクスポート_を選択します。

1. (オプション）次のページで、以前に保存したテンプレートを使用する場合は、エクスポート・テンプレートを選択します。

1. エンティティ・タイプで、作業したいオブジェクトを選択します。 オブジェクトの詳細については、 [オブジェクトの作成と管理](../../building-applications/objects/creating-and-managing-objects.md) を参照してください。

1. エクスポートファイルフォーマットのいずれかを選択します。

1. fields セクションで、エクスポートに含めたいオブジェクト定義フィールドを選択します。

1. Save as Template_をクリックし、エクスポート設定を保存します。 テンプレートに名前を付け、_Save_をクリックします。

1. 最後に、_Export_をクリックして、オブジェクトエントリーをエクスポートします。

1. エクスポートプロセスを表示するウィンドウが表示されます。 ジョブが完了したら、_Download_をクリックしてzipファイルをダウンロードします。 zipファイルがローカルマシンにダウンロードされます。

## オブジェクト定義のインポート

オブジェクト定義をインポートするには

1. _Add_ (![Add icon](../../images/icon-add.png)) をクリックし、_Import File_ を選択します。

1. 次のページで、新しいインポートタスクの名前を入力します。

1. (オプション）以前に保存したテンプレートを使用する場合は、インポートテンプレートを選択します。

1. エンティティタイプとして_ObjectDefinition (v1_0 - Liferay Object Admin REST)_を選択します。

1. チェックボックスを使用して、エラー時にインポートタスクを停止するか続行するかを選択します。

1. インポート戦略で、_レコードの追加または更新_または_新規レコードの追加のみ_のオプションを選択します。 注意: _Only Add New Records_が選択されている場合、エンティティが既に存在すると、インポート・タスクはエラーで失敗します。 代わりに_Add or Update Records_を選択すると、データ移行センターが既存のエンティティを上書きします。

1. 更新ストラテジ］で、［変更されたレコードフィールドの更新］または［レコードの上書き］のオプションを選択します。 なお、_Overwrite Records_を選択すると、エンティティ全体が更新される。 変更されたレコードフィールドの更新_」を選択すると、インポートファイルで定義されたフィールドのみが更新され、残りの既存の値はそのまま残されます。

1. ファイル設定の下にある_Choose File_をクリックし、インポートするオブジェクト定義を含むJSONファイルを探します。

   ![Select the JSON file that contains the object definitions to import.](./data-migration-center/images/04.png)

1. インポートマッピングで、ソースファイルフィールドの下にあるドロップダウンリストを選択し、マッピングを変更します。

   ![Make any mapping changes under the import mappings section.](./data-migration-center/images/05.png)

1. _Save as Template_をクリックし、エクスポート設定を保存します。 テンプレートに名前を付け、_Save_をクリックします。

1. Next_をクリックしてインポートを続行します。 ポップアップウィンドウで、_Start Import_をクリックする。

1. ポップアップウィンドウにインポートの進行状況が表示されます。 完了したら「閉じる」をクリックする。 インポート処理中にエラーが発生した場合は、データ移行のメインページに戻り、_Options_（！[オプションアイコン](../../images/icon-options.png)）をクリックしてエラーレポートをダウンロードしてください。

1. グローバルメニューに移動する (![グローバルメニュー](../../images/icon-applications-menu.png)) &rarr; コントロールパネル_ &rarr; _Objects_で、インポートされたオブジェクト定義を確認します。

## オブジェクトエントリーのインポート

オブジェクトエントリーをインポートするには

1. Add_ (![Add icon](../../images/icon-add.png)) をクリックし、_Import File_ を選択します。

```{note}
エントリーをインポートする前に、オブジェクトが存在することを確認してください。
```

1. 次のページで、新しいインポートタスクの名前を入力します。

1. (オプション）以前に保存したテンプレートを使用する場合は、インポートテンプレートを選択します。

1. エンティティ・タイプで、作業したいオブジェクトを選択します。

1. チェックボックスを使用して、エラー時にインポートタスクを停止するか続行するかを選択します。

1. インポート戦略で、_レコードの追加または更新_または_新規レコードの追加のみ_のオプションを選択します。 注意: _Only Add New Records_が選択されている場合、エンティティが既に存在すると、インポート・タスクはエラーで失敗します。 代わりに_Add or Update Records_を選択すると、データ移行センターが既存のエンティティを上書きします。

1. 更新ストラテジ］で、［変更されたレコードフィールドの更新］または［レコードの上書き］のオプションを選択します。 なお、_Overwrite Records_を選択すると、エンティティ全体が更新される。 変更されたレコードフィールドの更新_」を選択すると、インポートファイルで定義されたフィールドのみが更新され、残りの既存の値はそのまま残されます。

1. ファイル設定の下で、_Choose File_をクリックし、インポートするオブジェクトエントリを含むJSONファイルを探します。

1. インポートマッピングで、ソースファイルフィールドの下にあるドロップダウンリストを選択し、マッピングを変更します。

1. _Save as Template_をクリックし、エクスポート設定を保存します。 テンプレートに名前を付け、_Save_をクリックします。

1. Next_をクリックしてインポートを続行します。 ポップアップウィンドウで、_Start Import_をクリックする。

1. ポップアップウィンドウにインポートの進行状況が表示されます。 完了したら「閉じる」をクリックする。 インポート処理中にエラーが発生した場合は、データ移行のメインページに戻り、_Options_（！[オプションアイコン](../../images/icon-options.png)）をクリックしてエラーレポートをダウンロードしてください。

1. [パブリッシュされたオブジェクト](../../building-applications/objects/creating-and-managing-objects/creating-objects.md#publishing-object-drafts) にパネルリンクがある場合、オブジェクトに移動してインポートされたオブジェクトエントリを確認します。

## 関連トピック

* [オブジェクトの作成と管理](../../building-applications/objects/creating-and-managing-objects.md)
* [バッチクライアント拡張](../../building-applications/client-extensions/batch-client-extensions.md)
* [バッチエンジン API の基本 - データのインポート](./batch-engine-api-basics-importing-data.md)
* [バッチエンジン API の基本 - データのエクスポート](./batch-engine-api-basics-exporting-data.md)
