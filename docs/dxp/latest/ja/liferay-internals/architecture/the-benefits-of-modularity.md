# モジュール性のメリット

Dictionary.comでは、 [モジュール性](http://www.dictionary.com/browse/modularity) を、 **電子システムまたは機械システムの組み立てのように、個別に異なる機能ユニットを使用することと定義しています。** 個別の機能ユニットは **モジュール** と呼ばれます。

たとえば、NASAのアポロ宇宙船は3つのモジュールで構成されており、それぞれに異なる機能があります。

* **月着モジュール** ：アポロ宇宙船から月面に宇宙飛行士を運び、帰還させました。
* **サービスモジュール** ：推進力、空調、および水用の燃料を提供しました。
* **コマンドモジュール** ：宇宙飛行士と通信およびナビゲーションコントロールを収容しました。

![アポロ宇宙船のモジュールは、宇宙飛行士をまとめて月面に運び、地球に帰還させました。](./the-benefits-of-modularity/images/01.png)

宇宙船とそのモジュールは、次のモジュール性の特徴を象徴するものでした。

* **個別の機能** ：各モジュールは個別の機能（目的）を提供します。モジュールを組み合わせて、まったく新しい集合機能を提供できます。

  アポロ宇宙船のモジュールはグループ化され、宇宙飛行士を地球の大気圏外から月面に連れて行き、地球に帰還させるという明確な集合機能を果たしました。

* **依存関係** ：モジュールは、他のモジュールが満たす機能を必要とする場合があります。

  アポロ宇宙船のモジュールには次の依存関係がありました。

    * 月着モジュールは、月に近づくためにサービスモジュールに依存していました。

    * コマンドモジュールは、電力と酸素をサービスモジュールに依存していました。

    * サービスモジュールは、命令をコマンドモジュールに依存していました。

* **カプセル化** ：モジュールは実装の詳細を隠しますが、機能とインターフェイスを公に定義します。

  アポロ宇宙船の各モジュールは、その機能とインターフェイスを定義する契約を結んで委託されましたが、各モジュールの詳細は他のモジュールからカプセル化（非表示）されていました。 NASAは、インターフェイスに基づいてモジュールを統合しました。

* **再利用性** ：モジュールはさまざまなシナリオに適用できます。

  コマンドモジュールの構造と設計は再利用可能でした。 たとえば、NASAはアポロ計画全体と、地球軌道に焦点を合わせたジェミニ計画で、さまざまなバージョンのコマンドモジュールを使用しました。

NASAはモジュール性を使用して、月へのミッションを12回以上成功させました。 モジュール性はソフトウェアにもメリットがあるでしょうか。 もちろんあります。

<a name="ソフトウェアにおけるモジュール性の利点" />

## ソフトウェアにおけるモジュール性の利点

Javaアプリケーションは、大規模なコードベースで開発されたモノリシックなものが主流でした。 モノリスでは、クラスの緊密な結合を避けることは困難です。あるクラスを変更すると、他のクラスも変更しなければならないことがよくあります。 逆に、モジュール式アプリケーションの設計では、疎結合が容易になり、コードの保守が容易になります。 モジュールで少量のまとまりのあるコードを開発する方がはるかに簡単で楽しいです。 モジュール式ソフトウェアを開発することで得られる主なメリットをご紹介します。

### 明確な機能

一度に1つのソフトウェアの開発に集中するのは自然なことです。 モジュールでは、モジュールの機能を定義および実装するための小さなクラスの集合を開発します。 スコープを小さく保つことで、高品質でエレガントなコードの記述が容易になります。 コードのまとまりが強いほど、テスト、デバッグ、および保守が容易になります。 モジュールを組み合わせて新しい機能を提供し、各モジュールの機能と区別できます。

### カプセル化

モジュールは機能をカプセル化します。 モジュールの実装はコンシューマからは見えないため、必要に応じてモジュールを作成および変更できます。 モジュールの有効期間中、実装を修正および改善したり、まったく新しいものに交換したりできます。 変更はコンシューマに透過的に、水面下で行うことができます。 モジュールの契約は、その機能とインターフェイスを定義し、モジュールを理解して使用しやすくします。

### 依存関係

モジュールには要件と機能があります。 モジュール間の相互作用とは、あるモジュールの機能が別のモジュールの要件を満たすといった機能のことです。 モジュールは、Maven Centralなどのアーティファクトリポジトリに公開されます。 モジュールのバージョン管理スキームにより、特定のモジュールバージョンまたはバージョン範囲への依存関係が有効になります。

### 再利用性

うまく機能するモジュールは、さまざまな目的でプロジェクト間で再利用できます。 役立つ信頼できるモジュールを見つけたら、それらを何度も使用したいと思うでしょう。

それではモジュール式アプリケーションを設計してみましょう。

<a name="例モジュール式アプリケーションの設計" />

## 例：モジュール式アプリケーションの設計

多くの場合、アプリケーションの設計は単純なものから始まりますが、アプリケーションの機能を決定していくごとに複雑になります。 サードパーティのライブラリがすでに機能を提供している場合は、[アプリでデプロイ](../../liferay-internals/fundamentals/configuring-dependencies/resolving-third-party-library-package-dependencies.md)できます。  それ以外の場合は、自分で機能を実装できます。

アプリの機能をサポートするためにアプリのさまざまな側面を設計するときは、それらの側面がコードベースにどのように適合するかを決定する必要があります。 それらを単一のモノリシックコードベースに配置すると、多くの場合、密結合になりますが、各側面に個別のモジュールを指定することで、疎結合が促進されます。 アプリケーション設計へのアプローチを採用することで、モジュール性のメリットを享受できます。

たとえば、モジュール式の設計を音声認識アプリに適用できます。

**機能** ：ユーザーの音声をコンピュータが理解できるようにテキストに変換するインターフェイス。

**必要な機能** ：

* ユーザーの単語をテキストに変換します。
* 選択したコンピューターの音声を使用してユーザーと話します。
* 質問、コマンド、要求、および確認などの指示のスクリプトに基づいてユーザーと対話します。

モジュールを作成して、必要な機能を提供できます。

* **音声テキスト変換** ：話し言葉をコンピューターが理解できるテキストに変換します。
* **音声UI** ：保存された質問、コマンド、確認に基づいて、ユーザと対話します。
* **命令マネージャー** ：アプリケーションの質問、コマンド、および確認を保存および提供します。
* **コンピューター音声** ：ユーザーが選択できるコンピューター音声を保存および提供します。

次の図は、音声認識アプリケーションのモノリシック設計とモジュラー設計を対比しています。

![音声認識アプリケーションは、単一のモノリシックコードベースまたはモジュールで実装でき、それぞれが特定の機能に焦点を合わせています。](./the-benefits-of-modularity/images/02.png)

アプリをモノリスとして設計すると、すべてがひとまとめになります。 アプリケーションの側面の間に最初の境界はありません。 しかし、モジュラー設計では側面が区別されます。

モジュールを並行して作成し、各モジュールに独自の機能を持たせることができます。 モジュールで構成されるアプリケーションを設計することで、機能を表すまとまりのあるコードを作成できます。 各モジュールの機能は、他のシナリオでも **再利用** できる可能性があります。

たとえば、 **命令マネージャー** と **コンピューター音声** モジュールは、ナビゲーションアプリで **再利用** できます。

![音声認識アプリ用に設計された命令マネージャーとコンピューター音声モジュールは、ナビゲーションアプリで使用（または再利用）できます。](./the-benefits-of-modularity/images/03.png)

音声認識アプリをモジュールとして設計する利点は次のとおりです。

* 各モジュールは、アプリの全体的な機能に寄与する各機能を表します。
* アプリは、開発、テスト、保守が簡単なモジュールに依存しています。
* モジュールは、さまざまなアプリケーションで再利用できます。

結論として、モジュール性は文字通り私たちを月へと導いてくれました。 これはソフトウェア開発にも役立ちます。 音声認識アプリケーションの例は、モジュールで構成されるアプリを設計する方法を示しています。

次に、OSGiによってサービスを提供および利用するモジュールの作成がどのように容易になるかを学習します。
