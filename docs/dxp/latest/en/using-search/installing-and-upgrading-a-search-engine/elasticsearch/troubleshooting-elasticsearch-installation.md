---
toc:
- ./troubleshooting-elasticsearch-installation/troubleshooting-elasticsearch-liferay-connection.md
- ./troubleshooting-elasticsearch-installation/troubleshooting-elasticsearch-liferay-logging.md
- ./troubleshooting-elasticsearch-installation/troubleshooting-elasticsearch-sidecar-embedded.md
---

# Troubleshooting Elasticsearch Installation

```{toctree}
:maxdepth: 1

troubleshooting-elasticsearch-installation/troubleshooting-the-elasticsearch-liferay-connection.md
troubleshooting-elasticsearch-installation/troubleshooting-elasticsearch-liferay-logging.md
troubleshooting-elasticsearch-installation/troubleshooting-elasticsearch-sidecar-embedded.md
```

Liferay is full of configurations, and Elasticsearch is full of configurations. Whenever you [connect such products](./getting-started-with-elasticsearch.md), you can run into difficulty along the way. 

Included below are techniques that can aid your troubleshooting work. To learn about some of the errors you might experience and how to solve them, see

- [Troubleshooting the Elasticsearch Connection](./troubleshooting-elasticsearch-installation/troubleshooting-the-elasticsearch-connection.md)
- [Troubleshooting Elasticsearch: Common Issues](./troubleshooting-elasticsearch-installation/troubleshooting-elasticsearch-common-issues.md)

## Inspecting the Search Bar's Elasticsearch Query

Liferay's search infrastructure generates a large Elasticsearch request when a user searches form the Search Bar widget. To inspect the query that's sent to elasticsearch, to use the _Search Insights_ widget. For more information see [Search Insights](../search-pages-and-widgets/search-insights.md).

## Inspecting any Liferay-Generated Elasticsearch Query

To inspect any Elasticsearch query generated by Liferay, set the log level for `com.liferay.portal.search.elasticsearch7.internal.ElasticsearchIndexSearcher` to `INFO` level using the [Server Administration Log Levels UI](../../../system-administration/using-the-server-administration-panel/configuring-logging.md).

```{tip}
If you are on Liferay 7.1-7.2 and using the default bundled _Connector to Elasticsearch 6_, change the version number in the package name from `7` to `6`.
```

## Enabling Verbose SSL Logging

To troubleshoot encryption related issues, enable verbose SSL logging.

For Liferay, you can set `-Djavax.net.debug=ssl:handshake:verbose` in the Application Server's JVM. In Tomcat you can add the option  to `CATALINA_OPTS` in `setenv.sh`:

```properties
CATALINA_OPTS="$CATALINA_OPTS -Djavax.net.debug=ssl:handshake:verbose"
```

For Elasticsearch, add `-Djavax.net.debug=ssl:handshake:verbose` to the end of `[Elasticsearch Home/]config/jvm.options`.
