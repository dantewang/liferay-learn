# 인증에 대한 표준 기반 접근 방식

**한눈에**

* Liferay 인증은 OpenID Connect, SAML 등과 같은 표준 기반 인증 접근 방식으로 지원됩니다.
* 외부 ID 관리 시스템은 단일 인증 로그인을 여러 애플리케이션에서 사용할 수 있도록 싱글 사인온과 함께 사용되는 경우가 많습니다.
* 다단계 인증은 보안을 강화하기 위해 추가 요소를 추가하여 기본 비밀번호 기반 인증을 확장합니다.

## OpenId Connect

Liferay의 기본 ID 관리 기능을 사용하는 것 이상으로 나아갈 때 매우 일반적인 접근 방식은 표준 기반 분산 인증 프로토콜인 OpenID Connect(OIDC)를 사용하는 것입니다.

OpenID Connect는 일반적으로 사용자가 Google, Facebook, Microsoft, Apple 또는 GitHub와 같은 잘 알려진 공급자의 기존 자격 증명 세트를 사용하여 Liferay에 연결할 수 있는 B2C 유형의 애플리케이션에 사용됩니다.

잠재적인 공급자 목록은 거의 끝이 없다는 점에 유의하는 것이 중요합니다. 공급자가 OpenID Connect를 지원하는 경우 Liferay DXP에서 사용되도록 구성할 수 있습니다.

OpenID Connect는 간단한 구성으로 사용할 수 있으므로 개발 작업이 필요하지 않으므로 확장성 및 유연성과 같은 OpenID Connect의 이점을 강조하세요. OpenID Connect를 사용하면 Liferay는 사용자가 OpenID Connect 자격 증명을 사용하여 처음 인증할 때 자동으로 사용자 계정을 생성합니다.

대부분의 데모에서는 일반적으로 OpenID Connect와 같은 인증 메커니즘을 사용하지 않습니다. 왜냐하면 일반적으로 기본 Liferay 인증으로 인증 스토리를 설명하기에 충분하기 때문입니다.

확실히 이 학습 경로의 목표(기존 데모를 사용하여 30분 데모 제공 준비)를 위해 OpenID Connect와 같은 기능이 시연되거나 로그인이 어떤 방식으로든 사용자 정의될 것이라는 기대는 없습니다.

__ 잠재 고객이 외부 ID를 사용하여 Liferay에 대한 인증을 확인하려는 경우 OpenID Connect를 사용하도록 Liferay를 구성하는 것은 간단합니다. 그러나 OpenID Connect의 OOTB 구현에서는 사용자가 링크를 클릭한 다음 공급자를 수동으로 선택해야 합니다.

많은 실제 사용 사례에서 이는 완벽하게 관련됩니다. 사용자가 공급자 목록에서 선택하지만 잠재 고객의 요구 사항이 모든 사용자가 _단일_ 공급자를 사용하여 인증하는 것이라면 기본 UI는 올바른 기대.

Liferay의 영업 엔지니어 중 한 명이 프로세스를 원활하게 만드는 버튼을 제공하기 위해 간단한 사용자 정의 조각을 만들었습니다. 이 조각의 소스 코드는 Github [여기](https://github.com/lgdd/openid-connect-single-button)에서 확인할 수 있습니다.

## SAML, SSO, IDMS

Liferay가 기본적으로 지원하는 또 다른 인증 메커니즘은 Security Assertion Markup Language를 의미하는 SAML입니다. SAML은 인증에 사용되는 개방형 표준입니다.

SAML은 별개이지만 밀접하게 연결된 두 가지 개념을 사용하여 작동합니다.

* 한 시스템은 IdP(ID 공급자) 역할을 하며 사용자 기록과 자격 증명을 포함합니다.
* 두 번째 시스템은 서비스 공급자(SP) 역할을 하며 인증을 받는 응용 프로그램입니다.

Liferay의 SAML 구현을 통해 Liferay를 ID 공급자 또는 서비스 공급자로 사용할 수 있지만 대부분 서비스 공급자로 사용됩니다.

SAML은 알려진 사용자 집합이 있고 조직 내의 다른 사용자와 함께 Liferay에 로그인하는 쉬운 방법이 필요한 SSO(Single Sign-On 시나리오)에서 가장 많이 사용되는 방법입니다. 사용 사례의 예로는 인트라넷과 같은 내부 시스템이 있습니다.

Single Sign-On(SAML 또는 기타 기능을 사용하여 구현 여부)을 사용하면 사용자는 기억해야 할 단일 사용자 ID와 비밀번호를 갖게 되며, 한 시스템에 로그인하면 모든 시스템에서 자동으로 인증될 수 있습니다.

일반적으로 SAML을 사용하는 경우 자격 증명을 관리하는 외부 시스템, 즉 전용 IDMS(ID 관리 시스템)가 있습니다. 이 구성에서는 비밀번호가 Liferay에서 유지되지 않지만 권한을 할당할 수 있도록 사용자 계정이 계속 생성됩니다. 이는 인증과 권한 부여를 분리하는 좋은 예입니다.

* 사용자는 ID 관리 시스템의 자격 증명을 기준으로 인증됩니다.
* 사용자는 Liferay에 정의된 권한에 따라 승인됩니다.

잠금 비유를 계속하면 SAML은 Liferay 인증에 사용되는 잠금과 다른 유형의 잠금입니다. Liferay에 로그인하는 방법에는 여러 가지가 있습니다. 예를 들면 다음과 같습니다.

* LDAP(Lightweight Directory Access Protocol)를 구성할 수 있습니다.
* 토큰 기반 시스템을 사용할 수 있습니다.
* 사용자 정의 인증 메커니즘을 개발할 수 있습니다.

## 다단계 인증

비밀번호 기반 보안은 누구나 잘 알고 있는 것입니다. 비밀번호의 제한 사항도 잘 알려져 있으며 다음과 같습니다.

* 공유하는
* 강력한 비밀번호 정책이 마련되어 있지 않으면 추측하기 쉽습니다.
* 강력한 비밀번호를 사용하더라도 사용자가 잊어버릴 수 있으므로 기록해 둘 수 있습니다.

다중 요소 인증(MFA)은 우회하는 것이 불가능하지는 않더라도 더 어려운 추가 인증 요소를 추가합니다. 대부분의 사람들은 코드가 이메일이나 SMS로 전송되는 시간 기반 일회성 PIN과 같은 기술에 익숙합니다. 이는 짧은 기간 후에 만료되므로 쉽게 공유할 수 없습니다.

더욱 안전한 방법은 PIN을 특정 장치에 연결하는 Google Authenticator와 같은 Fast Identity Online 2(FIDO2) 장치나 애플리케이션을 사용하는 것입니다.

Liferay는 다음 요소에 대한 지원을 포함하여 기본적으로 다단계 인증을 지원합니다.

* 일회용 PIN(OTP)
* 시간 기반 OTP(TOTP)
* 이메일 기반 OTP
* FIDO2 장치 및 애플리케이션.
* IP 주소 범위 제한

이 마지막 옵션은 실제로 다단계 인증이 아닙니다. 인증을 시도할 수 있는 사람을 더 제한합니다. 실제로 유사한 기능은 웹 응용 프로그램 방화벽을 통해 또는 Liferay 앞의 웹 계층을 사용하여 구현할 수 있습니다. 제품에서 사용할 수 있으며 데모를 할 때 이야기할 수 있습니다.

대부분의 데모에는 다단계 인증에 대한 실시간 데모가 포함되지 않지만 기본적으로 제공되는 기능에 대해 이야기하는 것이 중요합니다. 그렇게 하면 모든 Liferay 애플리케이션이 안전할 것이라는 전망에 높은 수준의 확신을 구축할 수 있기 때문입니다.

마지막으로 이 모듈에서는 인증이 [인증](./authorization.md) 로 보완되어 인증된 후 사용자가 보고 상호 작용할 수 있는 내용을 제어하는 방법에 대해 알아봅니다.
